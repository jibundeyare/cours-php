<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"><!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Développement web côté serveur avec PHP</title>
<meta name="description" content="">

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0" />

<link href="css/vendor/normalize.css" rel="stylesheet" type="text/css" />
<link href="css/vendor/foundation.css" rel="stylesheet" type="text/css" />
<link href="css/vendor/pygmentize.css" rel="stylesheet" type="text/css" />
<!-- <link href="css/vendor/syntax.css" rel="stylesheet" type="text/css" /> -->
<link href="css/style.css" rel="stylesheet" type="text/css" />

<script src="js/vendor/modernizr.js"></script>

</head>
<body>
<!--[if lt IE 7]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<section class="row">
    <article class="columns small-12">

        <h1><a href="index.html">Développement web côté serveur avec PHP</a></h1>


<h2>tous les fichiers du dossier <code>code</code></h2>



    

    <a href="code/appel-fonction1.php">code/appel-fonction1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script vérifie la présence d'un fichier et lit son contenu
</span>
<span class="c1">// le nom du fichier
</span><span class="nv">$fichier</span> <span class="o">=</span> <span class="s1">'appel-fonction1.txt'</span><span class="p">;</span>

<span class="c1">// vérification de présence du fichier
</span><span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$fichier</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// le fichier existe
</span>
    <span class="c1">// lecture de son contenu
</span>    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$fichier</span><span class="p">);</span>
    <span class="c1">// affichage de son contenu
</span>    <span class="k">echo</span> <span class="nv">$texte</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// le fichier n'existe pas
</span>    <span class="k">echo</span> <span class="s2">"le fichier '</span><span class="nv">$fichier</span><span class="s2">' n'existe pas</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/appel-fonction2.php">code/appel-fonction2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script créé un fichier et écrit un texte dedans
</span>
<span class="c1">// le nom du nouveau fichier
</span><span class="nv">$fichier</span> <span class="o">=</span> <span class="s1">'appel-fonction1.txt'</span><span class="p">;</span>
<span class="c1">// le texte qui sera écrit dans le fichier
</span><span class="nv">$texte</span> <span class="o">=</span> <span class="s2">"hello world!</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// écriture dans le fichier
</span><span class="nb">file_put_contents</span><span class="p">(</span><span class="nv">$fichier</span><span class="p">,</span> <span class="nv">$texte</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/appel-fonction3.php">code/appel-fonction3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script manipule une chaîne de caractère avec la fonction `substr()`
// la fonction `substr()` permet d'extraire une portion d'une chaîne de caractères
</span>
<span class="nv">$texte</span> <span class="o">=</span> <span class="s1">'abcdefgh'</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'"'</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'"'</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/array1.php">code/array1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// création d'un tableau simple vide
</span><span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="c1">// ajout d'éléments dans le tableau
</span><span class="nv">$tableau</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'foo'</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'bar'</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'baz'</span><span class="p">;</span>

<span class="c1">// lecture des éléments du tableau
</span><span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/array2.php">code/array2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// création d'un tableau simple vide
</span><span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="c1">// ajout d'éléments dans le tableau
</span><span class="nv">$tableau</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'foo'</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[</span><span class="mi">200</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'bar'</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[</span><span class="mi">300</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'baz'</span><span class="p">;</span>

<span class="c1">// lecture des éléments du tableau
</span><span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">200</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">300</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/array3.php">code/array3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// création d'un tableau simple
</span><span class="nv">$fibonacci</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">);</span>

<span class="c1">// lecture des éléments du tableau
</span><span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/array4.php">code/array4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// création d'un tableau associatif (dictionnaire, hash array)
</span><span class="nv">$legumes</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'a'</span> <span class="o">=&gt;</span> <span class="s1">'artichaut'</span><span class="p">,</span>
    <span class="s1">'b'</span> <span class="o">=&gt;</span> <span class="s1">'broccoli'</span><span class="p">,</span>
    <span class="s1">'c'</span> <span class="o">=&gt;</span> <span class="s1">'carotte'</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1">// lecture des éléments du tableau
</span><span class="k">echo</span> <span class="nv">$legumes</span><span class="p">[</span><span class="s1">'a'</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$legumes</span><span class="p">[</span><span class="s1">'b'</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$legumes</span><span class="p">[</span><span class="s1">'c'</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/bool1.php">code/bool1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// pas vrai, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="o">!</span><span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// pas faux, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="o">!</span><span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/bool2.php">code/bool2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse
</span>
<span class="k">echo</span> <span class="s2">"avec parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// vrai et vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et vrai, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse
</span>
<span class="k">echo</span> <span class="s2">"sans parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// vrai et vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/bool3.php">code/bool3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse
</span>
<span class="k">echo</span> <span class="s2">"avec parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// vrai ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="o">||</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou faux, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="o">||</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="o">||</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="o">||</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse
</span>
<span class="k">echo</span> <span class="s2">"sans parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// vrai ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">||</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">||</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/bool4.php">code/bool4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse
</span>
<span class="k">echo</span> <span class="s2">"avec parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// vrai ou exclusif vrai, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="k">xor</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou exclusif faux, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="k">xor</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou exclusif vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="k">xor</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou exclusif faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="k">xor</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse
</span>
<span class="k">echo</span> <span class="s2">"sans parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="k">xor</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="k">xor</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="k">xor</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="k">xor</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/bool5.php">code/bool5.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse
</span>
<span class="k">echo</span> <span class="s2">"avec parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// vrai et vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="k">and</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="k">and</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="k">and</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="k">and</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse
</span>
<span class="k">echo</span> <span class="s2">"sans parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="k">and</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="k">and</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="k">and</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="k">and</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/bool6.php">code/bool6.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse
</span>
<span class="k">echo</span> <span class="s2">"avec parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// vrai ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="k">or</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">true</span> <span class="k">or</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="k">or</span> <span class="kc">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou faux, équivaut à faux
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="kc">false</span> <span class="k">or</span> <span class="kc">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse
</span>
<span class="k">echo</span> <span class="s2">"sans parenthèses</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="k">or</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span> <span class="k">or</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="k">or</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué
</span><span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span> <span class="k">or</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/boolean.php">code/boolean.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// affectation de la valeur `true` (vrai) à la variable `$php_c_est_facile`
</span><span class="nv">$php_facile</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// affectation de la valeur `false` (faux) à la variable `$php_c_est_soporifique`
</span><span class="nv">$php_c_est_soporifique</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/bug.php">code/bug.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la ligne suivante contient un bug
// avec certaines configurations, ce script n'affiche pas d'erreur mais juste une page blanche
</span><span class="nv">$a</span> <span class="o">=</span> <span class="s1">'foo'</span>
<span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/constante1.php">code/constante1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la constante NOMBRE avec la valeur 42
</span><span class="nb">define</span><span class="p">(</span><span class="s1">'NOMBRE'</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>

<span class="c1">// définition de la constante NOMBRE_D_OR avec la valeur 1.6180339887
</span><span class="nb">define</span><span class="p">(</span><span class="s1">'NOMBRE_D_OR'</span><span class="p">,</span> <span class="mf">1.6180339887</span><span class="p">);</span>

<span class="c1">// définition de la constante VERSION avec la valeur '5.6.0'
</span><span class="nb">define</span><span class="p">(</span><span class="s1">'VERSION'</span><span class="p">,</span> <span class="s1">'5.6.0'</span><span class="p">);</span>

<span class="c1">// définition de la constante DEBUG_MODE avec la valeur true
</span><span class="nb">define</span><span class="p">(</span><span class="s1">'DEBUG_MODE'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// note : PHP_EOL est aussi une constante : elle est automatiquement définie par php
</span>
<span class="c1">// affichage de la constante
</span><span class="k">echo</span> <span class="nx">NOMBRE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">NOMBRE_D_OR</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">VERSION</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">DEBUG_MODE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/constante2.php">code/constante2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// à partir de php &gt;= 5.3.0
</span>
<span class="c1">// définition de la constante NOMBRE avec la valeur 42
</span><span class="k">const</span> <span class="no">NOMBRE</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// définition de la constante NOMBRE_D_OR avec la valeur 1.6180339887
</span><span class="k">const</span> <span class="no">NOMBRE_D_OR</span> <span class="o">=</span> <span class="mf">1.6180339887</span><span class="p">;</span>

<span class="c1">// définition de la constante VERSION avec la valeur '5.6.0'
</span><span class="k">const</span> <span class="no">VERSION</span> <span class="o">=</span> <span class="s1">'5.6.0'</span><span class="p">;</span>

<span class="c1">// définition de la constante DEBUG_MODE avec la valeur true
</span><span class="k">const</span> <span class="no">DEBUG_MODE</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// note : PHP_EOL est aussi une constante : elle est automatiquement définie par php
</span>
<span class="c1">// affichage de la constante
</span><span class="k">echo</span> <span class="nx">NOMBRE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">NOMBRE_D_OR</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">VERSION</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">DEBUG_MODE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/constante3.php">code/constante3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// constantes définies par php
</span><span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// constantes magiques définies par php
</span><span class="k">echo</span> <span class="k">__LINE__</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="k">echo</span> <span class="k">__FILE__</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">__DIR__</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/cookie-destroy1.php">code/cookie-destroy1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// suppression de cookies un par un
</span><span class="nb">setcookie</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">setcookie</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">);</span>

<span class="nb">setcookie</span><span class="p">(</span><span class="s1">'baz'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">setcookie</span><span class="p">(</span><span class="s1">'baz'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/cookie-destroy2.php">code/cookie-destroy2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// suppression de tous les cookies
</span><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_COOKIE'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$cookies</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">';'</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_COOKIE'</span><span class="p">]);</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$cookies</span> <span class="k">as</span> <span class="nv">$cookie</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$parts</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">'='</span><span class="p">,</span> <span class="nv">$cookie</span><span class="p">);</span>
        <span class="nv">$name</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="nb">setcookie</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nb">setcookie</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/cookie-get.php">code/cookie-get.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inspection du contenu des cookie
</span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/cookie-set.php">code/cookie-set.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inspection du contenu des cookie
</span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">);</span>

<span class="c1">// la variable `$_COOKIE` est un tableau
// affectation de couples clé / valeur à la variable `$_COOKIE`
</span><span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">'foo'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'bar'</span><span class="p">;</span>
<span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">'baz'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// inspection du contenu des cookie
</span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/datetime.php">code/datetime.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// inclusion de la librairie `lib-datetime.php`
</span><span class="k">require</span><span class="p">(</span><span class="s1">'lib-datetime.php'</span><span class="p">);</span>

<span class="c1">// affectation du fuseau horaire
</span><span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s1">'europe/paris'</span><span class="p">);</span>

<span class="c1">// création d'objet de type DateTime
</span><span class="nv">$date1</span> <span class="o">=</span> <span class="nx">date_create_dmy</span><span class="p">(</span><span class="s1">'31/12/2015'</span><span class="p">);</span>
<span class="nv">$date2</span> <span class="o">=</span> <span class="nx">date_create_dmy</span><span class="p">(</span><span class="s1">'01/11/2014'</span><span class="p">);</span>

<span class="c1">// comparaison de dates
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$date1</span> <span class="o">&lt;</span> <span class="nv">$date2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'date1 est antérieure à date2'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$date1</span> <span class="o">&gt;</span> <span class="nv">$date2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'date1 est ultérieure à date2'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'date1 et date2 sont égales'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affichage de l'interval (durée) entre deux dates
</span><span class="nv">$interval</span> <span class="o">=</span> <span class="nb">date_diff</span><span class="p">(</span><span class="nv">$date1</span><span class="p">,</span> <span class="nv">$date2</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">'la différence entre les deux dates est de '</span> <span class="o">.</span> <span class="nv">$interval</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'%r%a'</span><span class="p">)</span> <span class="o">.</span> <span class="s1">' jours'</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// création d'un objet DateTime à la date du jour puis affichage
// pour les code acceptés par la méthode `format()`, voir http://php.net/manual/en/function.date.php#refsect1-function.date-parameters
</span><span class="nv">$now</span> <span class="o">=</span> <span class="nb">date_create</span><span class="p">();</span>
<span class="k">echo</span> <span class="s1">'nous sommes le '</span> <span class="o">.</span> <span class="nv">$now</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'d/m/Y'</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="k">echo</span> <span class="s1">'il est '</span> <span class="o">.</span> <span class="nv">$now</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'H:i:s'</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/do_while1.php">code/do_while1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable qui servira d'index / compteur
</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// début de la boucle
</span><span class="k">do</span> <span class="p">{</span>
    <span class="c1">// instructions répétées dans la boucle
</span>    <span class="c1">// exemple : affichage du compteur
</span>    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation du compteur
</span>    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">);</span> <span class="o">//</span> <span class="nx">v</span><span class="err">é</span><span class="nx">rification</span> <span class="nx">de</span> <span class="nx">la</span> <span class="nx">condition</span> <span class="nx">pour</span> <span class="nx">continuer</span> <span class="nx">ou</span> <span class="nx">non</span> <span class="nx">la</span> <span class="nx">boucle</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/do_while2.php">code/do_while2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable qui servira d'index / compteur
</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// initialisation d'une variable qui servira de condition pour continuer ou non la boucle
</span><span class="nv">$boucler</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// la boucle sera exécutée au moins une fois
// début de la boucle
</span><span class="k">do</span> <span class="p">{</span>
    <span class="c1">// instructions répétées dans la boucle
</span>    <span class="c1">// exemple : affichage du compteur
</span>    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation du compteur
</span>    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

    <span class="c1">// vérification de la valeur de l'index / compteur
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// si l'index / compteur est à 10, la boucle s'arrête
</span>        <span class="nv">$boucler</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$boucler</span><span class="p">);</span> <span class="o">//</span> <span class="nx">v</span><span class="err">é</span><span class="nx">rification</span> <span class="nx">de</span> <span class="nx">la</span> <span class="nx">condition</span> <span class="nx">pour</span> <span class="nx">continuer</span> <span class="nx">ou</span> <span class="nx">non</span> <span class="nx">la</span> <span class="nx">boucle</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/do_while3.php">code/do_while3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable qui servira d'index / compteur
</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// initialisation d'une variable qui servira de condition pour continuer ou non la boucle
</span><span class="nv">$boucler</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// la boucle sera exécutée au moins une fois
// début de la boucle
</span><span class="k">do</span> <span class="p">{</span>
    <span class="c1">// instructions répétées dans la boucle
</span>    <span class="c1">// exemple : affichage du compteur
</span>    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation du compteur
</span>    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$boucler</span><span class="p">);</span> <span class="o">//</span> <span class="nx">v</span><span class="err">é</span><span class="nx">rification</span> <span class="nx">de</span> <span class="nx">la</span> <span class="nx">condition</span> <span class="nx">pour</span> <span class="nx">continuer</span> <span class="nx">ou</span> <span class="nx">non</span> <span class="nx">la</span> <span class="nx">boucle</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/env.php">code/env.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_SERVER` est un tableau
// elle contient des données sur le serveur, le script en cours d'exécution et le navigateur qui a lancé la requête
// on boucle sur tous les couples clé / valeur de la variable `$_SERVER`
</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$_ENV</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage d'un couple clé / valeur
</span>    <span class="k">echo</span> <span class="nv">$cle</span> <span class="o">.</span> <span class="s1">' = '</span> <span class="o">.</span> <span class="nv">$valeur</span><span class="p">;</span>

    <span class="c1">// affichage d'un saut de ligne html
</span>    <span class="c1">// note : br = break = cassure
</span>    <span class="k">echo</span> <span class="s1">'&lt;br /&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/erreur-500.php">code/erreur-500.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">'HTTP/1.1 500 Internal Server Error'</span><span class="p">);</span>
<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

    <span class="nt">&lt;h1&gt;</span>Oups, problème technique :(<span class="nt">&lt;/h1&gt;</span>

    <span class="nt">&lt;p&gt;</span>Nous sommes désolés, un problème technique est survenu. Nous mettons tout en œuvre pour le régler rapidement. Revenez nous voir ultérieurement.<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/error-reporting1.php">code/error-reporting1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// afficher toutes les erreurs
</span><span class="nb">error_reporting</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// autre méthode pour afficher toutes les erreurs
</span><span class="nb">ini_set</span><span class="p">(</span><span class="s1">'error_reporting'</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// n'affiche aucune erreur
</span><span class="nb">error_reporting</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// autre méthode pour n'afficher aucune erreur
</span><span class="nb">ini_set</span><span class="p">(</span><span class="s1">'error_reporting'</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/error-reporting2.php">code/error-reporting2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script montre comment afficher les erreurs d'un script qui n'affiche qu'une page blanche
</span>
<span class="c1">// afficher toutes les erreurs
// on combine les deux méthode pour être sûr que les erreurs seront affichées quelque soit la configuration du serveur web
</span><span class="nb">error_reporting</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="nb">ini_set</span><span class="p">(</span><span class="s2">"display_errors"</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// inclusion du fichier contenant un bug mais qui affiche juste une page blanche
</span><span class="k">include</span><span class="p">(</span><span class="s2">"bug.php"</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/file1.php">code/file1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `fichier` permettant de pousser (uploader) un fichier vers un serveur
</span><span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser l'attribut `enctype="multipart/form-data"` pour que le fichier puisse être envoyé ?&gt;
</span><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">""</span> <span class="nx">method</span><span class="o">=</span><span class="s2">"post"</span> <span class="nx">enctype</span><span class="o">=</span><span class="s2">"multipart/form-data"</span> <span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">"fichier"</span><span class="o">&gt;</span><span class="nx">fichier</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"fichier"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"file"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// la variable `$_FILES` est un tableau
// avant que l'utilisateur ne valide le formulaire la variable `$_FILES` ne contient aucune donnée
// quand l'utilisateur valide le formulaire, on retrouve les information concernant le fichier uploadé dans la variable `$_FILES`
</span><span class="k">echo</span> <span class="s1">'&lt;pre&gt;'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">'&lt;/pre&gt;'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/file2.php">code/file2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `fichier` permettant de pousser (uploader) un fichier vers un serveur
</span><span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser l'attribut `enctype="multipart/form-data"` pour que le fichier puisse être envoyé ?&gt;
</span><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">""</span> <span class="nx">method</span><span class="o">=</span><span class="s2">"post"</span> <span class="nx">enctype</span><span class="o">=</span><span class="s2">"multipart/form-data"</span> <span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">"fichier"</span><span class="o">&gt;</span><span class="nx">fichier</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"fichier[]"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"file"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"fichier[]"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"file"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// la variable `$_FILES` est un tableau
// avant que l'utilisateur ne valide le formulaire la variable `$_FILES` ne contient aucune donnée
// quand l'utilisateur valide le formulaire, on retrouve les information concernant le fichier uploadé dans la variable `$_FILES`
</span><span class="k">echo</span> <span class="s1">'&lt;pre&gt;'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">'&lt;/pre&gt;'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/float.php">code/float.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// affectation de la valeur 3.14 à la variable `$pi`
</span><span class="nv">$pi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>

<span class="c1">// affectation de la valeur -3.14 à la variable `$moins_pi`
</span><span class="nv">$moins_pi</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.14</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction1.php">code/fonction1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition d'une fonction nommée `direBonjour`
</span><span class="k">function</span> <span class="nf">direBonjour</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// corps de la fonction
</span>
    <span class="c1">// affichage d'un message
</span>    <span class="k">echo</span> <span class="s2">"Bonjour !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` sans aucun paramètre
</span><span class="nx">direBonjour</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction2.php">code/fonction2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction
// la fonction prend une variable nommée `$nom` comme paramètre
</span><span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de l'interpolation
</span>    <span class="k">echo</span> <span class="s2">"Bonjour </span><span class="nv">$nom</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` avec la chaîne de caractères `'Php'` comme paramètre
</span><span class="nx">direBonjour</span><span class="p">(</span><span class="s1">'Php'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction3.php">code/fonction3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction
// la fonction prend deux variables nommées `$prenom` et `$nom` comme paramètres
</span><span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// concaténation
</span>    <span class="nv">$personne</span> <span class="o">=</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
    <span class="c1">// affichage de l'interpolation
</span>    <span class="k">echo</span> <span class="s2">"Bonjour </span><span class="nv">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` avec les chaînes de caractères `'Php'` et `'5.6'` comme paramètres
</span><span class="nx">direBonjour</span><span class="p">(</span><span class="s1">'Php'</span><span class="p">,</span> <span class="s1">'5.6'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction4.php">code/fonction4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction
// la fonction prend deux variables nommées `$prenom` et `$nom` comme paramètres
</span><span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// concaténation puis affichage d'une variable
</span>    <span class="nv">$personne</span> <span class="o">=</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
    <span class="c1">// renvoit du résultat de l'interpolation
</span>    <span class="k">return</span> <span class="s2">"Bonjour </span><span class="nv">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` avec les chaînes de caractères `'Php'` et `'5.6'` comme paramètres
// affichage de la valeur renvoyée par la fonction
</span><span class="k">echo</span> <span class="nx">direBonjour</span><span class="p">(</span><span class="s1">'Php'</span><span class="p">,</span> <span class="s1">'5.6'</span><span class="p">);</span>

<span class="c1">// affectation de la valeur renvoyée par la fonction à la variable `$phrase`
</span><span class="nv">$phrase</span> <span class="o">=</span> <span class="nx">direBonjour</span><span class="p">(</span><span class="s1">'Php'</span><span class="p">,</span> <span class="s1">'5.6'</span><span class="p">);</span>
<span class="c1">// affichage de la variable `$phrase`
</span><span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction5.php">code/fonction5.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction
// la fonction prend une variable nommées `$personnes` obligatoirement de type `array` comme paramètre
</span><span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="k">array</span> <span class="nv">$personnes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// boucle sur chaque élément du tableau
</span>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$personnes</span> <span class="k">as</span> <span class="nv">$personne</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// affichage de l'élément
</span>        <span class="k">echo</span> <span class="s2">"Bonjour </span><span class="nv">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// affectation d'un tableau simple à la variable `$noms`
</span><span class="nv">$noms</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Php'</span><span class="p">,</span> <span class="s1">'Html'</span><span class="p">,</span> <span class="s1">'Css'</span><span class="p">,</span> <span class="s1">'Javascript'</span><span class="p">,</span> <span class="s1">'Sql'</span><span class="p">);</span>
<span class="c1">// appel de la fonction `direBonjour` avec la variable `$noms` (qui contient un tableau) comme paramètre
</span><span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$noms</span><span class="p">);</span>

<span class="c1">// affectation d'une chaîne de caractère à la variable `$nom`
</span><span class="nv">$nom</span> <span class="o">=</span> <span class="s1">'Php'</span><span class="p">;</span>
<span class="c1">// appel de la fonction `direBonjour` avec la variable `$nom` (qui contient une chaîne de caractères) comme paramètre
// cela génère une erreur : 'PHP Catchable fatal error:  Argument 1 passed to direBonjour() must be of the type array, string given'
</span><span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$nom</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction6.php">code/fonction6.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction
// la fonction :
// - prend une variable nommées `$personnes` obligatoirement de type `array` comme paramètre
// - prend une deuxième variable nommée `$familier` dont la valeur par défaut est `false` comme paramètre optionnel
</span><span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="k">array</span> <span class="nv">$personnes</span><span class="p">,</span> <span class="nv">$familier</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// boucle sur chaque élément du tableau
</span>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$personnes</span> <span class="k">as</span> <span class="nv">$personne</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// vérification de la valeur de la variable `$familier`
</span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$familier</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// affichage d'un message
</span>            <span class="k">echo</span> <span class="s2">"Salut </span><span class="nv">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// affichage d'un message
</span>            <span class="k">echo</span> <span class="s2">"Bonjour </span><span class="nv">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// affectation d'un tableau simple à la variable `$noms`
</span><span class="nv">$noms</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Php'</span><span class="p">,</span> <span class="s1">'Html'</span><span class="p">,</span> <span class="s1">'Css'</span><span class="p">,</span> <span class="s1">'Javascript'</span><span class="p">,</span> <span class="s1">'Sql'</span><span class="p">);</span>

<span class="c1">// appel de la fonction `direBonjour` avec la variable `$noms` (qui contient un tableau) comme paramètres
// le deuxième paramètre est optionnel
</span><span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$noms</span><span class="p">);</span>

<span class="c1">// appel de la fonction `direBonjour` avec :
// - la variable `$noms` (qui contient un tableau) comme paramètre
// - la valeur `true` comme deuxième paramètre
</span><span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$noms</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction7.php">code/fonction7.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction
// cette fonction prend deux paramètres
// les paramètres sont passés par valeur
</span><span class="k">function</span> <span class="nf">corrigeNom1</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// mettre la première lettre en majuscule
</span>    <span class="nv">$prenom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">);</span>
    <span class="nv">$nom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$nom</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// définition de la fonction
// cette fonction prend deux paramètres
// les paramètres sont passés par référence
</span><span class="k">function</span> <span class="nf">corrigeNom2</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$prenom</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// mettre la première lettre en majuscule
</span>    <span class="nv">$prenom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">);</span>
    <span class="nv">$nom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$nom</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">'php'</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">'html'</span><span class="p">;</span>

<span class="nx">corrigeNom1</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">);</span>
<span class="c1">// après l'appel de la fonction où les paramètres sont passés par valeur, les variables de `$prenom` et `$nom` ne changent pas
</span><span class="k">echo</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="nx">corrigeNom2</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">);</span>
<span class="c1">// après l'appel de la fonction où les paramètres sont passés par référence, les variables de `$prenom` et `$nom` changent
</span><span class="k">echo</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction8.php">code/fonction8.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction
// toutes les fonctions peuvent prendre un nombre illimité de paramètres
// à l'intérieure de la fonction, l'appel à la fonction `func_get_args()` permet de récupérer dans un tableau tous les paramètres passés à la fonction
</span><span class="k">function</span> <span class="nf">listeLangages</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// boucle sur chacun des paramètres passés à la fonction
</span>    <span class="k">foreach</span> <span class="p">(</span><span class="nb">func_get_args</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$auditeur</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// affichage du paramètre
</span>        <span class="k">echo</span> <span class="nv">$auditeur</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// syntaxe altérnative possible à partir de php 5.6.0
// function listeLangages(...$auditeurs) {
//     foreach ($auditeurs as $auditeur) {
//         echo $auditeur . PHP_EOL;
//     }
// }
</span>
<span class="c1">// appel de la fonction avec cinq paramètres
</span><span class="nx">listeLangages</span><span class="p">(</span><span class="s1">'Php'</span><span class="p">,</span> <span class="s1">'Html'</span><span class="p">,</span> <span class="s1">'Css'</span><span class="p">,</span> <span class="s1">'Javascript'</span><span class="p">,</span> <span class="s1">'Sql'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction-anonyme1.php">code/fonction-anonyme1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition d'une fonction anonyme et affectation à une variable nommée `direBonjour`
</span><span class="nv">$direBonjour</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// corps de la fonction
</span>
    <span class="c1">// affichage d'un message
</span>    <span class="k">echo</span> <span class="s2">"Bonjour !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `direBonjour`
</span><span class="nv">$direBonjour</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction-anonyme2.php">code/fonction-anonyme2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// définition d'une fonction anonyme et affectation à une variable nommée `direBonjour`
</span><span class="nv">$direBonjour</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// corps de la fonction
</span>
    <span class="c1">// affichage d'un message
</span>    <span class="k">echo</span> <span class="s2">"Bonjour !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `direBonjour`
</span><span class="nv">$direBonjour</span><span class="p">();</span>

<span class="c1">// affectation du contenu de la variable `$direBonjour` à la variable `$a`
// maintenant, a contient aussi la fonction anonyme
</span><span class="nv">$a</span> <span class="o">=</span> <span class="nv">$direBonjour</span><span class="p">;</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `$a
</span><span class="nv">$a</span><span class="p">();</span>

<span class="c1">// définition d'une nouvelle fonction anonyme et affectation à la variable `$a`
</span><span class="nv">$a</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Salut !</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `$a
</span><span class="nv">$a</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/fonction-anonyme3.php">code/fonction-anonyme3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$texte</span> <span class="o">=</span> <span class="s2">"PHP: Hypertext Preprocessor, plus connu sous son sigle PHP"</span><span class="p">;</span>
<span class="nv">$debut</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$longueur</span> <span class="o">=</span> <span class="mi">27</span><span class="p">;</span>

<span class="nv">$filtreMajsculeToute</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">$texte</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
<span class="p">};</span>

<span class="nv">$filtreMinsculeToute</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">$texte</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">strtolower</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
<span class="p">};</span>

<span class="nv">$filtreMajsculeMot</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">$texte</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="o">&amp;</span><span class="nv">$debut</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$longueur</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">ucwords</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">function</span> <span class="nf">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtre</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nv">$filtre</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$texte</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMajsculeToute</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMinsculeToute</span><span class="p">);</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="s2">"L'Hypertext Markup Language, généralement abrégé HTML, est le format de données conçu pour représenter les pages web."</span><span class="p">;</span>
<span class="nv">$debut</span> <span class="o">=</span> <span class="mi">66</span><span class="p">;</span>
<span class="nv">$longueur</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMajsculeToute</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMajsculeMot</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/for1.php">code/for1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable nommée `$i` qui servira d'index / compteur
// la boucle for se terminera quand `$i` vaudra 10
// la variable `$i` est incrémentée de 1 à chaque tour
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// à chaque tour on affiche la valeur de `$i`
</span>    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/for2.php">code/for2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau simple de trois éléments
</span><span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'foo'</span><span class="p">,</span>
    <span class="s1">'bar'</span><span class="p">,</span>
    <span class="s1">'baz'</span>
<span class="p">);</span>

<span class="c1">// initialisation d'une variable nommée `$i` qui servira d'index / compteur
// la boucle for se terminera quand `$i` vaudra `count($liste)`, c-à-d quand `$i` sera égal au nombre d'éléments dans la variable `$liste`
// la variable `$i` est incrémentée de 1 à chaque tour
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$liste</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// tour à tour, on affiche chaque élément de la variable `$liste`
</span>    <span class="k">echo</span> <span class="nv">$liste</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/for3.php">code/for3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$tableau` contient plusieurs tableaux simples
// la variable nommée `$tableau` est un tableau à deux dimensions
</span><span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'1'</span><span class="p">,</span> <span class="s1">'php'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'2'</span><span class="p">,</span> <span class="s1">'html'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'3'</span><span class="p">,</span> <span class="s1">'css'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'4'</span><span class="p">,</span> <span class="s1">'javascript'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'5'</span><span class="p">,</span> <span class="s1">'sql'</span><span class="p">),</span>
<span class="p">);</span>

<span class="c1">// initialisation d'une variable nommée `$i` qui servira d'index / compteur
// la boucle for se terminera quand `$i` vaudra `count($tableau)`, c-à-d quand `$i` sera égal au nombre d'éléments dans la variable `$tableau`
// la variable `$i` est incrémentée de 1 à chaque tour
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$tableau</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// tour à tour, on affecte chaque élément de la variable `$tableau` à la variable `$ligne`
</span>    <span class="nv">$ligne</span> <span class="o">=</span> <span class="nv">$tableau</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>

    <span class="c1">// initialisation d'une variable nommée `$j` qui servira d'index / compteur
</span>    <span class="c1">// la boucle for se terminera quand `$j` vaudra `count($ligne)`, c-à-d quand `$j` sera égal au nombre d'éléments dans la variable `$ligne`
</span>    <span class="c1">// la variable `$j` est incrémentée de 1 à chaque tour
</span>    <span class="k">for</span> <span class="p">(</span><span class="nv">$j</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$ligne</span><span class="p">);</span> <span class="nv">$j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// tour à tour, on affiche chaque élément de la variable `$ligne`
</span>        <span class="k">echo</span> <span class="nv">$ligne</span><span class="p">[</span><span class="nv">$j</span><span class="p">];</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/foreach1.php">code/foreach1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau simple de trois éléments
</span><span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'foo'</span><span class="p">,</span>
    <span class="s1">'bar'</span><span class="p">,</span>
    <span class="s1">'baz'</span>
<span class="p">);</span>

<span class="c1">// début de la boucle
// à chaque tour, php affecte la valeur de chaque élément de la variable `$liste` à la variable `$element`
</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$liste</span> <span class="k">as</span> <span class="nv">$element</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable `$element`
</span>    <span class="k">echo</span> <span class="nv">$element</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/foreach2.php">code/foreach2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau associatif de trois éléments
</span><span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'artichaut'</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">'broccoli'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">'carotte'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1">// début de la boucle
// à chaque tour, php affecte :
// - la clé de chaque élément de la variable `$liste` à la variable `$cle`
// - la valeur de chaque élément de la variable `$liste` à la variable `$valeur`
</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$liste</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage des variables `$cle` et `$valeur`
</span>    <span class="k">echo</span> <span class="s2">"</span><span class="nv">$cle</span><span class="s2"> : </span><span class="nv">$valeur</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/foreach3.php">code/foreach3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau simple de trois éléments
</span><span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'foo'</span><span class="p">,</span>
    <span class="s1">'bar'</span><span class="p">,</span>
    <span class="s1">'baz'</span>
<span class="p">);</span>

<span class="c1">// début de la boucle
// à chaque tour, php affecte :
// - la clé de chaque élément de la variable `$liste` à la variable `$cle`
// - la valeur de chaque élément de la variable `$liste` à la variable `$valeur`
</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$liste</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage des variables `$cle` et `$valeur`
</span>    <span class="c1">// on remarque que php avait automatiquement affecté des nombres entiers en commençant par 0 comme clé de chaque élément
</span>    <span class="k">echo</span> <span class="s2">"</span><span class="nv">$cle</span><span class="s2"> : </span><span class="nv">$valeur</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/foreach4.php">code/foreach4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$tableau` contient plusieurs tableaux associatifs
// la variable nommée `$tableau` est un tableau à deux dimensions
</span><span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span> <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="s1">'php'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'2'</span><span class="p">,</span> <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="s1">'html'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'3'</span><span class="p">,</span> <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="s1">'css'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'4'</span><span class="p">,</span> <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="s1">'javascript'</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="s1">'5'</span><span class="p">,</span> <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="s1">'sql'</span><span class="p">),</span>
<span class="p">);</span>

<span class="c1">// début de la boucle
// à chaque tour, php affecte la valeur de chaque élément de la variable `$tableau` à la variable `$ligne`
</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$tableau</span> <span class="k">as</span> <span class="nv">$ligne</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// début de la boucle
</span>    <span class="c1">// à chaque tour, php affecte :
</span>    <span class="c1">// - la clé de chaque élément de la variable `$ligne` à la variable `$cle`
</span>    <span class="c1">// - la valeur de chaque élément de la variable `$ligne` à la variable `$valeur`
</span>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$ligne</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// affichage des variables `$cle` et `$valeur`
</span>        <span class="k">echo</span> <span class="s2">"</span><span class="nv">$cle</span><span class="s2"> : </span><span class="nv">$valeur</span><span class="s2">"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-etape1.php">code/form-etape1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes
</span>
<span class="c1">// démarrage de la session
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'titre'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>
        <span class="c1">// stockage des valeurs du formulaire dans la variable de session
</span>        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>

        <span class="c1">// redirection vers le formulaire suivant
</span>        <span class="nb">header</span><span class="p">(</span><span class="s1">'location: form-etape2.php'</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['titre']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-etape2.php">code/form-etape2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes
</span>
<span class="c1">// démarrage de la session
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'email'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le email"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>
        <span class="c1">// stockage des valeurs du formulaire dans la variable de session
</span>        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>

        <span class="c1">// redirection vers le formulaire suivant
</span>        <span class="nb">header</span><span class="p">(</span><span class="s1">'location: form-etape3.php'</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"email"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['email']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-etape3.php">code/form-etape3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes
</span>
<span class="c1">// démarrage de la session
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;p&gt;</span>vous avez entré :<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="cp">&lt;?php</span>
<span class="c1">// affichage d'une valeur stockée dans la variable de session
// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html
</span><span class="cp">?&gt;</span>
<span class="nt">&lt;input</span> <span class="na">disabled=</span><span class="s">"disabled"</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="cp">&lt;?php</span>
<span class="c1">// affichage d'une valeur stockée dans la variable de session
// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html
</span><span class="cp">?&gt;</span>
<span class="nt">&lt;input</span> <span class="na">disabled=</span><span class="s">"disabled"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-input-checkbox.php">code/form-input-checkbox.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `checkbox` peuvent renvoyer une ou plusieurs valeurs sous la forme d'un tableau
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `input` de type 'checkbox'
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir les aliments"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliments"</span><span class="nt">&gt;</span>aliments<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$aliment</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">checked</span><span class="o">=</span><span class="s2">"checked"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"checkbox"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"checkbox"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-input-file-multi.php">code/form-input-file-multi.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `file` permettent de pousser (uploader) un fichier vers un serveur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// @note les champs `input` de type `file` ne peuvent pas avoir de valeur par défaut
</span>
<span class="c1">// les fichiers envoyés seront enregistrés dans le dossier courant
</span><span class="nv">$upload_dir</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="p">;</span>

<span class="c1">// messages par défaut
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fichier'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// vérification des fichiers envoyés
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'fichier'
</span>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s2">"fichier"</span><span class="p">][</span><span class="s2">"error"</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_OK</span><span class="o">:</span>
            <span class="c1">// il n'y a pas d'erreur
</span>            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_NO_FILE</span><span class="o">:</span>
            <span class="c1">// il y a une erreur
</span>            <span class="c1">// l'utilisateur n'a pas envoyé de fichier
</span>            <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="c1">// affectation d'un message d'erreur
</span>            <span class="nv">$messages</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="nv">$index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de sélectionner un fichier"</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="c1">// il y a une erreur
</span>            <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="c1">// affectation d'un message d'erreur
</span>            <span class="nv">$messages</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="nv">$index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"une erreur est survenue, le fichier '</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]}</span><span class="s1">' n'</span><span class="nx">a</span> <span class="nx">pas</span> <span class="nx">pu</span> <span class="err">ê</span><span class="nx">tre</span> <span class="nx">enregistr</span><span class="err">é</span><span class="s2">";
        }
    }

    // vérification intermédiaire de la validation
    if (</span><span class="nv">$validation</span><span class="s2">) {
        // il n'y a pas d'erreurs

        // on peut stocker les fichiers
        foreach (</span><span class="nv">$_FILES["fichier"]["error"]</span><span class="s2"> as </span><span class="nv">$index</span><span class="s2"> =&gt; </span><span class="nv">$error</span><span class="s2">) {
            if (!move_uploaded_file(</span><span class="nv">$_FILES['fichier']['tmp_name'][$index]</span><span class="s2">, </span><span class="nv">$upload_dir</span><span class="s2"> . '/' . </span><span class="nv">$_FILES['fichier']['name'][$index]</span><span class="s2">)) {
                // il y a une erreur
                // php n'est pas parvenu à stocker le fichier
                </span><span class="nv">$validation</span><span class="s2"> = false;
                // affectation d'un message d'erreur
                </span><span class="nv">$messages['fichier'][$index]</span><span class="s2"> = "</span><span class="nx">une</span> <span class="nx">erreur</span> <span class="nx">est</span> <span class="nx">survenue</span><span class="p">,</span> <span class="nx">le</span> <span class="nx">fichier</span> <span class="s1">'{$_FILES['</span><span class="nx">fichier</span><span class="s1">']['</span><span class="nx">name</span><span class="s1">']}'</span> <span class="nx">n</span><span class="s1">'a pas pu être enregistré";
            }
        }
    }

    // vérification finale de la validation
    if ($validation) {
        // il n'</span><span class="nx">y</span> <span class="nx">a</span> <span class="nx">pas</span> <span class="nx">d</span><span class="s1">'erreurs

        // affectation d'</span><span class="nx">un</span> <span class="nx">message</span> <span class="nx">de</span> <span class="nx">confirmation</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="si">}</span><span class="s2"> else {
        // il y a des erreurs
        // affectation d'un message d'erreur
        </span><span class="nv">$messages['formulaire']</span><span class="s2"> = "</span><span class="nx">merci</span> <span class="nx">de</span> <span class="nx">remplir</span> <span class="nx">le</span> <span class="nx">formulaire</span> <span class="nx">et</span> <span class="nx">de</span> <span class="nx">le</span> <span class="nx">valider</span><span class="s2">";
    }
}

?&gt;&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="s2">" /&gt;
&lt;title&gt;&lt;/title&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;div&gt;&lt;?php echo htmlentities(</span><span class="nv">$messages['formulaire']</span><span class="s2">) ?&gt;&lt;/div&gt;

&lt;?php // il faut utiliser l'attribut `enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">"` pour que le fichier puisse être envoyé ?&gt;
&lt;form action="" method="</span><span class="nx">post</span><span class="s2">" enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">" &gt;
    &lt;label for="</span><span class="nx">fichier</span><span class="s2">"&gt;fichier&lt;/label&gt;&lt;br /&gt;
    &lt;div&gt;&lt;?php echo isset(</span><span class="nv">$messages['fichier'][0]</span><span class="s2">) ? </span><span class="nv">$messages['fichier'][0]</span><span class="s2"> : ''; ?&gt;&lt;/div&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="p">[]</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;
    &lt;div&gt;&lt;?php echo isset(</span><span class="nv">$messages['fichier'][1]</span><span class="s2">) ? </span><span class="nv">$messages['fichier'][1]</span><span class="s2"> : ''; ?&gt;&lt;/div&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="p">[]</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;
    &lt;div&gt;&lt;?php echo isset(</span><span class="nv">$messages['fichier'][2]</span><span class="s2">) ? </span><span class="nv">$messages['fichier'][2]</span><span class="s2"> : ''; ?&gt;&lt;/div&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="p">[]</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;

    &lt;input type="</span><span class="nx">submit</span><span class="s2">" value="</span><span class="nx">envoyer</span><span class="s2">" /&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-input-file.php">code/form-input-file.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `file` permettent de pousser (uploader) un fichier vers un serveur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// @note les champs `input` de type `file` ne peuvent pas avoir de valeur par défaut
</span>
<span class="c1">// les fichiers envoyés seront enregistrés dans le dossier courant
</span><span class="nv">$upload_dir</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="p">;</span>

<span class="c1">// messages par défaut
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fichier'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// vérification des fichiers envoyés
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'fichier'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'error'</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_OK</span><span class="o">:</span>
            <span class="c1">// il n'y a pas d'erreur
</span>            <span class="c1">// on peut stocker le fichier
</span>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">],</span> <span class="nv">$upload_dir</span> <span class="o">.</span> <span class="s1">'/'</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]))</span> <span class="p">{</span>
                <span class="c1">// il y a une erreur
</span>                <span class="c1">// php n'est pas parvenu à stocker le fichier
</span>                <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="c1">// affectation d'un message d'erreur
</span>                <span class="nv">$messages</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"une erreur est survenue, le fichier '</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]}</span><span class="s1">' n'</span><span class="nx">a</span> <span class="nx">pas</span> <span class="nx">pu</span> <span class="err">ê</span><span class="nx">tre</span> <span class="nx">enregistr</span><span class="err">é</span><span class="s2">";
            }
            break;
        case UPLOAD_ERR_NO_FILE:
            // il y a une erreur
            // l'utilisateur n'a pas envoyé de fichier
            </span><span class="nv">$validation</span><span class="s2"> = false;
            // affectation d'un message d'erreur
            </span><span class="nv">$messages['fichier']</span><span class="s2"> = "</span><span class="nx">merci</span> <span class="nx">de</span> <span class="nx">s</span><span class="err">é</span><span class="nx">lectionner</span> <span class="nx">un</span> <span class="nx">fichier</span><span class="s2">";
            break;
        default:
            // il y a une erreur
            </span><span class="nv">$validation</span><span class="s2"> = false;
            // affectation d'un message d'erreur
            </span><span class="nv">$messages['fichier']</span><span class="s2"> = "</span><span class="nx">une</span> <span class="nx">erreur</span> <span class="nx">est</span> <span class="nx">survenue</span><span class="p">,</span> <span class="nx">le</span> <span class="nx">fichier</span> <span class="s1">'{$_FILES['</span><span class="nx">fichier</span><span class="s1">']['</span><span class="nx">name</span><span class="s1">']}'</span> <span class="nx">n</span><span class="s1">'a pas pu être enregistré";
        }
    }

    // vérification de la validation
    if ($validation) {
        // il n'</span><span class="nx">y</span> <span class="nx">a</span> <span class="nx">pas</span> <span class="nx">d</span><span class="s1">'erreurs
        // affectation d'</span><span class="nx">un</span> <span class="nx">message</span> <span class="nx">de</span> <span class="nx">confirmation</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="si">}</span><span class="s2"> else {
        // il y a des erreurs
        // affectation d'un message d'erreur
        </span><span class="nv">$messages['formulaire']</span><span class="s2"> = "</span><span class="nx">merci</span> <span class="nx">de</span> <span class="nx">remplir</span> <span class="nx">le</span> <span class="nx">formulaire</span> <span class="nx">et</span> <span class="nx">de</span> <span class="nx">le</span> <span class="nx">valider</span><span class="s2">";
    }
}

?&gt;&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="s2">" /&gt;
&lt;title&gt;&lt;/title&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;div&gt;&lt;?php echo htmlentities(</span><span class="nv">$messages['formulaire']</span><span class="s2">) ?&gt;&lt;/div&gt;

&lt;?php // il faut utiliser l'attribut `enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">"` pour que le fichier puisse être envoyé ?&gt;
&lt;form action="" method="</span><span class="nx">post</span><span class="s2">" enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">" &gt;
    &lt;div&gt;&lt;?php echo htmlentities(</span><span class="nv">$messages['fichier']</span><span class="s2">) ?&gt;&lt;/div&gt;
    &lt;label for="</span><span class="nx">fichier</span><span class="s2">"&gt;fichier&lt;/label&gt;&lt;br /&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;

    &lt;input type="</span><span class="nx">submit</span><span class="s2">" value="</span><span class="nx">envoyer</span><span class="s2">" /&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-input-hidden.php">code/form-input-hidden.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `hidden` ne renvoient qu'une seule valeur
// les champs `input` de type `hidden` ne s'affichent pas à l'écran mais leurs données sont envoyées
// les champs `input` de type `hidden` se comportent comme des champs `input` de type `text`
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'code_isbn'</span> <span class="o">=&gt;</span> <span class="s1">'ISBN-X-XXX-XXXXX-X'</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"une erreur s'est produite, le code ISBN n'est pas précisé"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"code_isbn"</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-input-password.php">code/form-input-password.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `password` ne renvoient qu'une seule valeur
// les champs `input` de type `password` se comportent comme des champs `input` de type `text`
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'mot_de_passe'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'mot_de_passe'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le mot de passe"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"mot_de_passe"</span><span class="nt">&gt;</span>mot de passe<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"mot_de_passe"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-input-radio.php">code/form-input-radio.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `radio` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `input` de type 'radio'
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser l'aliment"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>aliment<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">checked</span><span class="o">=</span><span class="s2">"checked"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliment"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"radio"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliment"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"radio"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-input-text.php">code/form-input-text.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `text` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-select-multiple-optgroup.php">code/form-select-multiple-optgroup.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` avec l'attribut `multiple="multiple"` peuvent renvoyer une ou plusieurs valeurs sous la forme d'un tableau
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `select` avec des balises `optgroup`
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fruits'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'fraise'</span><span class="p">,</span>
        <span class="s1">'kiwi'</span><span class="p">,</span>
        <span class="s1">'orange'</span>
    <span class="p">),</span>
    <span class="s1">'légumes'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'carotte'</span><span class="p">,</span>
        <span class="s1">'courgette'</span><span class="p">,</span>
        <span class="s1">'pomme de terre'</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser les aliments"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliments"</span><span class="nt">&gt;</span>aliments<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">multiple</span><span class="o">=</span><span class="s2">"multiple"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$optgroup</span> <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;optgroup</span> <span class="na">label=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$optgroup</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>            <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/optgroup&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-select-multiple.php">code/form-select-multiple.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` avec l'attribut `multiple="multiple"` peuvent renvoyer une ou plusieurs valeurs sous la forme d'un tableau
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser les aliments"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliments"</span><span class="nt">&gt;</span>aliments<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">multiple</span><span class="o">=</span><span class="s2">"multiple"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// génération `optgroup` avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$aliment</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-select-optgroup.php">code/form-select-optgroup.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `select` avec des balises `optgroup`
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fruits'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'fraise'</span><span class="p">,</span>
        <span class="s1">'kiwi'</span><span class="p">,</span>
        <span class="s1">'orange'</span>
    <span class="p">),</span>
    <span class="s1">'légumes'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'carotte'</span><span class="p">,</span>
        <span class="s1">'courgette'</span><span class="p">,</span>
        <span class="s1">'pomme de terre'</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser l'aliment"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>aliment<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération `optgroup` avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$optgroup</span> <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;optgroup</span> <span class="na">label=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$optgroup</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>            <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/optgroup&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-select.php">code/form-select.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser l'aliment"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>aliment<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-textarea.php">code/form-textarea.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `textarea` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'commentaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'commentaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir un commentaire"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"commentaire"</span><span class="nt">&gt;</span>commentaire<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"commentaire"</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/textarea&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-validation1.php">code/form-validation1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d'un formulaire envoyé (avec la méthode post) par l'utilisateur
// @warning ce script ne permet pas de faire une validation complète, il montre seulement comment utiliser les fonctions `isset()` et `empty()`
</span>
<span class="c1">// on définit des valeurs par défaut que l'utilisateur verra avant d'avoir envoyé le formulaire
</span><span class="nv">$titre</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>

<span class="c1">// vérifions que l'utilisateur a bien soumis le formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// vérifions que :
</span>    <span class="c1">// - le couple clé / valeur `$_POST['titre']` existe bien avec la fonction `isset()`
</span>    <span class="c1">// - la valeur `$_POST['titre']` n'est pas vide avec la fonction `empty()` et l'opérateur de négation `!`
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// l'utilisateur a bien envoyé une valeur et celle-ci est non vide
</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$titre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>

        <span class="c1">// affectation d'un nouveau message pour l'utilsateur
</span>        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$titre</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-validation2.php">code/form-validation2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d'un formulaire envoyé (avec la méthode post) par l'utilisateur
</span>
<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$titre</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$auteur</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$description</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'titre'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$titre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ 'auteur'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$auteur</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ optionnel 'description'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$description</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// ce champ est optionnel, du coup même s'il n'est pas rempli, on ne déclare pas d'erreur avec `$validation = false;`
</span>
    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>        <span class="c1">// affectation d'un message de confirmation
</span>        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"vous n'avez pas rempli certains champs"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$titre</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">"auteur"</span><span class="o">&gt;</span><span class="nx">auteur</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"auteur"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$auteur</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">"description"</span><span class="o">&gt;</span><span class="nx">description</span> <span class="p">(</span><span class="nx">champ</span> <span class="nx">optionnel</span><span class="p">)</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">textarea</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"description"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$description</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/textarea&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/form-validation3.php">code/form-validation3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d'un formulaire envoyé (avec la méthode post) par l'utilisateur
</span>
<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'auteur'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'auteur'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'titre'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ 'auteur'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir l'auteur"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ optionnel 'description'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// ce champ est optionnel, du coup même s'il n'est pas rempli, on ne déclare pas d'erreur avec `$validation = false;`
</span>
    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>        <span class="c1">// affectation d'un message de confirmation
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['titre']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"auteur"</span><span class="nt">&gt;</span>auteur<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"auteur"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['auteur']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'description'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"description"</span><span class="nt">&gt;</span>description<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">textarea</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"description"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/textarea&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/get1.php">code/get1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `titre` dont les données sont envoyées par la méthode `get`
</span><span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"get"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_GET` est un tableau
// avant que l'utilisateur ne valide le formulaire la variable `$_GET` ne contient aucune donnée
// quand l'utilisateur valide le formulaire, on retrouve les données dans la variable `$_GET`, même si c'est une chaîne de caractères vide
</span><span class="k">echo</span> <span class="s1">'&lt;pre&gt;'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">'&lt;/pre&gt;'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/get2.php">code/get2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `titre` dont les données sont envoyées par la méthode `get`
</span><span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"?foo=bar&amp;amp;baz=42&amp;amp;toto=3.14"</span><span class="nt">&gt;</span>envoyer des données en GET avec un lien<span class="nt">&lt;/a&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_GET` est un tableau
// avant que l'utilisateur ne valide le formulaire la variable `$_GET` ne contient aucune donnée
// quand l'utilisateur valide le formulaire, on retrouve les données dans la variable `$_GET`, même si c'est une chaîne de caractères vide
</span><span class="k">echo</span> <span class="s1">'&lt;pre&gt;'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">'&lt;/pre&gt;'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/hello.php">code/hello.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="s2">"Hello World!</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/if1.php">code/if1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message s'affichera toujours</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message ne s'affichera jamais</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message ne s'affichera jamais</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message s'affichera toujours</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/if2.php">code/if2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$condition</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message s'affichera toujours</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message ne s'affichera jamais</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$condition</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message ne s'affichera jamais</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"ce message s'affichera toujours</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/if3.php">code/if3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// comparaison d'une variable et d'un nombre entier
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$nombre</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"nombre plus grand que 5"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$nombre</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"nombre plus petit que 5"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"nombre égal à 5"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/if4.php">code/if4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de deux variables
</span>
<span class="nv">$places_dispo</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nv">$demandes</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$places_dispo</span> <span class="o">&gt;=</span> <span class="nv">$demandes</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Résa confirmée"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$places_dispo</span> <span class="o">==</span> <span class="nv">$demandes</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Résa confirmée (vous avez de la chance, c'étaient les dernières places)"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Désolé, nous sommes complet"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/include_multi_fatal_error.php">code/include_multi_fatal_error.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// au 2ème tour, cette inclusion génère une erreur : "PHP Fatal error:  Cannot redeclare user_input_get_answer()"
</span>    <span class="k">include</span> <span class="s1">'lib-user-input.php'</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/include_multi.php">code/include_multi.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">include</span> <span class="s1">'hello.php'</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/include_once1.php">code/include_once1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// avec le mot clé `include_once`, php s'assure que le fichier n'est inclus qu'une seule fois
</span>    <span class="k">include_once</span> <span class="s1">'hello.php'</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/include_once2.php">code/include_once2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// avec le mot clé `include_once`, php s'assure que le fichier n'est inclus qu'une seule fois
</span>    <span class="k">include_once</span> <span class="s1">'lib-user-input.php'</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/include.php">code/include.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d'un autre fichier dans le fichier actuel
</span><span class="k">include</span> <span class="s1">'hello.php'</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/include-warning.php">code/include-warning.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d'un fichier qui n'existe pas
// cette inclusion génère un warning : "PHP Warning:  include(foo.php): failed to open stream: No such file or directory"
</span><span class="k">include</span> <span class="s1">'foo.php'</span><span class="p">;</span>

<span class="c1">// le script continue son exécution
</span><span class="k">echo</span> <span class="s2">"ce message s'affiche"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/integer.php">code/integer.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// affectation de la valeur 42 à la variable `$nombre`
</span><span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// affectation de la valeur -42 à la variable `$autre_nombre`
</span><span class="nv">$autre_nombre</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/lib-datetime.php">code/lib-datetime.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="sd">/**
 * date_create_dmy
 *
 * creates a DateTime object form a date string like '31/12/1999'
 *
 * @param string $date a date string of the format 'dd/mm/yyyy'
 * @return DateTime a DateTime object created from the date string
 */</span>
<span class="k">function</span> <span class="nf">date_create_dmy</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$d</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$m</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$y</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">date_create</span><span class="p">(</span><span class="s2">"</span><span class="nv">$y</span><span class="s2">-</span><span class="nv">$m</span><span class="s2">-</span><span class="nv">$d</span><span class="s2">"</span><span class="p">);</span>
<span class="p">}</span>

<span class="sd">/**
 * date_create_mdy
 *
 * creates a DateTime object form a date string like '12/31/1999'
 *
 * @param string $date a date string of the format 'mm/dd/yyyy'
 * @return DateTime a DateTime object created from the date string
 */</span>
<span class="k">function</span> <span class="nf">date_create_mdy</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$d</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$m</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$y</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">date_create</span><span class="p">(</span><span class="s2">"</span><span class="nv">$y</span><span class="s2">-</span><span class="nv">$m</span><span class="s2">-</span><span class="nv">$d</span><span class="s2">"</span><span class="p">);</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/lib-user-input.php">code/lib-user-input.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">user_input_get_answer</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$default_value</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$prompt</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$prompt</span> <span class="o">.</span> <span class="s1">' ['</span> <span class="o">.</span> <span class="nv">$default_value</span> <span class="o">.</span> <span class="s1">']'</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$user_input</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$user_input</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$user_input</span> <span class="o">=</span> <span class="nv">$default_value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$user_input</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">user_input_get_choice</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$choices</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$user_input</span> <span class="o">=</span> <span class="nx">user_input_get_answer</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$default_value</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$user_input</span><span class="p">,</span> <span class="nv">$choices</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$user_input</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">user_input_get_confirmation</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$answers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'o'</span><span class="p">,</span> <span class="s1">'n'</span><span class="p">),</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="s1">'n'</span><span class="p">,</span> <span class="nv">$confirmation</span> <span class="o">=</span> <span class="s1">'o'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">get_user_choice</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$answers</span><span class="p">,</span> <span class="nv">$default_value</span><span class="p">)</span> <span class="o">==</span> <span class="nv">$confirmation</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/lib/http.php">code/miniapp/lib/http.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="sd">/**
 * redirect
 *
 * redirige vers une url
 *
 * @param string $url l'url vers laquelle rediriger
 * @return void
 */</span>
<span class="k">function</span> <span class="nf">http_redirect</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s1">'location: '</span> <span class="o">.</span> <span class="nv">$url</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
    <span class="k">exit</span><span class="p">();</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/lib/password.php">code/miniapp/lib/password.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="sd">/**
 * password_generate_random_string
 *
 * source:
 *  Generating a random password in php - Stack Overflow
 *  http://stackoverflow.com/questions/6101956/generating-a-random-password-in-php#answer-6101969
 *
 * generates a random password
 *
 * @param int $password_length OPTIONAL desired length of the generated password, defaults to 12
 * @return string random password
 */</span>
<span class="k">function</span> <span class="nf">password_generate_random_string</span><span class="p">(</span><span class="nv">$password_length</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$symbols</span> <span class="o">=</span> <span class="s2">"abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"</span><span class="p">;</span>
    <span class="nv">$password</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$symbols_count</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$symbols</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$password_length</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$n</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$symbols_count</span><span class="p">);</span>
        <span class="nv">$password</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$symbols</span><span class="p">[</span><span class="nv">$n</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span><span class="nv">$password</span><span class="p">);</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/lib/security.php">code/miniapp/lib/security.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">security_filter_user</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">,</span> <span class="nv">$url</span> <span class="o">=</span> <span class="s1">'connexion.php'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">])</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nb">http_redirect</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">security_destroy_user</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">unset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">security_set_user</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$key</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">security_user_is_set</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="s1">'user'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]);</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/lib/session.php">code/miniapp/lib/session.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">session_safe_start</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">session_id</span><span class="p">())</span> <span class="p">{</span>
        <span class="nb">session_start</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/connexion.php">code/miniapp/web/connexion.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies
</span><span class="k">require</span><span class="p">(</span><span class="s1">'../lib/http.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/security.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/session.php'</span><span class="p">);</span>

<span class="c1">// démarrage de la session
</span><span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// vérification si l'utilisateur n'est pas déjà connecté
</span><span class="k">if</span> <span class="p">(</span><span class="nx">security_user_is_set</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// redirection de l'utilisateur vers la home page
</span>    <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'home.php'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// connexion à la base de données
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$password</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné d'email"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné de mot de passe"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l'utilisateur a envoyé des données et qu'elles sont valides
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// création de la requête sql
</span>    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">"SELECT * FROM user WHERE email = '%s'"</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql
</span>    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// vérification du résultat de la requête
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// récupération de la première ligne de résultat
</span>        <span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>

        <span class="c1">// vérification de la première ligne de résultat
</span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">password_verify</span><span class="p">(</span><span class="nv">$password</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'password_hash'</span><span class="p">]))</span> <span class="p">{</span>
                <span class="c1">// stockage de l'identité de l'utilisateur dans la variable de session
</span>                <span class="nx">security_set_user</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'id'</span><span class="p">],</span>
                    <span class="s1">'prenom'</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'prenom'</span><span class="p">],</span>
                    <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">],</span>
                    <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span>
                <span class="p">));</span>

                <span class="c1">// redirection de l'utilisateur vers la home page
</span>                <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'home.php'</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// email correct mais mot de passe incorrect
</span>                <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'votre email ou votre mot de passe est inccorect'</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// email incorrect
</span>            <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'votre email ou votre mot de passe est inccorect'</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// @debug
</span>        <span class="c1">// echo "erreur d'exécution de la requête sql : " . mysqli_error($link);
</span>        <span class="c1">// exit();
</span>
        <span class="c1">// redirection vers une page d'erreur
</span>        <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'erreur-500.php'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'&lt;br /&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$email</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"password"</span><span class="nt">&gt;</span>mot de passe<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$password</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"se connecter"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"inscription.php"</span><span class="nt">&gt;</span>inscription<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"mot-de-passe-oublie.php"</span><span class="nt">&gt;</span>mot de passe oublié<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/deconnexion.php">code/miniapp/web/deconnexion.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies
</span><span class="k">require</span><span class="p">(</span><span class="s1">'../lib/http.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/security.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/session.php'</span><span class="p">);</span>

<span class="c1">// démarrage de la session
</span><span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// sécurisation de la page
</span><span class="nx">security_filter_user</span><span class="p">();</span>

<span class="c1">// destruction des données liées à l'utilisateur en cours
</span><span class="nx">security_destroy_user</span><span class="p">();</span>

<span class="c1">// destruction de la session en cours
</span><span class="nb">session_destroy</span><span class="p">();</span>

<span class="c1">// redirection de l'utilisateur vers la page de login
</span><span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'connexion.php'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/erreur-500.php">code/miniapp/web/erreur-500.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">'HTTP/1.1 500 Internal Server Error'</span><span class="p">);</span>
<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

    <span class="nt">&lt;h1&gt;</span>Oups, problème technique :(<span class="nt">&lt;/h1&gt;</span>

    <span class="nt">&lt;p&gt;</span>Nous sommes désolés, un problème technique est survenu. Nous mettons tout en œuvre pour le régler rapidement. Revenez nous voir ultérieurement.<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/home.php">code/miniapp/web/home.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies
</span><span class="k">require</span><span class="p">(</span><span class="s1">'../lib/http.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/security.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/session.php'</span><span class="p">);</span>

<span class="c1">// démarrage de la session
</span><span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// sécurisation de la page
</span><span class="nx">security_filter_user</span><span class="p">();</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;h1&gt;</span>home<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;div&gt;</span>
    Bonjour <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'prenom'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'nom'</span><span class="p">]);</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"profil.php"</span><span class="nt">&gt;</span>profil<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"deconnexion.php"</span><span class="nt">&gt;</span>déconnexion<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/index.php">code/miniapp/web/index.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies
</span><span class="k">require</span><span class="p">(</span><span class="s1">'../lib/http.php'</span><span class="p">);</span>

<span class="c1">// redirection de l'utilisateur vers la page de login
</span><span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'connexion.php'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/inscription.php">code/miniapp/web/inscription.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies
</span><span class="k">require</span><span class="p">(</span><span class="s1">'../lib/http.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/security.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/session.php'</span><span class="p">);</span>

<span class="c1">// démarrage de la session
</span><span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// connexion à la base de données
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$password</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$password_confirmation</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'prenom'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'prenom'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$prenom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'prenom'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné de prénom"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$nom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné de nom"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné d'email"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné de mot de passe"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password_confirmation'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password_confirmation'</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password'</span><span class="p">])</span> <span class="p">{</span>
        <span class="nv">$password_confirmation</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'password_confirmation'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"la confirmation de votre mot de passe ne correspond pas"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l'utilisateur a envoyé des données et qu'elles sont valides
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// vérification si cet email n'est pas déjà enregistré
</span>    <span class="c1">// création de la requête sql
</span>    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">"SELECT * FROM user WHERE email = '%s'"</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql
</span>    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// vérification du résultat de la requête
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// cet email est déjà enregistré, l'utilisateur ne peut pas créer de compte
</span>        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"désolé, cet email est déjà utilisé"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// cet email n'est pas encore enregistré, l'utilisateur peut créer un compte
</span>
        <span class="c1">// paramètres de la requêtes sql
</span>        <span class="nv">$password_hash</span> <span class="o">=</span> <span class="nb">password_hash</span><span class="p">(</span><span class="nv">$password</span><span class="p">,</span> <span class="nx">PASSWORD_BCRYPT</span><span class="p">);</span>

        <span class="c1">// création de la requête sql
</span>        <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
            <span class="s2">"INSERT INTO user
            (prenom, nom, email, password_hash)
            VALUES
            ('%s', '%s', '%s', '%s')"</span><span class="p">,</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$password_hash</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="c1">// exécution de la requête sql
</span>        <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

        <span class="c1">// vérification du résultat de la requête
</span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// stockage de l'identité de l'utilisateur dans la variable de session
</span>            <span class="nx">security_set_user</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="nx">mysqli_insert_id</span><span class="p">(</span><span class="nv">$link</span><span class="p">),</span>
                <span class="s1">'prenom'</span> <span class="o">=&gt;</span> <span class="nv">$prenom</span><span class="p">,</span>
                <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="nv">$nom</span><span class="p">,</span>
                <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="nv">$email</span>
            <span class="p">));</span>

            <span class="c1">// redirection de l'utilisateur vers la home page
</span>            <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'home.php'</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// @debug
</span>            <span class="c1">// echo "erreur d'exécution de la requête sql : " . mysqli_error($link);
</span>            <span class="c1">// exit();
</span>
            <span class="c1">// redirection vers une page d'erreur
</span>            <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'erreur-500.php'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'&lt;br /&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"prenom"</span><span class="nt">&gt;</span>prenom<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"prenom"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"nom"</span><span class="nt">&gt;</span>nom<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"nom"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$email</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"password"</span><span class="nt">&gt;</span>mot de passe<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$password</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"password_confirmation"</span><span class="nt">&gt;</span>confirmation du mot de passe<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"password_confirmation"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$password_confirmation</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"s'inscrire"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"connexion.php"</span><span class="nt">&gt;</span>connexion<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"mot-de-passe-oublie.php"</span><span class="nt">&gt;</span>mot de passe oublié<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/mot-de-passe-oublie.php">code/miniapp/web/mot-de-passe-oublie.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies
</span><span class="k">require</span><span class="p">(</span><span class="s1">'../lib/http.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/password.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/session.php'</span><span class="p">);</span>

<span class="c1">// démarrage de la session
</span><span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// connexion à la base de données
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$password</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné d'email"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l'utilisateur a envoyé des données et qu'elles sont valides
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// création de la requête sql
</span>    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">"SELECT * FROM user WHERE email = '%s'"</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql
</span>    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// on ne traite la demande de création d'un nouveau mot de passe que si l'email existe
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// création d'un nouveau mot de passe
</span>        <span class="nv">$password</span> <span class="o">=</span> <span class="nx">password_generate_random_string</span><span class="p">();</span>

        <span class="c1">// paramètres de la requêtes sql
</span>        <span class="nv">$password_hash</span> <span class="o">=</span> <span class="nb">password_hash</span><span class="p">(</span><span class="nv">$password</span><span class="p">,</span> <span class="nx">PASSWORD_BCRYPT</span><span class="p">);</span>

        <span class="c1">// création de la requête sql
</span>        <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
            <span class="s2">"UPDATE user
            SET password_hash = '%s'
            WHERE email = '%s'"</span><span class="p">,</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$password_hash</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="c1">// exécution de la requête sql
</span>        <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

        <span class="c1">// vérification du résultat de la requête
</span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$to</span> <span class="o">=</span> <span class="nv">$email</span><span class="p">;</span>
            <span class="nv">$subject</span> <span class="o">=</span> <span class="s1">'Nouveau mot de passe'</span><span class="p">;</span>
            <span class="nv">$text</span> <span class="o">=</span> <span class="s1">'votre nouveau mot de passe : '</span> <span class="o">.</span> <span class="nv">$password</span><span class="p">;</span>
            <span class="nv">$text</span> <span class="o">=</span> <span class="nb">wordwrap</span><span class="p">(</span><span class="nv">$text</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="s2">"</span><span class="se">\r\n</span><span class="s2">"</span><span class="p">);</span>

            <span class="c1">// @debug
</span>            <span class="c1">// echo $text . '&lt;br /&gt;';
</span>            <span class="c1">// exit();
</span>
            <span class="c1">// envoi du mail
</span>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">mail</span><span class="p">(</span><span class="nv">$to</span><span class="p">,</span> <span class="nv">$subject</span><span class="p">,</span> <span class="nv">$text</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">// redirection vers une page d'erreur si le mail n'a pas pu être envoyé
</span>                <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'erreur-500.php'</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// @debug
</span>            <span class="c1">// echo 'erreur d\'exécution de la requête sql : ' . mysqli_error($link);
</span>            <span class="c1">// exit();
</span>
            <span class="c1">// redirection vers une page d'erreur
</span>            <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'erreur-500.php'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">'cet email est introuvable'</span><span class="p">;</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'&lt;br /&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$email</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"obtenir un nouveau mot de passe"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"connexion.php"</span><span class="nt">&gt;</span>connexion<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"inscription.php"</span><span class="nt">&gt;</span>inscription<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/mysqli-connect.php">code/miniapp/web/mysqli-connect.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// @warning changez les codes d'accès pour les adapter à votre configuration
</span>
<span class="c1">// connexion au serveur mysql
</span><span class="nv">$link</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s1">'server'</span><span class="p">,</span> <span class="s1">'login'</span><span class="p">,</span> <span class="s1">'password'</span><span class="p">,</span> <span class="s1">'database'</span><span class="p">);</span>

<span class="c1">// vérification de la connexion
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$link</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="c1">// echo 'erreur de connexion à la base de données mysql : ' . mysqli_connect_error();
</span>    <span class="c1">// exit();
</span>
    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="nb">header</span><span class="p">(</span><span class="s1">'location: erreur-500.php'</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
    <span class="k">exit</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">mysqli_set_charset</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="s1">'utf8'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/miniapp/web/profil.php">code/miniapp/web/profil.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des libraries
</span><span class="k">require</span><span class="p">(</span><span class="s1">'../lib/http.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/security.php'</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">'../lib/session.php'</span><span class="p">);</span>

<span class="c1">// démarrage de la session
</span><span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// sécurisation de la page
</span><span class="nx">security_filter_user</span><span class="p">();</span>

<span class="c1">// connexion à la base de données
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'prenom'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'prenom'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$prenom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'prenom'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné de prénom"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$nom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné de nom"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"vous n'avez pas renseigné d'email"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l'utilisateur a envoyé des données et qu'elles sont valides
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// vérification si cet email n'est pas déjà enregistré
</span>    <span class="c1">// création de la requête sql
</span>    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">"UPDATE user
        SET prenom = '%s', nom = '%s', email = '%s'
        WHERE id = %d"</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">),</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'id'</span><span class="p">])</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql
</span>    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// vérification du résultat de la requête
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// stockage de l'identité de l'utilisateur dans la variable de session
</span>        <span class="nx">security_set_user</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'id'</span><span class="p">],</span>
            <span class="s1">'prenom'</span> <span class="o">=&gt;</span> <span class="nv">$prenom</span><span class="p">,</span>
            <span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="nv">$nom</span><span class="p">,</span>
            <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="nv">$email</span>
        <span class="p">));</span>

        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">"votre profil a été mis à jour"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// @debug
</span>        <span class="c1">// echo "erreur d'exécution de la requête sql : " . mysqli_error($link);
</span>        <span class="c1">// exit();
</span>
        <span class="c1">// redirection vers une page d'erreur
</span>        <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">'erreur-500.php'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;h1&gt;</span>profil<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'&lt;br /&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"id"</span> <span class="nt">&gt;</span>id<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">disabled=</span><span class="s">"disabled"</span> <span class="na">name=</span><span class="s">"id"</span>  <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'id'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"nom"</span> <span class="nt">&gt;</span>nom<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"nom"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'nom'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"prenom"</span> <span class="nt">&gt;</span>prenom<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"prenom"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'prenom'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span> <span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'user'</span><span class="p">][</span><span class="s1">'email'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"mettre à jour"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"home.php"</span><span class="nt">&gt;</span>home<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"deconnexion.php"</span><span class="nt">&gt;</span>déconnexion<span class="nt">&lt;/a&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/mysqli-connect.php">code/mysqli-connect.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// @warning changez les codes d'accès pour les adapter à votre configuration
</span>
<span class="c1">// connexion au serveur mysql
</span><span class="nv">$link</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s1">'server'</span><span class="p">,</span> <span class="s1">'login'</span><span class="p">,</span> <span class="s1">'password'</span><span class="p">,</span> <span class="s1">'database'</span><span class="p">);</span>

<span class="c1">// vérification de la connexion
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$link</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s1">'erreur de connexion à la base de données mysql : '</span> <span class="o">.</span> <span class="nx">mysqli_connect_error</span><span class="p">();</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="nx">mysqli_set_charset</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="s1">'utf8'</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/object1.php">code/object1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// instantiation d'un objet de la classe stdClass
</span><span class="nv">$un_object</span> <span class="o">=</span> <span class="k">new</span> <span class="k">stdClass</span><span class="p">();</span>

<span class="c1">// affectation de la valeur 42 au membre / champ nommé `foo` de la variable `$un_object`
</span><span class="nv">$un_object</span><span class="o">-&gt;</span><span class="na">foo</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/object2.php">code/object2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// instantiation d'un objet de la classe DateTime
</span><span class="nv">$date</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DateTime</span><span class="p">();</span>

<span class="c1">// affichage du résultat l'appel de la méthode `format()` de la variable `$date` avec une chaîne de caractères comme paramètre
</span><span class="k">echo</span> <span class="nv">$date</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'Y-m-d H:i:s'</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/operateurs-affectation.php">code/operateurs-affectation.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// affectation d'un nombre entier à la variable `$nombre`
</span><span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// affectation d'un nombre à virgule flottante à la variable `$pi`
</span><span class="nv">$pi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>

<span class="c1">// affectation d'une chaîne de caractères à la variable `$texte`
</span><span class="nv">$texte</span> <span class="o">=</span> <span class="s1">'un peu texte'</span><span class="p">;</span>

<span class="c1">// affectation d'un booléen à la variable `$facile`
</span><span class="nv">$facile</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/operateurs-arithmetique.php">code/operateurs-arithmetique.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// l'opérateur modulo
// cet opérateur calcul le reste de la division
</span><span class="k">echo</span> <span class="mi">5</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// opérateur `**` (puissance) disponible depuis php &gt;= 5.6.0
// pour les versions de php &lt; 5.6.0, utiliser la fonction `pow()`
</span><span class="k">echo</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/operateurs-concatenation.php">code/operateurs-concatenation.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// exemples de concaténation
// on peut utiliser indifférement les simples quotes `'` et les doubles quotes `"`
</span>
<span class="nv">$morceau1</span> <span class="o">=</span> <span class="s2">"une démonstration"</span><span class="p">;</span>
<span class="nv">$morceau2</span> <span class="o">=</span> <span class="s1">'de concaténation'</span><span class="p">;</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="nv">$morceau1</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$morceau2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$texte</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="nv">$morceau1</span> <span class="o">.</span> <span class="s2">" "</span> <span class="o">.</span> <span class="nv">$morceau2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$texte</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/operateurs-decrementation1.php">code/operateurs-decrementation1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// décrémentation
</span><span class="nv">$i</span><span class="o">--</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/operateurs-decrementation2.php">code/operateurs-decrementation2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// décrémentation puis affichage
</span><span class="k">echo</span> <span class="o">--</span><span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affichage puis décrémentation
</span><span class="k">echo</span> <span class="nv">$i</span><span class="o">--</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/operateurs-incrementation1.php">code/operateurs-incrementation1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// incrémentation
</span><span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/operateurs-incrementation2.php">code/operateurs-incrementation2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// incrémentation puis affichage
</span><span class="k">echo</span> <span class="o">++</span><span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affichage puis incrémentation
</span><span class="k">echo</span> <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/paybox.php">code/paybox.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// code adapté depuis la source:
//  Exemple d'implémentation - Paybox
//  http://www1.paybox.com/espace-integrateur-documentation/les-solutions-paybox-direct-et-paybox-direct-plus/exemple-dimplementation/
</span><span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;title&gt;</span>Test Paybox direct<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>Test Paybox direct<span class="nt">&lt;/h1&gt;</span>
<span class="cp">&lt;?php</span>

<span class="nb">session_start</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'NUMQUESTION'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="c1">// NUMQUESTION doit être compris entre 1 et 2147483647
</span>    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'NUMQUESTION'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'1000000000'</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'NUMQUESTION'</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// initialisation de la session https
</span><span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="s1">'https://preprod-ppps.paybox.com/PPPS.php'</span><span class="p">);</span>

<span class="c1">// Précise que la réponse est souhaitée
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Présise que le session est nouvelle
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_COOKIESESSION</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nv">$postfields</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'VERSION'</span>       <span class="o">=&gt;</span> <span class="s1">'00104'</span><span class="p">,</span>
    <span class="s1">'TYPE'</span>          <span class="o">=&gt;</span> <span class="s1">'00001'</span><span class="p">,</span>
    <span class="s1">'SITE'</span>          <span class="o">=&gt;</span> <span class="s1">'1999888'</span><span class="p">,</span>
    <span class="s1">'RANG'</span>          <span class="o">=&gt;</span> <span class="s1">'32'</span><span class="p">,</span>
    <span class="s1">'IDENTIFIANT'</span>   <span class="o">=&gt;</span> <span class="s1">'107904482'</span><span class="p">,</span>
    <span class="s1">'CLE'</span>           <span class="o">=&gt;</span> <span class="s1">'1999888I'</span><span class="p">,</span>

    <span class="s1">'NUMQUESTION'</span>   <span class="o">=&gt;</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'NUMQUESTION'</span><span class="p">],</span>
    <span class="s1">'MONTANT'</span>       <span class="o">=&gt;</span> <span class="s1">'1000'</span><span class="p">,</span>
    <span class="s1">'DEVISE'</span>        <span class="o">=&gt;</span> <span class="s1">'978'</span><span class="p">,</span>
    <span class="s1">'REFERENCE'</span>     <span class="o">=&gt;</span> <span class="s1">'Hello World'</span><span class="p">,</span>

    <span class="s1">'PORTEUR'</span>       <span class="o">=&gt;</span> <span class="s1">'1111222233334444'</span><span class="p">,</span>
    <span class="s1">'DATEVAL'</span>       <span class="o">=&gt;</span> <span class="s1">'1215'</span><span class="p">,</span>
    <span class="s1">'CVV'</span>           <span class="o">=&gt;</span> <span class="s1">'123'</span><span class="p">,</span>

    <span class="s1">'DATEQ'</span>         <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'dmY'</span><span class="p">),</span>

    <span class="c1">// 'ERRORCODETEST' =&gt; '14', // Numéro de porteur invalide
</span>    <span class="c1">// 'ERRORCODETEST' =&gt; '17', // Annulation client
</span>    <span class="c1">// 'ERRORCODETEST' =&gt; '51', // Provision insuffisante ou crédit dépassé
</span>    <span class="c1">// 'ERRORCODETEST' =&gt; '54', // Date de validité de la carte dépassée
</span><span class="p">);</span>

<span class="c1">// Crée la chaine url encodée selon la RFC1738 à partir du tableau de paramètres séparés par le caractère &amp;
</span><span class="nv">$trame</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$postfields</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'&amp;'</span><span class="p">);</span>

<span class="c1">// Présise le type de requête HTTP : POST
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// Présise le Content-Type
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span><span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Content-Type: application/x-www-form-urlencoded'</span><span class="p">));</span>

<span class="c1">// Ajoute les paramètres
</span><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$trame</span><span class="p">);</span>

<span class="c1">// Envoi de la requête et obtention de la réponse
</span><span class="nv">$raw_response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nb">parse_str</span><span class="p">(</span><span class="nv">$raw_response</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"Réponse Paybox direct pour la demande 'autorize' "</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$raw_response</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="p">[</span><span class="s1">'CODEREPONSE'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'00000'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Demande traitée avec succès'</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Échec de la demande'</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span>

<span class="c1">// fermeture de la session
</span><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>

<span class="cp">?&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/phpinfo.php">code/phpinfo.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="nb">phpinfo</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/portee1.php">code/portee1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale
// une variable est toujours visible par du code se trouvant au même niveau
</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="s1">'toto'</span><span class="p">;</span>

<span class="c1">// affiche "toto"
</span><span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/portee2.php">code/portee2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale
// une variable déclarée dans la portée globale n'est pas visible par du code se trouvant dans une fonction
</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="s1">'toto'</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche l'erreur "PHP Notice:  Undefined variable: a"
</span><span class="nx">test</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/portee3.php">code/portee3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans une fonction
// une variable est toujours visible par du code se trouvant au même niveau
</span>
<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$a</span> <span class="o">=</span> <span class="s1">'toto'</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche "toto"
</span><span class="nx">test</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/portee4.php">code/portee4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans une fonction
// une variable déclarée dans une fonction n'est pas visible par du code se trouvant dans la portée globale
</span>
<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$a</span> <span class="o">=</span> <span class="s1">'toto'</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">test</span><span class="p">();</span>

<span class="c1">// affiche l'erreur "PHP Notice:  Undefined variable: a"
</span><span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/portee5.php">code/portee5.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale
// en utilisant le mot clé `global`, une variable déclarée dans la portée globale devient visible par du code se trouvant dans une fonction
</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="s1">'toto'</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche "toto"
</span><span class="nx">test</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/portee6.php">code/portee6.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale
// en utilisant le variable `$GLOBALS`, une variable déclarée dans la portée globale devient visible par du code se trouvant dans une fonction
</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="s1">'toto'</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">'a'</span><span class="p">];</span>
    <span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche "toto"
</span><span class="nx">test</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/portee7.php">code/portee7.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans une fonction
// en utilisant le mot clé `global`, une variable déclarée dans une fonction devient visible par du code se trouvant dans la portée globale
</span>
<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="nv">$a</span> <span class="o">=</span> <span class="s1">'toto'</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">test</span><span class="p">();</span>

<span class="c1">// affiche "toto"
</span><span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/post.php">code/post.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `titre` dont les données sont envoyées par la méthode `get`
</span><span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_POST` est un tableau
// avant que l'utilisateur ne valide le formulaire la variable `$_POST` ne contient aucune donnée
// quand l'utilisateur valide le formulaire, on retrouve les données dans la variable `$_POST`, même si c'est une chaîne de caractères vide
</span><span class="k">echo</span> <span class="s1">'&lt;pre&gt;'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">'&lt;/pre&gt;'</span><span class="p">;</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/require-fatal-error.php">code/require-fatal-error.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d'un fichier qui n'existe pas
// cette inclusion génère une erreur : "PHP Warning:  require(foo.php): failed to open stream: No such file or directory"
</span><span class="k">require</span> <span class="s1">'foo.php'</span><span class="p">;</span>

<span class="c1">// le script s'est arrêté
</span><span class="k">echo</span> <span class="s2">"ce message ne s'affiche pas"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/require_once.php">code/require_once.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier
</span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// avec le mot clé `require_once`, php s'assure que le fichier n'est inclus qu'une seule fois
</span>    <span class="k">require_once</span> <span class="s1">'lib-user-input.php'</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/resource.php">code/resource.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ouverture d'un fichier
</span><span class="nv">$handle</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">'hello.php'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">);</span>

<span class="c1">// récupération du contenu du fichier avec la fonction `fgets()`
// boucle continue tant qu'il y a du contenu dans le fichier
</span><span class="k">while</span> <span class="p">((</span><span class="nv">$buffer</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$handle</span><span class="p">))</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage d'un contenu du fichier
</span>    <span class="k">echo</span> <span class="nv">$buffer</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// fermeture du fichier
</span><span class="nb">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/server.php">code/server.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_SERVER` est un tableau
// elle contient des données sur le serveur, le script en cours d'exécution et le navigateur qui a lancé la requête
// on boucle sur tous les couples clé / valeur de la variable `$_SERVER`
</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$_SERVER</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage d'un couple clé / valeur
</span>    <span class="k">echo</span> <span class="nv">$cle</span> <span class="o">.</span> <span class="s1">' = '</span> <span class="o">.</span> <span class="nv">$valeur</span><span class="p">;</span>

    <span class="c1">// affichage d'un saut de ligne html
</span>    <span class="c1">// note : br = break = cassure
</span>    <span class="k">echo</span> <span class="s1">'&lt;br /&gt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/session-destroy.php">code/session-destroy.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// démarrage ou récupération d'une session en cours pour le navigateur qui a fait la requête
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// destruction de tout le contenu de la variable de session
</span><span class="nb">session_destroy</span><span class="p">();</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/session-get.php">code/session-get.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// démarrage ou récupération d'une session en cours pour le navigateur qui a fait la requête
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// inspection du contenu de la variable de session
</span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/session-set.php">code/session-set.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// démarrage ou récupération d'une session en cours pour le navigateur qui a fait la requête
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// inspection du contenu de la variable de session
</span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span>

<span class="c1">// la variable `$_SESSION` est un tableau
// affectation de couples clé / valeur à la variable `$_SESSION`
</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'foo'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'bar'</span><span class="p">;</span>
<span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'baz'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// inspection du contenu de la variable de session
</span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/sql-insert.php">code/sql-insert.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql
</span><span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">'Foo'</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">'Bar'</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">'foo.bar@baz.com'</span><span class="p">;</span>

<span class="c1">// création d'une requête sql
</span><span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"
INSERT INTO user
(prenom, nom, email)
VALUES
('"</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"', '"</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"', '"</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"')
"</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// récupération de la clé primaire de la dernière ligne insérée
</span>    <span class="nv">$id</span> <span class="o">=</span> <span class="nx">mysqli_insert_id</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>

    <span class="c1">// affichage d'un message de confirmation
</span>    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"utilisateur inséré dans la base de données avec l'id </span><span class="nv">$id</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s2">"erreur d'exécution de la requête sql : "</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"la requête sql : "</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/sql-insert-sprintf.php">code/sql-insert-sprintf.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql
</span><span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">'Foo'</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">'Bar'</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">'foo.bar@baz.com'</span><span class="p">;</span>

<span class="c1">// création d'une requête sql
</span><span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
    <span class="s2">"INSERT INTO user
    (prenom, nom, email)
    VALUES
    ('%s', '%s', '%s')"</span><span class="p">,</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// exécution de la requête sql
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// récupération de la clé primaire de la dernière ligne insérée
</span>    <span class="nv">$id</span> <span class="o">=</span> <span class="nx">mysqli_insert_id</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>

    <span class="c1">// affichage d'un message de confirmation
</span>    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"utilisateur inséré dans la base de données avec l'id </span><span class="nv">$id</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s2">"erreur d'exécution de la requête sql : "</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"la requête sql : "</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/sql-select.php">code/sql-select.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="c1">// création d'une requête sql
</span><span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"
SELECT *
FROM user
"</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s2">"erreur d'exécution de la requête sql : "</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"la requête sql : "</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>nombre de résultats : <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;th&gt;</span>
        <span class="nt">&lt;td&gt;</span>id<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td&gt;</span>email<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/th&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span><span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span><span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endwhile</span><span class="p">;</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/table&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>pas de résultat<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/sql-select-single.php">code/sql-select-single.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql
</span><span class="nv">$email</span> <span class="o">=</span> <span class="s1">'foo.bar@baz.com'</span><span class="p">;</span>

<span class="c1">// création d'une requête sql
</span><span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"
SELECT *
FROM user
WHERE email = '"</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"'
"</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s2">"erreur d'exécution de la requête sql : "</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"la requête sql : "</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>nombre de résultats : <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;th&gt;</span>
        <span class="nt">&lt;td&gt;</span>id<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td&gt;</span>email<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/th&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span><span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span><span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endwhile</span><span class="p">;</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/table&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>pas de résultat<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/sql-select-single-sprintf.php">code/sql-select-single-sprintf.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql
</span><span class="nv">$email</span> <span class="o">=</span> <span class="s1">'foo.bar@baz.com'</span><span class="p">;</span>

<span class="c1">// création d'une requête sql
</span><span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
    <span class="s2">"SELECT *
    FROM user
    WHERE email = '%s'"</span><span class="p">,</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// exécution de la requête sql
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s2">"erreur d'exécution de la requête sql : "</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"la requête sql : "</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>nombre de résultats : <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;th&gt;</span>
        <span class="nt">&lt;td&gt;</span>id<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td&gt;</span>email<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/th&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
        <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'id'</span><span class="p">])</span><span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;td&gt;</span><span class="cp">&lt;?=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span><span class="cp">?&gt;</span><span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endwhile</span><span class="p">;</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;/table&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="nt">&lt;p&gt;</span>pas de résultat<span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/sql-update.php">code/sql-update.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql
</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">'lorem'</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">'ipsum'</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">'lorem.ipsum@dolores.com'</span><span class="p">;</span>

<span class="c1">// création d'une requête sql
</span><span class="nv">$sql</span> <span class="o">=</span> <span class="s2">"
UPDATE user
SET
    prenom = '"</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"',
    nom = '"</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"',
    email = '"</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"'
WHERE id = "</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span> <span class="o">.</span> <span class="s2">"
"</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"utilisateur mis à jour dans la base de données"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s2">"erreur d'exécution de la requête sql : "</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"la requête sql : "</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/sql-update-sprintf.php">code/sql-update-sprintf.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd
</span><span class="k">require</span><span class="p">(</span><span class="s1">'mysqli-connect.php'</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql
</span><span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">'lorem'</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">'ipsum'</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">'lorem.ipsum@dolores.com'</span><span class="p">;</span>

<span class="c1">// création d'une requête sql
</span><span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
    <span class="s2">"UPDATE user
    SET prenom = '%s', nom = '%s', email = '%s'
    WHERE id = '%d'"</span><span class="p">,</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// exécution de la requête sql
</span><span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"utilisateur mis à jour dans la base de données"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l'erreur de connexion
</span>    <span class="k">echo</span> <span class="s2">"erreur d'exécution de la requête sql : "</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"la requête sql : "</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l'utilisateur vers une page d'erreur
</span>    <span class="c1">// header('location: erreur-500.php', true, 302);
</span>    <span class="c1">// exit();
</span><span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/string1.php">code/string1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// affectation
</span><span class="nv">$nom</span> <span class="o">=</span> <span class="s2">"Php"</span><span class="p">;</span>
<span class="nv">$salutation</span> <span class="o">=</span> <span class="s2">"Bonjour"</span><span class="p">;</span>

<span class="c1">// concaténation et affichage
</span><span class="k">echo</span> <span class="nv">$salutation</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// concaténation et affectation
</span><span class="nv">$phrase</span> <span class="o">=</span> <span class="nv">$salutation</span> <span class="o">.</span> <span class="s1">' '</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>

<span class="c1">// affichage
</span><span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affichage
</span><span class="k">echo</span> <span class="s2">"Bonjour </span><span class="nv">$nom</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affectation
</span><span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">"Salut </span><span class="nv">$nom</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// affichage
</span><span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affectation sans interpolation
</span><span class="nv">$phrase</span> <span class="o">=</span> <span class="s1">'Salut $nom'</span><span class="p">;</span>

<span class="c1">// affichage
</span><span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/string2.php">code/string2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// affectation
</span><span class="nv">$nom</span> <span class="o">=</span> <span class="s2">"Php"</span><span class="p">;</span>

<span class="c1">// affichage
// utilisation du signe d'échappement `\` pour afficher des guillemets simples
</span><span class="k">echo</span> <span class="s1">'Bonjour \'Php\''</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affichage
// utilisation du signe d'échappement `\` pour afficher des doubles guillemets
</span><span class="k">echo</span> <span class="s2">"Bonjour </span><span class="se">\"</span><span class="s2">Php</span><span class="se">\"</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affichage
// utilisation du signe d'échappement `\` pour afficher des guillemets simples
</span><span class="k">echo</span> <span class="s1">'Bonjour \'$nom\''</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affichage
// utilisation du signe d'échappement `\` pour afficher des doubles guillemets
</span><span class="k">echo</span> <span class="s2">"Bonjour </span><span class="se">\"</span><span class="nv">$nom</span><span class="se">\"</span><span class="s2">"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/string3.php">code/string3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// affectation
</span><span class="nv">$nom</span> <span class="o">=</span> <span class="s2">"Php"</span><span class="p">;</span>

<span class="c1">// interpolation et affichage
// utilisation du signe d'échappement `\` pour afficher un retour à la ligne
</span><span class="k">echo</span> <span class="s2">"Bonjour Php</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>

<span class="c1">// affichage sans interpolation
// le retour à la ligne n'est pas affiché, la chaîne de caractère est littéralement affichée
</span><span class="k">echo</span> <span class="s1">'Bonjour Php\n'</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// attention : cette instruction n'affichera pas `Bonjour Php5.6`
// elle affichera `Bonjour .6` en générant une erreur `PHP Notice:  Undefined variable: nom5`
</span><span class="k">echo</span> <span class="s2">"Bonjour </span><span class="nv">$nom5</span><span class="s2">.6"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// pour afficher `Bonjour Php5.6` il faut utiliser les signes `{` (accolade ouvrante) et `}` (accolade fermante) pour indiquer à php les limites du nom de la variable
</span><span class="k">echo</span> <span class="s2">"Bonjour </span><span class="si">{</span><span class="nv">$nom</span><span class="si">}</span><span class="s2">5.6"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// mais on peut aussi utiliser la concaténation
</span><span class="k">echo</span> <span class="s2">"Bonjour </span><span class="nv">$nom</span><span class="s2">"</span> <span class="o">.</span> <span class="s2">"5.6"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/switch1.php">code/switch1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// comparaison d'une variable et d'une suite de nombres entiers
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="nv">$nombre</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"le nombre est égale à 0</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"le nombre est égale à 1</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"le nombre est égale à 2</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">default</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"le nombre est différent de 0, 1 ou 2</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/switch2.php">code/switch2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de la valeur booléenne `true` à une suite de comparaisons
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="nv">$nombre</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"le nombre est plus grand que 5</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$nombre</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"le nombre est plus petit que 5</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">default</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"le nombre est égal à 5</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/switch3.php">code/switch3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de la valeur booléenne `true` à une suite de comparaisons
</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"a n'est pas vrai mais b est vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"a est vrai mais b n'est pas vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"a et b sont vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"ni a ni b ne sont vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/switch4.php">code/switch4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de la valeur booléenne `true` à une suite de comparaisons
</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"a n'est pas vrai mais b est vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"ou a est vrai mais b n'est pas vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">"a et b sont vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">"ou ni a ni b ne sont vrai</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/syntaxe1.php">code/syntaxe1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// ceci est une ligne de commentaire
</span>
<span class="cm">/* ceci est un bloc de commentaires */</span>

<span class="cm">/*
ceci est un autre bloc de commentaires
ceci est un autre bloc de commentaires
ceci est un autre bloc de commentaires
*/</span>

<span class="c1">// echo 'foo';
</span>
<span class="cm">/*
echo 'bar';
echo 'baz';
*/</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/syntaxe2.php">code/syntaxe2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// style camelCase
</span><span class="nv">$ceChevalCourtVite</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// style snake_case
</span><span class="nv">$ce_cheval_court_vite</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// style camelCase
</span><span class="nv">$ilNeFaitPasBeau</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// style snake_case
</span><span class="nv">$il_ne_fait_pas_beau</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/transtypage-booleen.php">code/transtypage-booleen.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// transtypage en booléen
</span>
<span class="c1">// attention : `boolval` n'est disponible qu'à partir de PHP 5.5.0
</span>
<span class="c1">// première méthode de transtypage
</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">"foo"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">'foo'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">"0"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">'0'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// deuxième méthode de transtypage avec une fonction
</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">version_compare</span><span class="p">(</span><span class="k">PHP_VERSION</span><span class="p">,</span> <span class="s1">'5.5.0'</span><span class="p">,</span> <span class="s1">'&gt;='</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">"foo"</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">'foo'</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">);</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">"0"</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">'0'</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

    <span class="nv">$valeur</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/transtypage-float.php">code/transtypage-float.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// transtypage en nombre à virgule flottante
</span>
<span class="c1">// première méthode de transtypage
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"3.14"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"42"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">"3.14 + 3.14"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$calcul</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">"Bonjour Php"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="c1">// deuxième méthode de transtypage avec une fonction
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"3.14"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"42"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">"3.14 + 3.14"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$calcul</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">"Bonjour Php"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/transtypage-integer.php">code/transtypage-integer.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// transtypage en nombre entier
</span>
<span class="c1">// première méthode de transtypage
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"42"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"3.14"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">"42 + 42"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$calcul</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">"Bonjour Php"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="c1">// deuxième méthode de transtypage avec une fonction
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"42"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">"3.14"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">"42 + 42"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$calcul</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">"Bonjour Php"</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/user-input.php">code/user-input.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d'une librairie pour ajouter des fonctionnalités
</span><span class="k">require</span> <span class="s1">'lib-user-input.php'</span><span class="p">;</span>

<span class="c1">// utilisation des fonctions de cette librairie
</span><span class="nv">$user_input</span> <span class="o">=</span> <span class="nx">user_input_get_answer</span><span class="p">(</span><span class="s1">'entrez quelque chose :'</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">"vous avez entré '</span><span class="nv">$user_input</span><span class="s2">'"</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/var_dump.php">code/var_dump.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// la fonction `var_dump()` permet d'inspecter le contenu d'une variable
// @warning attention il s'agit d'une fonction qui sert au déboggage, pas à afficher des informations à l'utilisateur
</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$pi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$pi</span><span class="p">);</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="s1">'une chaîne de caractères'</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>

<span class="nv">$boolean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$boolean</span><span class="p">);</span>

<span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$tableau</span><span class="p">);</span>

<span class="nv">$objet</span> <span class="o">=</span> <span class="k">new</span> <span class="k">stdClass</span><span class="p">();</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$objet</span><span class="p">);</span>

<span class="nv">$handle</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
<span class="nb">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>

<span class="nv">$f</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{};</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/while1.php">code/while1.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable qui servira d'index / compteur
</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// itération d'une boucle de type `while` de 0 à 10 (non inclus)
</span><span class="k">while</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable
</span>    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation de la variable
</span>    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/while2.php">code/while2.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable qui servira d'index / compteur
</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// itération d'une boucle de type `while` tant que la variable `$boucler == true`
</span><span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable `$i`
</span>    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation de la variable `$i`
</span>    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

    <span class="c1">// vérification de la valeur de la variable `$i`
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// on arrête la boucle avec le mot clé `break`
</span>        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/while3.php">code/while3.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable qui servira d'index / compteur
</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// initialisation d'une variable qui servira à controler la boucle
</span><span class="nv">$boucler</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// itération d'une boucle de type `while` tant que la variable `$boucler == true`
</span><span class="k">while</span> <span class="p">(</span><span class="nv">$boucler</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable `$i`
</span>    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation de la variable `$i`
</span>    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

    <span class="c1">// vérification de la valeur de la variable `$i`
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// en affectant la valeur `false` à la variable `$boucle`, on arrête la boucle
</span>        <span class="nv">$boucler</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/while4.php">code/while4.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d'une variable qui servira d'index / compteur
</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// la boucle ne sera jamais exécutée
</span><span class="k">while</span> <span class="p">(</span><span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    

    <a href="code/while5.php">code/while5.php</a>

    <figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// exemple d'utilisation de la boucle `while` pour récupérer l'entrée d'un utilisateur
</span>
<span class="k">require</span> <span class="s1">'lib-user-input.php'</span><span class="p">;</span>

<span class="nv">$loop</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="nv">$loop</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$age</span> <span class="o">=</span> <span class="nx">user_input_get_answer</span><span class="p">(</span><span class="s1">'quel âge avez-vous ?'</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$age</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"vous avez </span><span class="nv">$age</span><span class="s2"> ans"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
        <span class="nv">$loop</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">"vous n'avez pas répondu à la question"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    </article>
</section>

</body>
</html>

