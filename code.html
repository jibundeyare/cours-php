<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"><!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Développement web côté serveur avec PHP</title>
<meta name="description" content="">

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0" />

<link href="css/vendor/normalize.css" rel="stylesheet" type="text/css" />
<link href="css/vendor/foundation.css" rel="stylesheet" type="text/css" />
<link href="css/vendor/pygmentize.css" rel="stylesheet" type="text/css" />
<!-- <link href="css/vendor/syntax.css" rel="stylesheet" type="text/css" /> -->
<link href="css/style.css" rel="stylesheet" type="text/css" />

<script src="js/vendor/modernizr.js"></script>

</head>
<body>
<!--[if lt IE 7]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<section class="row">
    <article class="columns small-12">

        <h1>Développement web côté serveur avec PHP</h1>


<h2>tous les fichiers du dossier <code>code</code></h2>



    

    <a href="code/appel-fonction1.php">code/appel-fonction1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce script vérifie la présence d&#39;un fichier et lit son contenu</span>

<span class="c1">// le nom du fichier</span>
<span class="nv">$fichier</span> <span class="o">=</span> <span class="s1">&#39;appel-fonction1.txt&#39;</span><span class="p">;</span>

<span class="c1">// vérification de présence du fichier</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$fichier</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// le fichier existe</span>

    <span class="c1">// lecture de son contenu</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$fichier</span><span class="p">);</span>
    <span class="c1">// affichage de son contenu</span>
    <span class="k">echo</span> <span class="nv">$texte</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// le fichier n&#39;existe pas</span>
    <span class="k">echo</span> <span class="s2">&quot;le fichier &#39;</span><span class="si">$fichier</span><span class="s2">&#39; n&#39;existe pas</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/appel-fonction2.php">code/appel-fonction2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce script créé un fichier et écrit un texte dedans</span>

<span class="c1">// le nom du nouveau fichier</span>
<span class="nv">$fichier</span> <span class="o">=</span> <span class="s1">&#39;appel-fonction1.txt&#39;</span><span class="p">;</span>
<span class="c1">// le texte qui sera écrit dans le fichier</span>
<span class="nv">$texte</span> <span class="o">=</span> <span class="s2">&quot;hello world!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// écriture dans le fichier</span>
<span class="nb">file_put_contents</span><span class="p">(</span><span class="nv">$fichier</span><span class="p">,</span> <span class="nv">$texte</span><span class="p">);</span></code></pre></div>



    

    <a href="code/appel-fonction3.php">code/appel-fonction3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce script manipule une chaîne de caractère avec la fonction `substr()`</span>
<span class="c1">// la fonction `substr()` permet d&#39;extraire une portion d&#39;une chaîne de caractères</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="s1">&#39;abcdefgh&#39;</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">.</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">.</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/array1.php">code/array1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// création d&#39;un tableau simple vide</span>
<span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="c1">// ajout d&#39;éléments dans le tableau</span>
<span class="nv">$tableau</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;baz&#39;</span><span class="p">;</span>

<span class="c1">// lecture des éléments du tableau</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/array2.php">code/array2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// création d&#39;un tableau simple vide</span>
<span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="c1">// ajout d&#39;éléments dans le tableau</span>
<span class="nv">$tableau</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[</span><span class="mi">200</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="nv">$tableau</span><span class="p">[</span><span class="mi">300</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;baz&#39;</span><span class="p">;</span>

<span class="c1">// lecture des éléments du tableau</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">200</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$tableau</span><span class="p">[</span><span class="mi">300</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/array3.php">code/array3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// création d&#39;un tableau simple</span>
<span class="nv">$fibonacci</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">);</span>

<span class="c1">// lecture des éléments du tableau</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$fibonacci</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/array4.php">code/array4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// création d&#39;un tableau associatif (dictionnaire, hash array)</span>
<span class="nv">$legumes</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;artichaut&#39;</span><span class="p">,</span>
    <span class="s1">&#39;b&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;broccoli&#39;</span><span class="p">,</span>
    <span class="s1">&#39;c&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;carotte&#39;</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1">// lecture des éléments du tableau</span>
<span class="k">echo</span> <span class="nv">$legumes</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$legumes</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$legumes</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">];</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/bool1.php">code/bool1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// pas vrai, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="o">!</span><span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// pas faux, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="o">!</span><span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span></code></pre></div>



    

    <a href="code/bool2.php">code/bool2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;avec parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// vrai et vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et vrai, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="o">&amp;&amp;</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="o">&amp;&amp;</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;sans parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// vrai et vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="o">&amp;&amp;</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="o">&amp;&amp;</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="o">&amp;&amp;</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span></code></pre></div>



    

    <a href="code/bool3.php">code/bool3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;avec parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// vrai ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="o">||</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou faux, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="o">||</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="o">||</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="o">||</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;sans parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// vrai ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="o">||</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="o">||</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="o">||</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="o">||</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span></code></pre></div>



    

    <a href="code/bool4.php">code/bool4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;avec parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// vrai ou exclusif vrai, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="k">xor</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou exclusif faux, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="k">xor</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou exclusif vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="k">xor</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou exclusif faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="k">xor</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;sans parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="k">xor</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="k">xor</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="k">xor</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="k">xor</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span></code></pre></div>



    

    <a href="code/bool5.php">code/bool5.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;avec parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// vrai et vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="k">and</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="k">and</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="k">and</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai et faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="k">and</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;sans parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="k">and</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="k">and</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="k">and</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="k">and</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span></code></pre></div>



    

    <a href="code/bool6.php">code/bool6.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// algèbre booléen avec parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;avec parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// vrai ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="k">or</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">true</span> <span class="k">or</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// vrai ou vrai, équivaut à vrai</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="k">or</span> <span class="k">true</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// faux ou faux, équivaut à faux</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="p">(</span><span class="k">false</span> <span class="k">or</span> <span class="k">false</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// algèbre booléen sans parenthèse</span>

<span class="k">echo</span> <span class="s2">&quot;sans parenthèses</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="k">or</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `true` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span> <span class="k">or</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="k">or</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// sans parenthèses, seul le premier `false` est évalué</span>
<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span> <span class="k">or</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">);</span></code></pre></div>



    

    <a href="code/boolean.php">code/boolean.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affectation de la valeur `true` (vrai) à la variable `$php_c_est_facile`</span>
<span class="nv">$php_facile</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// affectation de la valeur `false` (faux) à la variable `$php_c_est_soporifique`</span>
<span class="nv">$php_c_est_soporifique</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></code></pre></div>



    

    <a href="code/bug.php">code/bug.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la ligne suivante contient un bug</span>
<span class="c1">// avec certaines configurations, ce script n&#39;affiche pas d&#39;erreur mais juste une page blanche</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
<span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span></code></pre></div>



    

    <a href="code/constante1.php">code/constante1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la constante NOMBRE avec la valeur 42</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;NOMBRE&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>

<span class="c1">// définition de la constante NOMBRE_D_OR avec la valeur 1.6180339887</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;NOMBRE_D_OR&#39;</span><span class="p">,</span> <span class="mf">1.6180339887</span><span class="p">);</span>

<span class="c1">// définition de la constante VERSION avec la valeur &#39;5.6.0&#39;</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;VERSION&#39;</span><span class="p">,</span> <span class="s1">&#39;5.6.0&#39;</span><span class="p">);</span>

<span class="c1">// définition de la constante DEBUG_MODE avec la valeur true</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;DEBUG_MODE&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="c1">// note : PHP_EOL est aussi une constante : elle est automatiquement définie par php</span>

<span class="c1">// affichage de la constante</span>
<span class="k">echo</span> <span class="nx">NOMBRE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">NOMBRE_D_OR</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">VERSION</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">DEBUG_MODE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/constante2.php">code/constante2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// à partir de php &gt;= 5.3.0</span>

<span class="c1">// définition de la constante NOMBRE avec la valeur 42</span>
<span class="k">const</span> <span class="no">NOMBRE</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// définition de la constante NOMBRE_D_OR avec la valeur 1.6180339887</span>
<span class="k">const</span> <span class="no">NOMBRE_D_OR</span> <span class="o">=</span> <span class="mf">1.6180339887</span><span class="p">;</span>

<span class="c1">// définition de la constante VERSION avec la valeur &#39;5.6.0&#39;</span>
<span class="k">const</span> <span class="no">VERSION</span> <span class="o">=</span> <span class="s1">&#39;5.6.0&#39;</span><span class="p">;</span>

<span class="c1">// définition de la constante DEBUG_MODE avec la valeur true</span>
<span class="k">const</span> <span class="no">DEBUG_MODE</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// note : PHP_EOL est aussi une constante : elle est automatiquement définie par php</span>

<span class="c1">// affichage de la constante</span>
<span class="k">echo</span> <span class="nx">NOMBRE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">NOMBRE_D_OR</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">VERSION</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">DEBUG_MODE</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/constante3.php">code/constante3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// constantes définies par php</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// constantes magiques définies par php</span>
<span class="k">echo</span> <span class="k">__LINE__</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="k">echo</span> <span class="k">__FILE__</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">__DIR__</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></code></pre></div>



    

    <a href="code/cookie-destroy1.php">code/cookie-destroy1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// suppression de cookies un par un</span>
<span class="nb">setcookie</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">setcookie</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>

<span class="nb">setcookie</span><span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="nb">setcookie</span><span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/cookie-destroy2.php">code/cookie-destroy2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// suppression de tous les cookies</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_COOKIE&#39;</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$cookies</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_COOKIE&#39;</span><span class="p">]);</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$cookies</span> <span class="k">as</span> <span class="nv">$cookie</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$parts</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="nv">$cookie</span><span class="p">);</span>
        <span class="nv">$name</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="nb">setcookie</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nb">setcookie</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/cookie-get.php">code/cookie-get.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inspection du contenu des cookie</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">);</span></code></pre></div>



    

    <a href="code/cookie-set.php">code/cookie-set.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inspection du contenu des cookie</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">);</span>

<span class="c1">// la variable `$_COOKIE` est un tableau</span>
<span class="c1">// affectation de couples clé / valeur à la variable `$_COOKIE`</span>
<span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="nv">$_COOKIE</span><span class="p">[</span><span class="s1">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// inspection du contenu des cookie</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">);</span></code></pre></div>



    

    <a href="code/datetime.php">code/datetime.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// inclusion de la librairie `lib-datetime.php`</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;lib-datetime.php&#39;</span><span class="p">);</span>

<span class="c1">// affectation du fuseau horaire</span>
<span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s1">&#39;europe/paris&#39;</span><span class="p">);</span>

<span class="c1">// création d&#39;objet de type DateTime</span>
<span class="nv">$date1</span> <span class="o">=</span> <span class="nx">date_create_dmy</span><span class="p">(</span><span class="s1">&#39;31/12/2015&#39;</span><span class="p">);</span>
<span class="nv">$date2</span> <span class="o">=</span> <span class="nx">date_create_dmy</span><span class="p">(</span><span class="s1">&#39;01/11/2014&#39;</span><span class="p">);</span>

<span class="c1">// comparaison de dates</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$date1</span> <span class="o">&lt;</span> <span class="nv">$date2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;date1 est antérieure à date2&#39;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$date1</span> <span class="o">&gt;</span> <span class="nv">$date2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;date1 est ultérieure à date2&#39;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;date1 et date2 sont égales&#39;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affichage de l&#39;interval (durée) entre deux dates</span>
<span class="nv">$interval</span> <span class="o">=</span> <span class="nb">date_diff</span><span class="p">(</span><span class="nv">$date1</span><span class="p">,</span> <span class="nv">$date2</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;la différence entre les deux dates est de &#39;</span> <span class="o">.</span> <span class="nv">$interval</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;%r%a&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39; jours&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// création d&#39;un objet DateTime à la date du jour puis affichage</span>
<span class="c1">// pour les code acceptés par la méthode `format()`, voir http://php.net/manual/en/function.date.php#refsect1-function.date-parameters</span>
<span class="nv">$now</span> <span class="o">=</span> <span class="nb">date_create</span><span class="p">();</span>
<span class="k">echo</span> <span class="s1">&#39;nous sommes le &#39;</span> <span class="o">.</span> <span class="nv">$now</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;d/m/Y&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="k">echo</span> <span class="s1">&#39;il est &#39;</span> <span class="o">.</span> <span class="nv">$now</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;H:i:s&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></code></pre></div>



    

    <a href="code/do_while1.php">code/do_while1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable qui servira d&#39;index / compteur</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// début de la boucle</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="c1">// instructions répétées dans la boucle</span>
    <span class="c1">// exemple : affichage du compteur</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation du compteur</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">);</span> <span class="c1">// vérification de la condition pour continuer ou non la boucle</span></code></pre></div>



    

    <a href="code/do_while2.php">code/do_while2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable qui servira d&#39;index / compteur</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// initialisation d&#39;une variable qui servira de condition pour continuer ou non la boucle</span>
<span class="nv">$boucler</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// la boucle sera exécutée au moins une fois</span>
<span class="c1">// début de la boucle</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="c1">// instructions répétées dans la boucle</span>
    <span class="c1">// exemple : affichage du compteur</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation du compteur</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

    <span class="c1">// vérification de la valeur de l&#39;index / compteur</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// si l&#39;index / compteur est à 10, la boucle s&#39;arrête</span>
        <span class="nv">$boucler</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$boucler</span><span class="p">);</span> <span class="c1">// vérification de la condition pour continuer ou non la boucle</span></code></pre></div>



    

    <a href="code/do_while3.php">code/do_while3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable qui servira d&#39;index / compteur</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// initialisation d&#39;une variable qui servira de condition pour continuer ou non la boucle</span>
<span class="nv">$boucler</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="c1">// la boucle sera exécutée au moins une fois</span>
<span class="c1">// début de la boucle</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="c1">// instructions répétées dans la boucle</span>
    <span class="c1">// exemple : affichage du compteur</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation du compteur</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$boucler</span><span class="p">);</span> <span class="c1">// vérification de la condition pour continuer ou non la boucle</span></code></pre></div>



    

    <a href="code/env.php">code/env.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_SERVER` est un tableau</span>
<span class="c1">// elle contient des données sur le serveur, le script en cours d&#39;exécution et le navigateur qui a lancé la requête</span>
<span class="c1">// on boucle sur tous les couples clé / valeur de la variable `$_SERVER`</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$_ENV</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage d&#39;un couple clé / valeur</span>
    <span class="k">echo</span> <span class="nv">$cle</span> <span class="o">.</span> <span class="s1">&#39; = &#39;</span> <span class="o">.</span> <span class="nv">$valeur</span><span class="p">;</span>

    <span class="c1">// affichage d&#39;un saut de ligne html</span>
    <span class="c1">// note : br = break = cassure</span>
    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/erreur-500.php">code/erreur-500.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;HTTP/1.1 500 Internal Server Error&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">    &lt;h1&gt;Oups, problème technique :(&lt;/h1&gt;</span>

<span class="x">    &lt;p&gt;Nous sommes désolés, un problème technique est survenu. Nous mettons tout en œuvre pour le régler rapidement. Revenez nous voir ultérieurement.&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/error-reporting1.php">code/error-reporting1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// afficher toutes les erreurs</span>
<span class="nb">error_reporting</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// autre méthode pour afficher toutes les erreurs</span>
<span class="nb">ini_set</span><span class="p">(</span><span class="s1">&#39;error_reporting&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// n&#39;affiche aucune erreur</span>
<span class="nb">error_reporting</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

<span class="c1">// autre méthode pour n&#39;afficher aucune erreur</span>
<span class="nb">ini_set</span><span class="p">(</span><span class="s1">&#39;error_reporting&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span></code></pre></div>



    

    <a href="code/error-reporting2.php">code/error-reporting2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce script montre comment afficher les erreurs d&#39;un script qui n&#39;affiche qu&#39;une page blanche</span>

<span class="c1">// afficher toutes les erreurs</span>
<span class="c1">// on combine les deux méthode pour être sûr que les erreurs seront affichées quelque soit la configuration du serveur web</span>
<span class="nb">error_reporting</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="nb">ini_set</span><span class="p">(</span><span class="s2">&quot;display_errors&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

<span class="c1">// inclusion du fichier contenant un bug mais qui affiche juste une page blanche</span>
<span class="k">include</span><span class="p">(</span><span class="s2">&quot;bug.php&quot;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/file1.php">code/file1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `fichier` permettant de pousser (uploader) un fichier vers un serveur</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser l&#39;attribut `enctype=&quot;multipart/form-data&quot;` pour que le fichier puisse être envoyé ?&gt;</span>
<span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="nx">enctype</span><span class="o">=</span><span class="s2">&quot;multipart/form-data&quot;</span> <span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;fichier&quot;</span><span class="o">&gt;</span><span class="nx">fichier</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;fichier&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;envoyer&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// la variable `$_FILES` est un tableau</span>
<span class="c1">// avant que l&#39;utilisateur ne valide le formulaire la variable `$_FILES` ne contient aucune donnée</span>
<span class="c1">// quand l&#39;utilisateur valide le formulaire, on retrouve les information concernant le fichier uploadé dans la variable `$_FILES`</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/file2.php">code/file2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `fichier` permettant de pousser (uploader) un fichier vers un serveur</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser l&#39;attribut `enctype=&quot;multipart/form-data&quot;` pour que le fichier puisse être envoyé ?&gt;</span>
<span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="nx">enctype</span><span class="o">=</span><span class="s2">&quot;multipart/form-data&quot;</span> <span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;fichier&quot;</span><span class="o">&gt;</span><span class="nx">fichier</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;fichier[]&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;fichier[]&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;envoyer&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// la variable `$_FILES` est un tableau</span>
<span class="c1">// avant que l&#39;utilisateur ne valide le formulaire la variable `$_FILES` ne contient aucune donnée</span>
<span class="c1">// quand l&#39;utilisateur valide le formulaire, on retrouve les information concernant le fichier uploadé dans la variable `$_FILES`</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/float.php">code/float.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affectation de la valeur 3.14 à la variable `$pi`</span>
<span class="nv">$pi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>

<span class="c1">// affectation de la valeur -3.14 à la variable `$moins_pi`</span>
<span class="nv">$moins_pi</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.14</span><span class="p">;</span></code></pre></div>



    

    <a href="code/fonction1.php">code/fonction1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition d&#39;une fonction nommée `direBonjour`</span>
<span class="k">function</span> <span class="nf">direBonjour</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// corps de la fonction</span>

    <span class="c1">// affichage d&#39;un message</span>
    <span class="k">echo</span> <span class="s2">&quot;Bonjour !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` sans aucun paramètre</span>
<span class="nx">direBonjour</span><span class="p">();</span></code></pre></div>



    

    <a href="code/fonction2.php">code/fonction2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction</span>
<span class="c1">// la fonction prend une variable nommée `$nom` comme paramètre</span>
<span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de l&#39;interpolation</span>
    <span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">$nom</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` avec la chaîne de caractères `&#39;Php&#39;` comme paramètre</span>
<span class="nx">direBonjour</span><span class="p">(</span><span class="s1">&#39;Php&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/fonction3.php">code/fonction3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction</span>
<span class="c1">// la fonction prend deux variables nommées `$prenom` et `$nom` comme paramètres</span>
<span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// concaténation</span>
    <span class="nv">$personne</span> <span class="o">=</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
    <span class="c1">// affichage de l&#39;interpolation</span>
    <span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` avec les chaînes de caractères `&#39;Php&#39;` et `&#39;5.6&#39;` comme paramètres</span>
<span class="nx">direBonjour</span><span class="p">(</span><span class="s1">&#39;Php&#39;</span><span class="p">,</span> <span class="s1">&#39;5.6&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/fonction4.php">code/fonction4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction</span>
<span class="c1">// la fonction prend deux variables nommées `$prenom` et `$nom` comme paramètres</span>
<span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// concaténation puis affichage d&#39;une variable</span>
    <span class="nv">$personne</span> <span class="o">=</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
    <span class="c1">// renvoit du résultat de l&#39;interpolation</span>
    <span class="k">return</span> <span class="s2">&quot;Bonjour </span><span class="si">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// appel de la fonction `direBonjour` avec les chaînes de caractères `&#39;Php&#39;` et `&#39;5.6&#39;` comme paramètres</span>
<span class="c1">// affichage de la valeur renvoyée par la fonction</span>
<span class="k">echo</span> <span class="nx">direBonjour</span><span class="p">(</span><span class="s1">&#39;Php&#39;</span><span class="p">,</span> <span class="s1">&#39;5.6&#39;</span><span class="p">);</span>

<span class="c1">// affectation de la valeur renvoyée par la fonction à la variable `$phrase`</span>
<span class="nv">$phrase</span> <span class="o">=</span> <span class="nx">direBonjour</span><span class="p">(</span><span class="s1">&#39;Php&#39;</span><span class="p">,</span> <span class="s1">&#39;5.6&#39;</span><span class="p">);</span>
<span class="c1">// affichage de la variable `$phrase`</span>
<span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span></code></pre></div>



    

    <a href="code/fonction5.php">code/fonction5.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction</span>
<span class="c1">// la fonction prend une variable nommées `$personnes` obligatoirement de type `array` comme paramètre</span>
<span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="k">array</span> <span class="nv">$personnes</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// boucle sur chaque élément du tableau</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$personnes</span> <span class="k">as</span> <span class="nv">$personne</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// affichage de l&#39;élément</span>
        <span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// affectation d&#39;un tableau simple à la variable `$noms`</span>
<span class="nv">$noms</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Php&#39;</span><span class="p">,</span> <span class="s1">&#39;Html&#39;</span><span class="p">,</span> <span class="s1">&#39;Css&#39;</span><span class="p">,</span> <span class="s1">&#39;Javascript&#39;</span><span class="p">,</span> <span class="s1">&#39;Sql&#39;</span><span class="p">);</span>
<span class="c1">// appel de la fonction `direBonjour` avec la variable `$noms` (qui contient un tableau) comme paramètre</span>
<span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$noms</span><span class="p">);</span>

<span class="c1">// affectation d&#39;une chaîne de caractère à la variable `$nom`</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;Php&#39;</span><span class="p">;</span>
<span class="c1">// appel de la fonction `direBonjour` avec la variable `$nom` (qui contient une chaîne de caractères) comme paramètre</span>
<span class="c1">// cela génère une erreur : &#39;PHP Catchable fatal error:  Argument 1 passed to direBonjour() must be of the type array, string given&#39;</span>
<span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$nom</span><span class="p">);</span></code></pre></div>



    

    <a href="code/fonction6.php">code/fonction6.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction</span>
<span class="c1">// la fonction :</span>
<span class="c1">// - prend une variable nommées `$personnes` obligatoirement de type `array` comme paramètre</span>
<span class="c1">// - prend une deuxième variable nommée `$familier` dont la valeur par défaut est `false` comme paramètre optionnel</span>
<span class="k">function</span> <span class="nf">direBonjour</span><span class="p">(</span><span class="k">array</span> <span class="nv">$personnes</span><span class="p">,</span> <span class="nv">$familier</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// boucle sur chaque élément du tableau</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$personnes</span> <span class="k">as</span> <span class="nv">$personne</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// vérification de la valeur de la variable `$familier`</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$familier</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// affichage d&#39;un message</span>
            <span class="k">echo</span> <span class="s2">&quot;Salut </span><span class="si">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// affichage d&#39;un message</span>
            <span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">$personne</span><span class="s2"> !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// affectation d&#39;un tableau simple à la variable `$noms`</span>
<span class="nv">$noms</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Php&#39;</span><span class="p">,</span> <span class="s1">&#39;Html&#39;</span><span class="p">,</span> <span class="s1">&#39;Css&#39;</span><span class="p">,</span> <span class="s1">&#39;Javascript&#39;</span><span class="p">,</span> <span class="s1">&#39;Sql&#39;</span><span class="p">);</span>

<span class="c1">// appel de la fonction `direBonjour` avec la variable `$noms` (qui contient un tableau) comme paramètres</span>
<span class="c1">// le deuxième paramètre est optionnel</span>
<span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$noms</span><span class="p">);</span>

<span class="c1">// appel de la fonction `direBonjour` avec :</span>
<span class="c1">// - la variable `$noms` (qui contient un tableau) comme paramètre</span>
<span class="c1">// - la valeur `true` comme deuxième paramètre</span>
<span class="nx">direBonjour</span><span class="p">(</span><span class="nv">$noms</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span></code></pre></div>



    

    <a href="code/fonction7.php">code/fonction7.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction</span>
<span class="c1">// cette fonction prend deux paramètres</span>
<span class="c1">// les paramètres sont passés par valeur</span>
<span class="k">function</span> <span class="nf">corrigeNom1</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// mettre la première lettre en majuscule</span>
    <span class="nv">$prenom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">);</span>
    <span class="nv">$nom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$nom</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// définition de la fonction</span>
<span class="c1">// cette fonction prend deux paramètres</span>
<span class="c1">// les paramètres sont passés par référence</span>
<span class="k">function</span> <span class="nf">corrigeNom2</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$prenom</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// mettre la première lettre en majuscule</span>
    <span class="nv">$prenom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">);</span>
    <span class="nv">$nom</span> <span class="o">=</span> <span class="nb">ucfirst</span><span class="p">(</span><span class="nv">$nom</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">&#39;php&#39;</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">;</span>

<span class="nx">corrigeNom1</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">);</span>
<span class="c1">// après l&#39;appel de la fonction où les paramètres sont passés par valeur, les variables de `$prenom` et `$nom` ne changent pas</span>
<span class="k">echo</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="nx">corrigeNom2</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">);</span>
<span class="c1">// après l&#39;appel de la fonction où les paramètres sont passés par référence, les variables de `$prenom` et `$nom` changent</span>
<span class="k">echo</span> <span class="nv">$prenom</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/fonction8.php">code/fonction8.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition de la fonction</span>
<span class="c1">// toutes les fonctions peuvent prendre un nombre illimité de paramètres</span>
<span class="c1">// à l&#39;intérieure de la fonction, l&#39;appel à la fonction `func_get_args()` permet de récupérer dans un tableau tous les paramètres passés à la fonction</span>
<span class="k">function</span> <span class="nf">listeLangages</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// boucle sur chacun des paramètres passés à la fonction</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nb">func_get_args</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$auditeur</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// affichage du paramètre</span>
        <span class="k">echo</span> <span class="nv">$auditeur</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// syntaxe altérnative possible à partir de php 5.6.0</span>
<span class="c1">// function listeLangages(...$auditeurs) {</span>
<span class="c1">//     foreach ($auditeurs as $auditeur) {</span>
<span class="c1">//         echo $auditeur . PHP_EOL;</span>
<span class="c1">//     }</span>
<span class="c1">// }</span>

<span class="c1">// appel de la fonction avec cinq paramètres</span>
<span class="nx">listeLangages</span><span class="p">(</span><span class="s1">&#39;Php&#39;</span><span class="p">,</span> <span class="s1">&#39;Html&#39;</span><span class="p">,</span> <span class="s1">&#39;Css&#39;</span><span class="p">,</span> <span class="s1">&#39;Javascript&#39;</span><span class="p">,</span> <span class="s1">&#39;Sql&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/fonction-anonyme1.php">code/fonction-anonyme1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition d&#39;une fonction anonyme et affectation à une variable nommée `direBonjour`</span>
<span class="nv">$direBonjour</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// corps de la fonction</span>

    <span class="c1">// affichage d&#39;un message</span>
    <span class="k">echo</span> <span class="s2">&quot;Bonjour !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `direBonjour`</span>
<span class="nv">$direBonjour</span><span class="p">();</span></code></pre></div>



    

    <a href="code/fonction-anonyme2.php">code/fonction-anonyme2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// définition d&#39;une fonction anonyme et affectation à une variable nommée `direBonjour`</span>
<span class="nv">$direBonjour</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// corps de la fonction</span>

    <span class="c1">// affichage d&#39;un message</span>
    <span class="k">echo</span> <span class="s2">&quot;Bonjour !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `direBonjour`</span>
<span class="nv">$direBonjour</span><span class="p">();</span>

<span class="c1">// affectation du contenu de la variable `$direBonjour` à la variable `$a`</span>
<span class="c1">// maintenant, a contient aussi la fonction anonyme</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="nv">$direBonjour</span><span class="p">;</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `$a</span>
<span class="nv">$a</span><span class="p">();</span>

<span class="c1">// définition d&#39;une nouvelle fonction anonyme et affectation à la variable `$a`</span>
<span class="nv">$a</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;Salut !</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// appel sans aucun paramètre de la fonction anonyme stockée dans la variable `$a</span>
<span class="nv">$a</span><span class="p">();</span></code></pre></div>



    

    <a href="code/fonction-anonyme3.php">code/fonction-anonyme3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$texte</span> <span class="o">=</span> <span class="s2">&quot;PHP: Hypertext Preprocessor, plus connu sous son sigle PHP&quot;</span><span class="p">;</span>
<span class="nv">$debut</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$longueur</span> <span class="o">=</span> <span class="mi">27</span><span class="p">;</span>

<span class="nv">$filtreMajsculeToute</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">$texte</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">strtoupper</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
<span class="p">};</span>

<span class="nv">$filtreMinsculeToute</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">$texte</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">strtolower</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
<span class="p">};</span>

<span class="nv">$filtreMajsculeMot</span> <span class="o">=</span> <span class="k">function</span><span class="p">(</span><span class="nv">$texte</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="o">&amp;</span><span class="nv">$debut</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$longueur</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$debut</span><span class="p">,</span> <span class="nv">$longueur</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">ucwords</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">function</span> <span class="nf">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtre</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$texte</span> <span class="o">=</span> <span class="nv">$filtre</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$texte</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMajsculeToute</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMinsculeToute</span><span class="p">);</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="s2">&quot;L&#39;Hypertext Markup Language, généralement abrégé HTML, est le format de données conçu pour représenter les pages web.&quot;</span><span class="p">;</span>
<span class="nv">$debut</span> <span class="o">=</span> <span class="mi">66</span><span class="p">;</span>
<span class="nv">$longueur</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>

<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMajsculeToute</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">modifierTexte</span><span class="p">(</span><span class="nv">$texte</span><span class="p">,</span> <span class="nv">$filtreMajsculeMot</span><span class="p">);</span></code></pre></div>



    

    <a href="code/for1.php">code/for1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable nommée `$i` qui servira d&#39;index / compteur</span>
<span class="c1">// la boucle for se terminera quand `$i` vaudra 10</span>
<span class="c1">// la variable `$i` est incrémentée de 1 à chaque tour</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// à chaque tour on affiche la valeur de `$i`</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/for2.php">code/for2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau simple de trois éléments</span>
<span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;baz&#39;</span>
<span class="p">);</span>

<span class="c1">// initialisation d&#39;une variable nommée `$i` qui servira d&#39;index / compteur</span>
<span class="c1">// la boucle for se terminera quand `$i` vaudra `count($liste)`, c-à-d quand `$i` sera égal au nombre d&#39;éléments dans la variable `$liste`</span>
<span class="c1">// la variable `$i` est incrémentée de 1 à chaque tour</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$liste</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// tour à tour, on affiche chaque élément de la variable `$liste`</span>
    <span class="k">echo</span> <span class="nv">$liste</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/for3.php">code/for3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$tableau` contient plusieurs tableaux simples</span>
<span class="c1">// la variable nommée `$tableau` est un tableau à deux dimensions</span>
<span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;php&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;css&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;javascript&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;sql&#39;</span><span class="p">),</span>
<span class="p">);</span>

<span class="c1">// initialisation d&#39;une variable nommée `$i` qui servira d&#39;index / compteur</span>
<span class="c1">// la boucle for se terminera quand `$i` vaudra `count($tableau)`, c-à-d quand `$i` sera égal au nombre d&#39;éléments dans la variable `$tableau`</span>
<span class="c1">// la variable `$i` est incrémentée de 1 à chaque tour</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$tableau</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// tour à tour, on affecte chaque élément de la variable `$tableau` à la variable `$ligne`</span>
    <span class="nv">$ligne</span> <span class="o">=</span> <span class="nv">$tableau</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>

    <span class="c1">// initialisation d&#39;une variable nommée `$j` qui servira d&#39;index / compteur</span>
    <span class="c1">// la boucle for se terminera quand `$j` vaudra `count($ligne)`, c-à-d quand `$j` sera égal au nombre d&#39;éléments dans la variable `$ligne`</span>
    <span class="c1">// la variable `$j` est incrémentée de 1 à chaque tour</span>
    <span class="k">for</span> <span class="p">(</span><span class="nv">$j</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$ligne</span><span class="p">);</span> <span class="nv">$j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// tour à tour, on affiche chaque élément de la variable `$ligne`</span>
        <span class="k">echo</span> <span class="nv">$ligne</span><span class="p">[</span><span class="nv">$j</span><span class="p">];</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/foreach1.php">code/foreach1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau simple de trois éléments</span>
<span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;baz&#39;</span>
<span class="p">);</span>

<span class="c1">// début de la boucle</span>
<span class="c1">// à chaque tour, php affecte la valeur de chaque élément de la variable `$liste` à la variable `$element`</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$liste</span> <span class="k">as</span> <span class="nv">$element</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable `$element`</span>
    <span class="k">echo</span> <span class="nv">$element</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/foreach2.php">code/foreach2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau associatif de trois éléments</span>
<span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;artichaut&#39;</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s1">&#39;broccoli&#39;</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;carotte&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">);</span>

<span class="c1">// début de la boucle</span>
<span class="c1">// à chaque tour, php affecte :</span>
<span class="c1">// - la clé de chaque élément de la variable `$liste` à la variable `$cle`</span>
<span class="c1">// - la valeur de chaque élément de la variable `$liste` à la variable `$valeur`</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$liste</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage des variables `$cle` et `$valeur`</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">$cle</span><span class="s2"> : </span><span class="si">$valeur</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/foreach3.php">code/foreach3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$liste` contient un tableau simple de trois éléments</span>
<span class="nv">$liste</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
    <span class="s1">&#39;baz&#39;</span>
<span class="p">);</span>

<span class="c1">// début de la boucle</span>
<span class="c1">// à chaque tour, php affecte :</span>
<span class="c1">// - la clé de chaque élément de la variable `$liste` à la variable `$cle`</span>
<span class="c1">// - la valeur de chaque élément de la variable `$liste` à la variable `$valeur`</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$liste</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage des variables `$cle` et `$valeur`</span>
    <span class="c1">// on remarque que php avait automatiquement affecté des nombres entiers en commençant par 0 comme clé de chaque élément</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">$cle</span><span class="s2"> : </span><span class="si">$valeur</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/foreach4.php">code/foreach4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable nommée `$tableau` contient plusieurs tableaux associatifs</span>
<span class="c1">// la variable nommée `$tableau` est un tableau à deux dimensions</span>
<span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;php&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;html&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;css&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;javascript&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;sql&#39;</span><span class="p">),</span>
<span class="p">);</span>

<span class="c1">// début de la boucle</span>
<span class="c1">// à chaque tour, php affecte la valeur de chaque élément de la variable `$tableau` à la variable `$ligne`</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$tableau</span> <span class="k">as</span> <span class="nv">$ligne</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// début de la boucle</span>
    <span class="c1">// à chaque tour, php affecte :</span>
    <span class="c1">// - la clé de chaque élément de la variable `$ligne` à la variable `$cle`</span>
    <span class="c1">// - la valeur de chaque élément de la variable `$ligne` à la variable `$valeur`</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$ligne</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// affichage des variables `$cle` et `$valeur`</span>
        <span class="k">echo</span> <span class="s2">&quot;</span><span class="si">$cle</span><span class="s2"> : </span><span class="si">$valeur</span><span class="s2">&quot;</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/form-etape1.php">code/form-etape1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes</span>

<span class="c1">// démarrage de la session</span>
<span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// on part du principe que le formulaire est valide</span>
<span class="c1">// on déclarera une erreur si on en trouve une lors de la validation du formulaire</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire</span>
<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ &#39;titre&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser le titre&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// vérification de la validation</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>

        <span class="c1">// stockage des valeurs du formulaire dans la variable de session</span>
        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">];</span>

        <span class="c1">// redirection vers le formulaire suivant</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;location: form-etape2.php&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;titre&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$formulaire[&#39;titre&#39;]</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;envoyer&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span></code></pre></div>



    

    <a href="code/form-etape2.php">code/form-etape2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes</span>

<span class="c1">// démarrage de la session</span>
<span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// on part du principe que le formulaire est valide</span>
<span class="c1">// on déclarera une erreur si on en trouve une lors de la validation du formulaire</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire</span>
<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ &#39;email&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser le email&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// vérification de la validation</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>

        <span class="c1">// stockage des valeurs du formulaire dans la variable de session</span>
        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>

        <span class="c1">// redirection vers le formulaire suivant</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;location: form-etape3.php&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;email&quot;&gt;email&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;email&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$formulaire[&#39;email&#39;]</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;envoyer&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span></code></pre></div>



    

    <a href="code/form-etape3.php">code/form-etape3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes</span>

<span class="c1">// démarrage de la session</span>
<span class="nb">session_start</span><span class="p">();</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;p&gt;vous avez entré :&lt;/p&gt;</span>

<span class="x">&lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;&lt;br /&gt;</span>
<span class="cp">&lt;?php</span>
<span class="c1">// affichage d&#39;une valeur stockée dans la variable de session</span>
<span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;input disabled=&quot;disabled&quot; name=&quot;titre&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>
<span class="x">&lt;label for=&quot;email&quot;&gt;email&lt;/label&gt;&lt;br /&gt;</span>
<span class="cp">&lt;?php</span>
<span class="c1">// affichage d&#39;une valeur stockée dans la variable de session</span>
<span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;input disabled=&quot;disabled&quot; name=&quot;email&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-input-checkbox.php">code/form-input-checkbox.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `checkbox` peuvent renvoyer une ou plusieurs valeurs sous la forme d&#39;un tableau</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `input` de type &#39;checkbox&#39;</span>
<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;carotte&#39;</span><span class="p">,</span>
    <span class="s1">&#39;courgette&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fraise&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
    <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pomme de terre&#39;</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliments&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliments&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir les aliments&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;aliments&quot;&gt;aliments&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$aliment</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l&#39;utilisateur ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur a coché cette case ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l&#39;attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">checked</span><span class="o">=</span><span class="s2">&quot;checked&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;aliments[]&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;checkbox&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$aliment</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur n&#39;a pas coché cette case ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l&#39;attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;aliments[]&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;checkbox&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$aliment</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-input-file-multi.php">code/form-input-file-multi.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `file` permettent de pousser (uploader) un fichier vers un serveur</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// @note les champs `input` de type `file` ne peuvent pas avoir de valeur par défaut</span>

<span class="c1">// les fichiers envoyés seront enregistrés dans le dossier courant</span>
<span class="nv">$upload_dir</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="p">;</span>

<span class="c1">// messages par défaut</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;fichier&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// vérification des fichiers envoyés</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ &#39;fichier&#39;</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&quot;fichier&quot;</span><span class="p">][</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_OK</span><span class="o">:</span>
            <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_NO_FILE</span><span class="o">:</span>
            <span class="c1">// il y a une erreur</span>
            <span class="c1">// l&#39;utilisateur n&#39;a pas envoyé de fichier</span>
            <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
            <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="nv">$index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de sélectionner un fichier&quot;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="c1">// il y a une erreur</span>
            <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
            <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="nv">$index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;une erreur est survenue, le fichier &#39;</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; n&#39;a pas pu être enregistré&quot;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// vérification intermédiaire de la validation</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>

        <span class="c1">// on peut stocker les fichiers</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s2">&quot;fichier&quot;</span><span class="p">][</span><span class="s2">&quot;error&quot;</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">][</span><span class="nv">$index</span><span class="p">],</span> <span class="nv">$upload_dir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">][</span><span class="nv">$index</span><span class="p">]))</span> <span class="p">{</span>
                <span class="c1">// il y a une erreur</span>
                <span class="c1">// php n&#39;est pas parvenu à stocker le fichier</span>
                <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
                <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
                <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="nv">$index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;une erreur est survenue, le fichier &#39;</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; n&#39;a pas pu être enregistré&quot;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// vérification finale de la validation</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>

        <span class="c1">// affectation d&#39;un message de confirmation</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser l&#39;attribut `enctype=&quot;multipart/form-data&quot;` pour que le fichier puisse être envoyé ?&gt;</span>
<span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="nx">enctype</span><span class="o">=</span><span class="s2">&quot;multipart/form-data&quot;</span> <span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;fichier&quot;</span><span class="o">&gt;</span><span class="nx">fichier</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;input name=&quot;fichier[]&quot; type=&quot;file&quot; /&gt;&lt;br /&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;input name=&quot;fichier[]&quot; type=&quot;file&quot; /&gt;&lt;br /&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;input name=&quot;fichier[]&quot; type=&quot;file&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-input-file.php">code/form-input-file.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `file` permettent de pousser (uploader) un fichier vers un serveur</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// @note les champs `input` de type `file` ne peuvent pas avoir de valeur par défaut</span>

<span class="c1">// les fichiers envoyés seront enregistrés dans le dossier courant</span>
<span class="nv">$upload_dir</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="p">;</span>

<span class="c1">// messages par défaut</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;fichier&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// vérification des fichiers envoyés</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ &#39;fichier&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;error&#39;</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_OK</span><span class="o">:</span>
            <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
            <span class="c1">// on peut stocker le fichier</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">],</span> <span class="nv">$upload_dir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span> <span class="p">{</span>
                <span class="c1">// il y a une erreur</span>
                <span class="c1">// php n&#39;est pas parvenu à stocker le fichier</span>
                <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
                <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
                <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;une erreur est survenue, le fichier &#39;</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; n&#39;a pas pu être enregistré&quot;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_NO_FILE</span><span class="o">:</span>
            <span class="c1">// il y a une erreur</span>
            <span class="c1">// l&#39;utilisateur n&#39;a pas envoyé de fichier</span>
            <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
            <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de sélectionner un fichier&quot;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="c1">// il y a une erreur</span>
            <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
            <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
            <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;une erreur est survenue, le fichier &#39;</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; n&#39;a pas pu être enregistré&quot;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// vérification de la validation</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>
        <span class="c1">// affectation d&#39;un message de confirmation</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser l&#39;attribut `enctype=&quot;multipart/form-data&quot;` pour que le fichier puisse être envoyé ?&gt;</span>
<span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="nx">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span> <span class="nx">enctype</span><span class="o">=</span><span class="s2">&quot;multipart/form-data&quot;</span> <span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;fichier&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;fichier&quot;&gt;fichier&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;fichier&quot; type=&quot;file&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-input-hidden.php">code/form-input-hidden.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `hidden` ne renvoient qu&#39;une seule valeur</span>
<span class="c1">// les champs `input` de type `hidden` ne s&#39;affichent pas à l&#39;écran mais leurs données sont envoyées</span>
<span class="c1">// les champs `input` de type `hidden` se comportent comme des champs `input` de type `text`</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire</span>
<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;code_isbn&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ISBN-X-XXX-XXXXX-X&#39;</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser le titre&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;code_isbn&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;code_isbn&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;code_isbn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;code_isbn&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;code_isbn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;une erreur s&#39;est produite, le code ISBN n&#39;est pas précisé&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;titre&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input name=&quot;code_isbn&quot; type=&quot;hidden&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;code_isbn&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-input-password.php">code/form-input-password.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `password` ne renvoient qu&#39;une seule valeur</span>
<span class="c1">// les champs `input` de type `password` se comportent comme des champs `input` de type `text`</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;mot_de_passe&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;mot_de_passe&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;mot_de_passe&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;mot_de_passe&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;mot_de_passe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;mot_de_passe&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;mot_de_passe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser le mot de passe&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;mot_de_passe&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;mot_de_passe&quot;&gt;mot de passe&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;mot_de_passe&quot; type=&quot;password&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;mot_de_passe&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-input-radio.php">code/form-input-radio.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `radio` ne renvoient qu&#39;une seule valeur</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `input` de type &#39;radio&#39;</span>
<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;carotte&#39;</span><span class="p">,</span>
    <span class="s1">&#39;courgette&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fraise&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
    <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pomme de terre&#39;</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliment&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliment&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser l&#39;aliment&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;aliment&quot;&gt;aliment&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l&#39;utilisateur ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur a coché cette case ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">checked</span><span class="o">=</span><span class="s2">&quot;checked&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;aliment&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;radio&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur n&#39;a pas coché cette case ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;aliment&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;radio&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-input-text.php">code/form-input-text.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `text` ne renvoient qu&#39;une seule valeur</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser le titre&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;titre&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-select-multiple-optgroup.php">code/form-select-multiple-optgroup.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` avec l&#39;attribut `multiple=&quot;multiple&quot;` peuvent renvoyer une ou plusieurs valeurs sous la forme d&#39;un tableau</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `select` avec des balises `optgroup`</span>
<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;fruits&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;fraise&#39;</span><span class="p">,</span>
        <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
        <span class="s1">&#39;orange&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;légumes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;carotte&#39;</span><span class="p">,</span>
        <span class="s1">&#39;courgette&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pomme de terre&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliments&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliments&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser les aliments&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;aliments&quot;&gt;aliments&lt;/label&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l&#39;attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">multiple</span><span class="o">=</span><span class="s2">&quot;multiple&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;aliments[]&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// génération du champ avec une boucle ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$optgroup</span> <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;optgroup label=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$optgroup</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;</span>
        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l&#39;utilisateur ?&gt;</span>
            <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur a coché cette case ?&gt;</span>
            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">&quot;selected&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur n&#39;a pas coché cette case ?&gt;</span>
            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/optgroup&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/select&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-select-multiple.php">code/form-select-multiple.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` avec l&#39;attribut `multiple=&quot;multiple&quot;` peuvent renvoyer une ou plusieurs valeurs sous la forme d&#39;un tableau</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;carotte&#39;</span><span class="p">,</span>
    <span class="s1">&#39;courgette&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fraise&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
    <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pomme de terre&#39;</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliments&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliments&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser les aliments&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;aliments&quot;&gt;aliments&lt;/label&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l&#39;attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">multiple</span><span class="o">=</span><span class="s2">&quot;multiple&quot;</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;aliments[]&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// génération `optgroup` avec une boucle ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$aliment</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l&#39;utilisateur ?&gt;</span>
        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliments&#39;</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur a coché cette case ?&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">&quot;selected&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$aliment</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur n&#39;a pas coché cette case ?&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$aliment</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/select&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-select-optgroup.php">code/form-select-optgroup.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` ne renvoient qu&#39;une seule valeur</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `select` avec des balises `optgroup`</span>
<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;fruits&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;fraise&#39;</span><span class="p">,</span>
        <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
        <span class="s1">&#39;orange&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;légumes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;carotte&#39;</span><span class="p">,</span>
        <span class="s1">&#39;courgette&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pomme de terre&#39;</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliment&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliments&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser l&#39;aliment&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;aliment&quot;&gt;aliment&lt;/label&gt;</span>
<span class="x">    &lt;select name=&quot;aliment&quot;&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// génération `optgroup` avec une boucle ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$optgroup</span> <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;optgroup label=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$optgroup</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;</span>
        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l&#39;utilisateur ?&gt;</span>
            <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur a coché cette case ?&gt;</span>
            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">&quot;selected&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur n&#39;a pas coché cette case ?&gt;</span>
            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/optgroup&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/select&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-select.php">code/form-select.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` ne renvoient qu&#39;une seule valeur</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;carotte&#39;</span><span class="p">,</span>
    <span class="s1">&#39;courgette&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fraise&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span>
    <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pomme de terre&#39;</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliment&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;aliment&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de préciser l&#39;aliment&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;aliment&quot;&gt;aliment&lt;/label&gt;</span>
<span class="x">    &lt;select name=&quot;aliment&quot;&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l&#39;utilisateur ?&gt;</span>
        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;aliment&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur a coché cette case ?&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">&quot;selected&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="c1">// l&#39;utilisateur n&#39;a pas coché cette case ?&gt;</span>
        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$item</span><span class="s2">); ?&gt;&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/option&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/select&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-textarea.php">code/form-textarea.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// les champs `textarea` ne renvoient qu&#39;une seule valeur</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;commentaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;commentaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;commentaire&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;commentaire&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;commentaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;commentaire&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;commentaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir un commentaire&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;commentaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;commentaire&quot;&gt;commentaire&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;textarea name=&quot;commentaire&quot;&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;commentaire&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&lt;/textarea&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-validation1.php">code/form-validation1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d&#39;un formulaire envoyé (avec la méthode post) par l&#39;utilisateur</span>
<span class="c1">// @warning ce script ne permet pas de faire une validation complète, il montre seulement comment utiliser les fonctions `isset()` et `empty()`</span>

<span class="c1">// on définit des valeurs par défaut que l&#39;utilisateur verra avant d&#39;avoir envoyé le formulaire</span>
<span class="nv">$titre</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>

<span class="c1">// vérifions que l&#39;utilisateur a bien soumis le formulaire</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// vérifions que :</span>
    <span class="c1">// - le couple clé / valeur `$_POST[&#39;titre&#39;]` existe bien avec la fonction `isset()`</span>
    <span class="c1">// - la valeur `$_POST[&#39;titre&#39;]` n&#39;est pas vide avec la fonction `empty()` et l&#39;opérateur de négation `!`</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// l&#39;utilisateur a bien envoyé une valeur et celle-ci est non vide</span>

        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$titre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">];</span>

        <span class="c1">// affectation d&#39;un nouveau message pour l&#39;utilsateur</span>
        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;titre&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$titre</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;envoyer&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span></code></pre></div>



    

    <a href="code/form-validation2.php">code/form-validation2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d&#39;un formulaire envoyé (avec la méthode post) par l&#39;utilisateur</span>

<span class="c1">// on part du principe que le formulaire est valide</span>
<span class="c1">// on déclarera une erreur si on en trouve une lors de la validation du formulaire</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire</span>
<span class="nv">$titre</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$auteur</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$description</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="c1">// messages par défaut du formulaire</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>

<span class="c1">// validation des données du formulaire</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ &#39;titre&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$titre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ &#39;auteur&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$auteur</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ optionnel &#39;description&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$description</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// ce champ est optionnel, du coup même s&#39;il n&#39;est pas rempli, on ne déclare pas d&#39;erreur avec `$validation = false;`</span>

    <span class="c1">// vérification de la validation</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>
        <span class="c1">// affectation d&#39;un message de confirmation</span>
        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas rempli certains champs&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;titre&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$titre</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;auteur&quot;</span><span class="o">&gt;</span><span class="nx">auteur</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;auteur&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$auteur</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="o">&gt;</span><span class="nx">description</span> <span class="p">(</span><span class="nx">champ</span> <span class="nx">optionnel</span><span class="p">)</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">textarea</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$description</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/textarea&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/form-validation3.php">code/form-validation3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d&#39;un formulaire envoyé (avec la méthode post) par l&#39;utilisateur</span>

<span class="c1">// on part du principe que le formulaire est valide</span>
<span class="c1">// on déclarera une erreur si on en trouve une lors de la validation du formulaire</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire</span>
<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;auteur&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;titre&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;auteur&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;formulaire&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ &#39;titre&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le titre&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ &#39;auteur&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir l&#39;auteur&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ optionnel &#39;description&#39;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreur</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// ce champ est optionnel, du coup même s&#39;il n&#39;est pas rempli, on ne déclare pas d&#39;erreur avec `$validation = false;`</span>

    <span class="c1">// vérification de la validation</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n&#39;y a pas d&#39;erreurs</span>
        <span class="c1">// affectation d&#39;un message de confirmation</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci d&#39;avoir rempli le formulaire&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs</span>
        <span class="c1">// affectation d&#39;un message d&#39;erreur</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;merci de remplir le formulaire et de le valider&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>

<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;formulaire&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;titre&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;titre&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$formulaire[&#39;titre&#39;]</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;auteur&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;auteur&quot;&gt;auteur&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;auteur&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="nx">value</span><span class="o">=</span><span class="s2">&quot;&lt;?php echo htmlentities(</span><span class="si">$formulaire[&#39;auteur&#39;]</span><span class="s2">); ?&gt;&quot;</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;label for=&quot;description&quot;&gt;description&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;</span>
    <span class="o">&lt;</span><span class="nx">textarea</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&lt;/textarea&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/get1.php">code/get1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `titre` dont les données sont envoyées par la méthode `get`</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;get&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;</span>
<span class="x">    &lt;input name=&quot;titre&quot; type=&quot;text&quot; /&gt;</span>
<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_GET` est un tableau</span>
<span class="c1">// avant que l&#39;utilisateur ne valide le formulaire la variable `$_GET` ne contient aucune donnée</span>
<span class="c1">// quand l&#39;utilisateur valide le formulaire, on retrouve les données dans la variable `$_GET`, même si c&#39;est une chaîne de caractères vide</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/get2.php">code/get2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `titre` dont les données sont envoyées par la méthode `get`</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;a href=&quot;?foo=bar&amp;amp;baz=42&amp;amp;toto=3.14&quot;&gt;envoyer des données en GET avec un lien&lt;/a&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_GET` est un tableau</span>
<span class="c1">// avant que l&#39;utilisateur ne valide le formulaire la variable `$_GET` ne contient aucune donnée</span>
<span class="c1">// quand l&#39;utilisateur valide le formulaire, on retrouve les données dans la variable `$_GET`, même si c&#39;est une chaîne de caractères vide</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/hello.php">code/hello.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="s2">&quot;Hello World!</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></code></pre></div>



    

    <a href="code/if1.php">code/if1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message s&#39;affichera toujours</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message ne s&#39;affichera jamais</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="k">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message ne s&#39;affichera jamais</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message s&#39;affichera toujours</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/if2.php">code/if2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$condition</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message s&#39;affichera toujours</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message ne s&#39;affichera jamais</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$condition</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message ne s&#39;affichera jamais</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;ce message s&#39;affichera toujours</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/if3.php">code/if3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// comparaison d&#39;une variable et d&#39;un nombre entier</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$nombre</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;nombre plus grand que 5&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$nombre</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;nombre plus petit que 5&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;nombre égal à 5&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/if4.php">code/if4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de deux variables</span>

<span class="nv">$places_dispo</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nv">$demandes</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$places_dispo</span> <span class="o">&gt;=</span> <span class="nv">$demandes</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;Résa confirmée&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$places_dispo</span> <span class="o">==</span> <span class="nv">$demandes</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;Résa confirmée (vous avez de la chance, c&#39;étaient les dernières places)&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">&quot;Désolé, nous sommes complet&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/include_multi_fatal_error.php">code/include_multi_fatal_error.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// au 2ème tour, cette inclusion génère une erreur : &quot;PHP Fatal error:  Cannot redeclare user_input_get_answer()&quot;</span>
    <span class="k">include</span> <span class="s1">&#39;lib-user-input.php&#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/include_multi.php">code/include_multi.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">include</span> <span class="s1">&#39;hello.php&#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/include_once1.php">code/include_once1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// avec le mot clé `include_once`, php s&#39;assure que le fichier n&#39;est inclus qu&#39;une seule fois</span>
    <span class="k">include_once</span> <span class="s1">&#39;hello.php&#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/include_once2.php">code/include_once2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// avec le mot clé `include_once`, php s&#39;assure que le fichier n&#39;est inclus qu&#39;une seule fois</span>
    <span class="k">include_once</span> <span class="s1">&#39;lib-user-input.php&#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/include.php">code/include.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d&#39;un autre fichier dans le fichier actuel</span>
<span class="k">include</span> <span class="s1">&#39;hello.php&#39;</span><span class="p">;</span></code></pre></div>



    

    <a href="code/include-warning.php">code/include-warning.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d&#39;un fichier qui n&#39;existe pas</span>
<span class="c1">// cette inclusion génère un warning : &quot;PHP Warning:  include(foo.php): failed to open stream: No such file or directory&quot;</span>
<span class="k">include</span> <span class="s1">&#39;foo.php&#39;</span><span class="p">;</span>

<span class="c1">// le script continue son exécution</span>
<span class="k">echo</span> <span class="s2">&quot;ce message s&#39;affiche&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/integer.php">code/integer.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affectation de la valeur 42 à la variable `$nombre`</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// affectation de la valeur -42 à la variable `$autre_nombre`</span>
<span class="nv">$autre_nombre</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span><span class="p">;</span></code></pre></div>



    

    <a href="code/lib-datetime.php">code/lib-datetime.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="sd">/**</span>
<span class="sd"> * date_create_dmy</span>
<span class="sd"> *</span>
<span class="sd"> * creates a DateTime object form a date string like &#39;31/12/1999&#39;</span>
<span class="sd"> *</span>
<span class="sd"> * @param string $date a date string of the format &#39;dd/mm/yyyy&#39;</span>
<span class="sd"> * @return DateTime a DateTime object created from the date string</span>
<span class="sd"> */</span>
<span class="k">function</span> <span class="nf">date_create_dmy</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$d</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$m</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$y</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">date_create</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$y</span><span class="s2">-</span><span class="si">$m</span><span class="s2">-</span><span class="si">$d</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="sd">/**</span>
<span class="sd"> * date_create_mdy</span>
<span class="sd"> *</span>
<span class="sd"> * creates a DateTime object form a date string like &#39;12/31/1999&#39;</span>
<span class="sd"> *</span>
<span class="sd"> * @param string $date a date string of the format &#39;mm/dd/yyyy&#39;</span>
<span class="sd"> * @return DateTime a DateTime object created from the date string</span>
<span class="sd"> */</span>
<span class="k">function</span> <span class="nf">date_create_mdy</span><span class="p">(</span><span class="nv">$date</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$d</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$m</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="nv">$y</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$date</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">date_create</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$y</span><span class="s2">-</span><span class="si">$m</span><span class="s2">-</span><span class="si">$d</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/lib-user-input.php">code/lib-user-input.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">user_input_get_answer</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$default_value</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$prompt</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="nv">$prompt</span> <span class="o">.</span> <span class="s1">&#39; [&#39;</span> <span class="o">.</span> <span class="nv">$default_value</span> <span class="o">.</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$user_input</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$user_input</span><span class="p">))</span> <span class="p">{</span>
        <span class="nv">$user_input</span> <span class="o">=</span> <span class="nv">$default_value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$user_input</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">user_input_get_choice</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$choices</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$user_input</span> <span class="o">=</span> <span class="nx">user_input_get_answer</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$default_value</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$user_input</span><span class="p">,</span> <span class="nv">$choices</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$user_input</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">user_input_get_confirmation</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$answers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">),</span> <span class="nv">$default_value</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="nv">$confirmation</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">get_user_choice</span><span class="p">(</span><span class="nv">$prompt</span><span class="p">,</span> <span class="nv">$answers</span><span class="p">,</span> <span class="nv">$default_value</span><span class="p">)</span> <span class="o">==</span> <span class="nv">$confirmation</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/miniapp/lib/http.php">code/miniapp/lib/http.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * redirect</span>
<span class="sd"> *</span>
<span class="sd"> * redirige vers une url</span>
<span class="sd"> *</span>
<span class="sd"> * @param string $url l&#39;url vers laquelle rediriger</span>
<span class="sd"> * @return void</span>
<span class="sd"> */</span>
<span class="k">function</span> <span class="nf">http_redirect</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;location: &#39;</span> <span class="o">.</span> <span class="nv">$url</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
    <span class="k">exit</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/miniapp/lib/password.php">code/miniapp/lib/password.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * password_generate_random_string</span>
<span class="sd"> *</span>
<span class="sd"> * source:</span>
<span class="sd"> *  Generating a random password in php - Stack Overflow</span>
<span class="sd"> *  http://stackoverflow.com/questions/6101956/generating-a-random-password-in-php#answer-6101969</span>
<span class="sd"> *</span>
<span class="sd"> * generates a random password</span>
<span class="sd"> *</span>
<span class="sd"> * @param int $password_length OPTIONAL desired length of the generated password, defaults to 12</span>
<span class="sd"> * @return string random password</span>
<span class="sd"> */</span>
<span class="k">function</span> <span class="nf">password_generate_random_string</span><span class="p">(</span><span class="nv">$password_length</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$symbols</span> <span class="o">=</span> <span class="s2">&quot;abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789&quot;</span><span class="p">;</span>
    <span class="nv">$password</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$symbols_count</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$symbols</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$password_length</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$n</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$symbols_count</span><span class="p">);</span>
        <span class="nv">$password</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$symbols</span><span class="p">[</span><span class="nv">$n</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span><span class="nv">$password</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/miniapp/lib/security.php">code/miniapp/lib/security.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">security_filter_user</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;connexion.php&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">])</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nb">http_redirect</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">security_destroy_user</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">unset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">security_set_user</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$key</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">security_user_is_set</span><span class="p">(</span><span class="nv">$key</span> <span class="o">=</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$key</span><span class="p">]);</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/miniapp/lib/session.php">code/miniapp/lib/session.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">session_safe_start</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$session_id</span> <span class="o">=</span> <span class="nb">session_id</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$session_id</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">session_start</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/miniapp/web/connexion.php">code/miniapp/web/connexion.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/http.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/security.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/session.php&#39;</span><span class="p">);</span>

<span class="c1">// démarrage de la session</span>
<span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// vérification si l&#39;utilisateur n&#39;est pas déjà connecté</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">security_user_is_set</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// redirection de l&#39;utilisateur vers la home page</span>
    <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;home.php&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// connexion à la base de données</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$password</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné d&#39;email&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné de mot de passe&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l&#39;utilisateur a envoyé des données et qu&#39;elles sont valides</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// création de la requête sql</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">&quot;SELECT * FROM user WHERE email = &#39;%s&#39;&quot;</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// vérification du résultat de la requête</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// récupération de la première ligne de résultat</span>
        <span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>

        <span class="c1">// vérification de la première ligne de résultat</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">password_verify</span><span class="p">(</span><span class="nv">$password</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;password_hash&#39;</span><span class="p">]))</span> <span class="p">{</span>
                <span class="c1">// stockage de l&#39;identité de l&#39;utilisateur dans la variable de session</span>
                <span class="nx">security_set_user</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                    <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;prenom&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;prenom&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;nom&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span>
                <span class="p">));</span>

                <span class="c1">// redirection de l&#39;utilisateur vers la home page</span>
                <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;home.php&#39;</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// email correct mais mot de passe incorrect</span>
                <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;votre email ou votre mot de passe est inccorect&#39;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// email incorrect</span>
            <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;votre email ou votre mot de passe est inccorect&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// @debug</span>
        <span class="c1">// echo &quot;erreur d&#39;exécution de la requête sql : &quot; . mysqli_error($link);</span>
        <span class="c1">// exit();</span>

        <span class="c1">// redirection vers une page d&#39;erreur</span>
        <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;erreur-500.php&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;email&quot;&gt;email&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$email</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;password&quot;&gt;mot de passe&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;password&quot; type=&quot;password&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$password</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;se connecter&quot; /&gt;&lt;br /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;p&gt;</span>
<span class="x">    &lt;a href=&quot;inscription.php&quot;&gt;inscription&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">    &lt;a href=&quot;mot-de-passe-oublie.php&quot;&gt;mot de passe oublié&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/miniapp/web/deconnexion.php">code/miniapp/web/deconnexion.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/http.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/security.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/session.php&#39;</span><span class="p">);</span>

<span class="c1">// démarrage de la session</span>
<span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// sécurisation de la page</span>
<span class="nx">security_filter_user</span><span class="p">();</span>

<span class="c1">// destruction des données liées à l&#39;utilisateur en cours</span>
<span class="nx">security_destroy_user</span><span class="p">();</span>

<span class="c1">// destruction de la session en cours</span>
<span class="nb">session_destroy</span><span class="p">();</span>

<span class="c1">// redirection de l&#39;utilisateur vers la page de login</span>
<span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;connexion.php&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/miniapp/web/erreur-500.php">code/miniapp/web/erreur-500.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nb">header</span><span class="p">(</span><span class="s1">&#39;HTTP/1.1 500 Internal Server Error&#39;</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">    &lt;h1&gt;Oups, problème technique :(&lt;/h1&gt;</span>

<span class="x">    &lt;p&gt;Nous sommes désolés, un problème technique est survenu. Nous mettons tout en œuvre pour le régler rapidement. Revenez nous voir ultérieurement.&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/miniapp/web/home.php">code/miniapp/web/home.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/http.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/security.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/session.php&#39;</span><span class="p">);</span>

<span class="c1">// démarrage de la session</span>
<span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// sécurisation de la page</span>
<span class="nx">security_filter_user</span><span class="p">();</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;h1&gt;home&lt;/h1&gt;</span>

<span class="x">&lt;div&gt;</span>
<span class="x">    Bonjour </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;prenom&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;nom&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/div&gt;</span>

<span class="x">&lt;p&gt;</span>
<span class="x">    &lt;a href=&quot;profil.php&quot;&gt;profil&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">    &lt;a href=&quot;deconnexion.php&quot;&gt;déconnexion&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/miniapp/web/index.php">code/miniapp/web/index.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/http.php&#39;</span><span class="p">);</span>

<span class="c1">// redirection de l&#39;utilisateur vers la page de login</span>
<span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;connexion.php&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/miniapp/web/inscription.php">code/miniapp/web/inscription.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/http.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/security.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/session.php&#39;</span><span class="p">);</span>

<span class="c1">// démarrage de la session</span>
<span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// connexion à la base de données</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$password</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$password_confirmation</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;prenom&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;prenom&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$prenom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;prenom&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné de prénom&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;nom&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;nom&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$nom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;nom&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné de nom&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné d&#39;email&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$password</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné de mot de passe&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password_confirmation&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password_confirmation&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span> <span class="p">{</span>
        <span class="nv">$password_confirmation</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;password_confirmation&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;la confirmation de votre mot de passe ne correspond pas&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l&#39;utilisateur a envoyé des données et qu&#39;elles sont valides</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// vérification si cet email n&#39;est pas déjà enregistré</span>
    <span class="c1">// création de la requête sql</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">&quot;SELECT * FROM user WHERE email = &#39;%s&#39;&quot;</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// vérification du résultat de la requête</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// cet email est déjà enregistré, l&#39;utilisateur ne peut pas créer de compte</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;désolé, cet email est déjà utilisé&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// cet email n&#39;est pas encore enregistré, l&#39;utilisateur peut créer un compte</span>

        <span class="c1">// paramètres de la requêtes sql</span>
        <span class="nv">$password_hash</span> <span class="o">=</span> <span class="nb">password_hash</span><span class="p">(</span><span class="nv">$password</span><span class="p">,</span> <span class="nx">PASSWORD_BCRYPT</span><span class="p">);</span>

        <span class="c1">// création de la requête sql</span>
        <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
            <span class="s2">&quot;INSERT INTO user</span>
<span class="s2">            (prenom, nom, email, password_hash)</span>
<span class="s2">            VALUES</span>
<span class="s2">            (&#39;%s&#39;, &#39;%s&#39;, &#39;%s&#39;, &#39;%s&#39;)&quot;</span><span class="p">,</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$password_hash</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="c1">// exécution de la requête sql</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

        <span class="c1">// vérification du résultat de la requête</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// stockage de l&#39;identité de l&#39;utilisateur dans la variable de session</span>
            <span class="nx">security_set_user</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nx">mysqli_insert_id</span><span class="p">(</span><span class="nv">$link</span><span class="p">),</span>
                <span class="s1">&#39;prenom&#39;</span> <span class="o">=&gt;</span> <span class="nv">$prenom</span><span class="p">,</span>
                <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="nv">$nom</span><span class="p">,</span>
                <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="nv">$email</span>
            <span class="p">));</span>

            <span class="c1">// redirection de l&#39;utilisateur vers la home page</span>
            <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;home.php&#39;</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// @debug</span>
            <span class="c1">// echo &quot;erreur d&#39;exécution de la requête sql : &quot; . mysqli_error($link);</span>
            <span class="c1">// exit();</span>

            <span class="c1">// redirection vers une page d&#39;erreur</span>
            <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;erreur-500.php&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;prenom&quot;&gt;prenom&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;prenom&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$prenom</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;nom&quot;&gt;nom&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;nom&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;email&quot;&gt;email&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$email</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;password&quot;&gt;mot de passe&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;password&quot; type=&quot;password&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$password</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;password_confirmation&quot;&gt;confirmation du mot de passe&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;password_confirmation&quot; type=&quot;password&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$password_confirmation</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;s&#39;inscrire&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;p&gt;</span>
<span class="x">    &lt;a href=&quot;connexion.php&quot;&gt;connexion&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">    &lt;a href=&quot;mot-de-passe-oublie.php&quot;&gt;mot de passe oublié&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/miniapp/web/mot-de-passe-oublie.php">code/miniapp/web/mot-de-passe-oublie.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des librairies</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/http.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/password.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/session.php&#39;</span><span class="p">);</span>

<span class="c1">// démarrage de la session</span>
<span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// connexion à la base de données</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$password</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné d&#39;email&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l&#39;utilisateur a envoyé des données et qu&#39;elles sont valides</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// création de la requête sql</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">&quot;SELECT * FROM user WHERE email = &#39;%s&#39;&quot;</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// on ne traite la demande de création d&#39;un nouveau mot de passe que si l&#39;email existe</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// création d&#39;un nouveau mot de passe</span>
        <span class="nv">$password</span> <span class="o">=</span> <span class="nx">password_generate_random_string</span><span class="p">();</span>

        <span class="c1">// paramètres de la requêtes sql</span>
        <span class="nv">$password_hash</span> <span class="o">=</span> <span class="nb">password_hash</span><span class="p">(</span><span class="nv">$password</span><span class="p">,</span> <span class="nx">PASSWORD_BCRYPT</span><span class="p">);</span>

        <span class="c1">// création de la requête sql</span>
        <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
            <span class="s2">&quot;UPDATE user</span>
<span class="s2">            SET password_hash = &#39;%s&#39;</span>
<span class="s2">            WHERE email = &#39;%s&#39;&quot;</span><span class="p">,</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$password_hash</span><span class="p">),</span>
            <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
        <span class="p">);</span>

        <span class="c1">// exécution de la requête sql</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

        <span class="c1">// vérification du résultat de la requête</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$to</span> <span class="o">=</span> <span class="nv">$email</span><span class="p">;</span>
            <span class="nv">$subject</span> <span class="o">=</span> <span class="s1">&#39;Nouveau mot de passe&#39;</span><span class="p">;</span>
            <span class="nv">$text</span> <span class="o">=</span> <span class="s1">&#39;votre nouveau mot de passe : &#39;</span> <span class="o">.</span> <span class="nv">$password</span><span class="p">;</span>
            <span class="nv">$text</span> <span class="o">=</span> <span class="nb">wordwrap</span><span class="p">(</span><span class="nv">$text</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">);</span>

            <span class="c1">// @debug</span>
            <span class="c1">// echo $text . &#39;&lt;br /&gt;&#39;;</span>
            <span class="c1">// exit();</span>

            <span class="c1">// envoi du mail</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">mail</span><span class="p">(</span><span class="nv">$to</span><span class="p">,</span> <span class="nv">$subject</span><span class="p">,</span> <span class="nv">$text</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">// redirection vers une page d&#39;erreur si le mail n&#39;a pas pu être envoyé</span>
                <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;erreur-500.php&#39;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// @debug</span>
            <span class="c1">// echo &#39;erreur d\&#39;exécution de la requête sql : &#39; . mysqli_error($link);</span>
            <span class="c1">// exit();</span>

            <span class="c1">// redirection vers une page d&#39;erreur</span>
            <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;erreur-500.php&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s1">&#39;cet email est introuvable&#39;</span><span class="p">;</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;email&quot;&gt;email&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$email</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;obtenir un nouveau mot de passe&quot; /&gt;&lt;br /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;p&gt;</span>
<span class="x">    &lt;a href=&quot;connexion.php&quot;&gt;connexion&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">    &lt;a href=&quot;inscription.php&quot;&gt;inscription&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/miniapp/web/mysqli-connect.php">code/miniapp/web/mysqli-connect.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// @warning changez les code d&#39;accès pour les adaptez à votre configuration</span>

<span class="c1">// connexion au serveur mysql</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;database&#39;</span><span class="p">);</span>

<span class="c1">// vérification de la connexion</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$link</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="c1">// echo &#39;erreur de connexion à la base de données mysql : &#39; . mysqli_connect_error();</span>
    <span class="c1">// exit();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;location: erreur-500.php&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
    <span class="k">exit</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">mysqli_set_charset</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/miniapp/web/profil.php">code/miniapp/web/profil.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion des libraries</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/http.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/security.php&#39;</span><span class="p">);</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;../lib/session.php&#39;</span><span class="p">);</span>

<span class="c1">// démarrage de la session</span>
<span class="nx">session_safe_start</span><span class="p">();</span>

<span class="c1">// sécurisation de la page</span>
<span class="nx">security_filter_user</span><span class="p">();</span>

<span class="c1">// connexion à la base de données</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="nv">$validation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;prenom&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;prenom&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$prenom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;prenom&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné de prénom&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;nom&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;nom&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$nom</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;nom&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné de nom&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;vous n&#39;avez pas renseigné d&#39;email&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// on ne traite le formulaire que si l&#39;utilisateur a envoyé des données et qu&#39;elles sont valides</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span> <span class="o">&amp;&amp;</span> <span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// vérification si cet email n&#39;est pas déjà enregistré</span>
    <span class="c1">// création de la requête sql</span>
    <span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
        <span class="s2">&quot;UPDATE user</span>
<span class="s2">        SET prenom = &#39;%s&#39;, nom = &#39;%s&#39;, email = &#39;%s&#39;</span>
<span class="s2">        WHERE id = %d&quot;</span><span class="p">,</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">),</span>
        <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
    <span class="p">);</span>

    <span class="c1">// exécution de la requête sql</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

    <span class="c1">// vérification du résultat de la requête</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// stockage de l&#39;identité de l&#39;utilisateur dans la variable de session</span>
        <span class="nx">security_set_user</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
            <span class="s1">&#39;prenom&#39;</span> <span class="o">=&gt;</span> <span class="nv">$prenom</span><span class="p">,</span>
            <span class="s1">&#39;nom&#39;</span> <span class="o">=&gt;</span> <span class="nv">$nom</span><span class="p">,</span>
            <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="nv">$email</span>
        <span class="p">));</span>

        <span class="nv">$messages</span><span class="p">[]</span> <span class="o">=</span> <span class="s2">&quot;votre profil a été mis à jour&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// @debug</span>
        <span class="c1">// echo &quot;erreur d&#39;exécution de la requête sql : &quot; . mysqli_error($link);</span>
        <span class="c1">// exit();</span>

        <span class="c1">// redirection vers une page d&#39;erreur</span>
        <span class="nb">http_redirect</span><span class="p">(</span><span class="s1">&#39;erreur-500.php&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;h1&gt;profil&lt;/h1&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$messages</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;</span>
<span class="cp">&lt;?php</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;id&quot; &gt;id&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input disabled=&quot;disabled&quot; name=&quot;id&quot;  type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;nom&quot; &gt;nom&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;nom&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;nom&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;prenom&quot; &gt;prenom&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;prenom&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;prenom&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;label for=&quot;email&quot; &gt;email&lt;/label&gt;&lt;br /&gt;</span>
<span class="x">    &lt;input name=&quot;email&quot; type=&quot;text&quot; value=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">][</span><span class="s1">&#39;email&#39;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;&lt;br /&gt;</span>

<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;mettre à jour&quot; /&gt;&lt;br /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="x">&lt;p&gt;</span>
<span class="x">    &lt;a href=&quot;home.php&quot;&gt;home&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">    &lt;a href=&quot;deconnexion.php&quot;&gt;déconnexion&lt;/a&gt;&lt;br /&gt;</span>
<span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/mysqli-connect.php">code/mysqli-connect.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// @warning changez les code d&#39;accès pour les adaptez à votre configuration</span>

<span class="c1">// connexion au serveur mysql</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;database&#39;</span><span class="p">);</span>

<span class="c1">// vérification de la connexion</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$link</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s1">&#39;erreur de connexion à la base de données mysql : &#39;</span> <span class="o">.</span> <span class="nx">mysqli_connect_error</span><span class="p">();</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="nx">mysqli_set_charset</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">);</span></code></pre></div>



    

    <a href="code/object1.php">code/object1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// instantiation d&#39;un objet de la classe stdClass</span>
<span class="nv">$un_object</span> <span class="o">=</span> <span class="k">new</span> <span class="k">stdClass</span><span class="p">();</span>

<span class="c1">// affectation de la valeur 42 au membre / champ nommé `foo` de la variable `$un_object`</span>
<span class="nv">$un_object</span><span class="o">-&gt;</span><span class="na">foo</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span></code></pre></div>



    

    <a href="code/object2.php">code/object2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// instantiation d&#39;un objet de la classe DateTime</span>
<span class="nv">$date</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DateTime</span><span class="p">();</span>

<span class="c1">// affichage du résultat l&#39;appel de la méthode `format()` de la variable `$date` avec une chaîne de caractères comme paramètre</span>
<span class="k">echo</span> <span class="nv">$date</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;Y-m-d H:i:s&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/operateurs-affectation.php">code/operateurs-affectation.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affectation d&#39;un nombre entier à la variable `$nombre`</span>
<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// affectation d&#39;un nombre à virgule flottante à la variable `$pi`</span>
<span class="nv">$pi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>

<span class="c1">// affectation d&#39;une chaîne de caractères à la variable `$texte`</span>
<span class="nv">$texte</span> <span class="o">=</span> <span class="s1">&#39;un peu texte&#39;</span><span class="p">;</span>

<span class="c1">// affectation d&#39;un booléen à la variable `$facile`</span>
<span class="nv">$facile</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></code></pre></div>



    

    <a href="code/operateurs-arithmetique.php">code/operateurs-arithmetique.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="k">echo</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// l&#39;opérateur modulo</span>
<span class="c1">// cet opérateur calcul le reste de la division</span>
<span class="k">echo</span> <span class="mi">5</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// opérateur `**` (puissance) disponible depuis php &gt;= 5.6.0</span>
<span class="c1">// pour les versions de php &lt; 5.6.0, utiliser la fonction `pow()`</span>
<span class="k">echo</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/operateurs-concatenation.php">code/operateurs-concatenation.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// exemples de concaténation</span>
<span class="c1">// on peut utiliser indifférement les simples quotes `&#39;` et les doubles quotes `&quot;`</span>

<span class="nv">$morceau1</span> <span class="o">=</span> <span class="s2">&quot;une démonstration&quot;</span><span class="p">;</span>
<span class="nv">$morceau2</span> <span class="o">=</span> <span class="s1">&#39;de concaténation&#39;</span><span class="p">;</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="nv">$morceau1</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$morceau2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$texte</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="nv">$morceau1</span> <span class="o">.</span> <span class="s2">&quot; &quot;</span> <span class="o">.</span> <span class="nv">$morceau2</span><span class="p">;</span>
<span class="k">echo</span> <span class="nv">$texte</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/operateurs-decrementation1.php">code/operateurs-decrementation1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// décrémentation</span>
<span class="nv">$i</span><span class="o">--</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/operateurs-decrementation2.php">code/operateurs-decrementation2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// décrémentation puis affichage</span>
<span class="k">echo</span> <span class="o">--</span><span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affichage puis décrémentation</span>
<span class="k">echo</span> <span class="nv">$i</span><span class="o">--</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/operateurs-incrementation1.php">code/operateurs-incrementation1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// incrémentation</span>
<span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/operateurs-incrementation2.php">code/operateurs-incrementation2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// incrémentation puis affichage</span>
<span class="k">echo</span> <span class="o">++</span><span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affichage puis incrémentation</span>
<span class="k">echo</span> <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/paybox.php">code/paybox.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// code adapté depuis la source:</span>
<span class="c1">//  Exemple d&#39;implémentation - Paybox</span>
<span class="c1">//  http://www1.paybox.com/espace-integrateur-documentation/les-solutions-paybox-direct-et-paybox-direct-plus/exemple-dimplementation/</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot;&gt;</span>
<span class="x">&lt;title&gt;Test Paybox direct&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>
<span class="x">&lt;h1&gt;Test Paybox direct&lt;/h1&gt;</span>
<span class="cp">&lt;?php</span>

<span class="nb">session_start</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;NUMQUESTION&#39;</span><span class="p">]))</span> <span class="p">{</span>
    <span class="c1">// NUMQUESTION doit être compris entre 1 et 2147483647</span>
    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;NUMQUESTION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1000000000&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;NUMQUESTION&#39;</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// initialisation de la session https</span>
<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="s1">&#39;https://preprod-ppps.paybox.com/PPPS.php&#39;</span><span class="p">);</span>

<span class="c1">// Précise que la réponse est souhaitée</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="c1">// Présise que le session est nouvelle</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_COOKIESESSION</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="nv">$postfields</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;VERSION&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;00104&#39;</span><span class="p">,</span>
    <span class="s1">&#39;TYPE&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;00001&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SITE&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;1999888&#39;</span><span class="p">,</span>
    <span class="s1">&#39;RANG&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;32&#39;</span><span class="p">,</span>
    <span class="s1">&#39;IDENTIFIANT&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;107904482&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CLE&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;1999888I&#39;</span><span class="p">,</span>

    <span class="s1">&#39;NUMQUESTION&#39;</span>   <span class="o">=&gt;</span> <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;NUMQUESTION&#39;</span><span class="p">],</span>
    <span class="s1">&#39;MONTANT&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;1000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DEVISE&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;978&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REFERENCE&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;Hello World&#39;</span><span class="p">,</span>

    <span class="s1">&#39;PORTEUR&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;1111222233334444&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DATEVAL&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;1215&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CVV&#39;</span>           <span class="o">=&gt;</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span>

    <span class="s1">&#39;DATEQ&#39;</span>         <span class="o">=&gt;</span> <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;dmY&#39;</span><span class="p">),</span>

    <span class="c1">// &#39;ERRORCODETEST&#39; =&gt; &#39;14&#39;, // Numéro de porteur invalide</span>
    <span class="c1">// &#39;ERRORCODETEST&#39; =&gt; &#39;17&#39;, // Annulation client</span>
    <span class="c1">// &#39;ERRORCODETEST&#39; =&gt; &#39;51&#39;, // Provision insuffisante ou crédit dépassé</span>
    <span class="c1">// &#39;ERRORCODETEST&#39; =&gt; &#39;54&#39;, // Date de validité de la carte dépassée</span>
<span class="p">);</span>

<span class="c1">// Crée la chaine url encodée selon la RFC1738 à partir du tableau de paramètres séparés par le caractère &amp;</span>
<span class="nv">$trame</span> <span class="o">=</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="nv">$postfields</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">);</span>

<span class="c1">// Présise le type de requête HTTP : POST</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_POST</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>

<span class="c1">// Présise le Content-Type</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span><span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span><span class="p">));</span>

<span class="c1">// Ajoute les paramètres</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$trame</span><span class="p">);</span>

<span class="c1">// Envoi de la requête et obtention de la réponse</span>
<span class="nv">$raw_response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nb">parse_str</span><span class="p">(</span><span class="nv">$raw_response</span><span class="p">,</span> <span class="nv">$response</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;&lt;pre&gt;&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;Réponse Paybox direct pour la demande &#39;autorize&#39; &quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$raw_response</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="p">[</span><span class="s1">&#39;CODEREPONSE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;00000&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;Demande traitée avec succès&#39;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;Échec de la demande&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">echo</span> <span class="s2">&quot;&lt;/pre&gt;&quot;</span><span class="p">;</span>

<span class="c1">// fermeture de la session</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>

<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/phpinfo.php">code/phpinfo.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="nb">phpinfo</span><span class="p">();</span></code></pre></div>



    

    <a href="code/portee1.php">code/portee1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale</span>
<span class="c1">// une variable est toujours visible par du code se trouvant au même niveau</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;toto&#39;</span><span class="p">;</span>

<span class="c1">// affiche &quot;toto&quot;</span>
<span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></code></pre></div>



    

    <a href="code/portee2.php">code/portee2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale</span>
<span class="c1">// une variable déclarée dans la portée globale n&#39;est pas visible par du code se trouvant dans une fonction</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;toto&#39;</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche l&#39;erreur &quot;PHP Notice:  Undefined variable: a&quot;</span>
<span class="nx">test</span><span class="p">();</span></code></pre></div>



    

    <a href="code/portee3.php">code/portee3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans une fonction</span>
<span class="c1">// une variable est toujours visible par du code se trouvant au même niveau</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;toto&#39;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche &quot;toto&quot;</span>
<span class="nx">test</span><span class="p">();</span></code></pre></div>



    

    <a href="code/portee4.php">code/portee4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans une fonction</span>
<span class="c1">// une variable déclarée dans une fonction n&#39;est pas visible par du code se trouvant dans la portée globale</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;toto&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">test</span><span class="p">();</span>

<span class="c1">// affiche l&#39;erreur &quot;PHP Notice:  Undefined variable: a&quot;</span>
<span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></code></pre></div>



    

    <a href="code/portee5.php">code/portee5.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale</span>
<span class="c1">// en utilisant le mot clé `global`, une variable déclarée dans la portée globale devient visible par du code se trouvant dans une fonction</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;toto&#39;</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche &quot;toto&quot;</span>
<span class="nx">test</span><span class="p">();</span></code></pre></div>



    

    <a href="code/portee6.php">code/portee6.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans la portée globale</span>
<span class="c1">// en utilisant le variable `$GLOBALS`, une variable déclarée dans la portée globale devient visible par du code se trouvant dans une fonction</span>


<span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;toto&#39;</span><span class="p">;</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// affiche &quot;toto&quot;</span>
<span class="nx">test</span><span class="p">();</span></code></pre></div>



    

    <a href="code/portee7.php">code/portee7.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la variable `$a` est définie dans une fonction</span>
<span class="c1">// en utilisant le mot clé `global`, une variable déclarée dans une fonction devient visible par du code se trouvant dans la portée globale</span>

<span class="k">function</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$a</span><span class="p">;</span>
    <span class="nv">$a</span> <span class="o">=</span> <span class="s1">&#39;toto&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">test</span><span class="p">();</span>

<span class="c1">// affiche &quot;toto&quot;</span>
<span class="k">echo</span> <span class="nv">$a</span><span class="p">;</span>
<span class="k">echo</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span></code></pre></div>



    

    <a href="code/post.php">code/post.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ce document html contient un formulaire avec un champ nommé `titre` dont les données sont envoyées par la méthode `get`</span>
<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span>
<span class="x">    &lt;label for=&quot;titre&quot;&gt;titre&lt;/label&gt;</span>
<span class="x">    &lt;input name=&quot;titre&quot; type=&quot;text&quot; /&gt;</span>
<span class="x">    &lt;input type=&quot;submit&quot; value=&quot;envoyer&quot; /&gt;</span>
<span class="x">&lt;/form&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_POST` est un tableau</span>
<span class="c1">// avant que l&#39;utilisateur ne valide le formulaire la variable `$_POST` ne contient aucune donnée</span>
<span class="c1">// quand l&#39;utilisateur valide le formulaire, on retrouve les données dans la variable `$_POST`, même si c&#39;est une chaîne de caractères vide</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">);</span>
<span class="k">echo</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/require-fatal-error.php">code/require-fatal-error.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d&#39;un fichier qui n&#39;existe pas</span>
<span class="c1">// cette inclusion génère une erreur : &quot;PHP Warning:  require(foo.php): failed to open stream: No such file or directory&quot;</span>
<span class="k">require</span> <span class="s1">&#39;foo.php&#39;</span><span class="p">;</span>

<span class="c1">// le script s&#39;est arrêté</span>
<span class="k">echo</span> <span class="s2">&quot;ce message ne s&#39;affiche pas&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/require_once.php">code/require_once.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion 10 fois du même fichier</span>
<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// avec le mot clé `require_once`, php s&#39;assure que le fichier n&#39;est inclus qu&#39;une seule fois</span>
    <span class="k">require_once</span> <span class="s1">&#39;lib-user-input.php&#39;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/resource.php">code/resource.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// ouverture d&#39;un fichier</span>
<span class="nv">$handle</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">&#39;hello.php&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">);</span>

<span class="c1">// récupération du contenu du fichier avec la fonction `fgets()`</span>
<span class="c1">// boucle continue tant qu&#39;il y a du contenu dans le fichier</span>
<span class="k">while</span> <span class="p">((</span><span class="nv">$buffer</span> <span class="o">=</span> <span class="nb">fgets</span><span class="p">(</span><span class="nv">$handle</span><span class="p">))</span> <span class="o">!==</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage d&#39;un contenu du fichier</span>
    <span class="k">echo</span> <span class="nv">$buffer</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// fermeture du fichier</span>
<span class="nb">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span></code></pre></div>



    

    <a href="code/server.php">code/server.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span>
<span class="c1">// la variable `$_SERVER` est un tableau</span>
<span class="c1">// elle contient des données sur le serveur, le script en cours d&#39;exécution et le navigateur qui a lancé la requête</span>
<span class="c1">// on boucle sur tous les couples clé / valeur de la variable `$_SERVER`</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$_SERVER</span> <span class="k">as</span> <span class="nv">$cle</span> <span class="o">=&gt;</span> <span class="nv">$valeur</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage d&#39;un couple clé / valeur</span>
    <span class="k">echo</span> <span class="nv">$cle</span> <span class="o">.</span> <span class="s1">&#39; = &#39;</span> <span class="o">.</span> <span class="nv">$valeur</span><span class="p">;</span>

    <span class="c1">// affichage d&#39;un saut de ligne html</span>
    <span class="c1">// note : br = break = cassure</span>
    <span class="k">echo</span> <span class="s1">&#39;&lt;br /&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/session-destroy.php">code/session-destroy.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// démarrage ou récupération d&#39;une session en cours pour le navigateur qui a fait la requête</span>
<span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// destruction de tout le contenu de la variable de session</span>
<span class="nb">session_destroy</span><span class="p">();</span></code></pre></div>



    

    <a href="code/session-get.php">code/session-get.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// démarrage ou récupération d&#39;une session en cours pour le navigateur qui a fait la requête</span>
<span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// inspection du contenu de la variable de session</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span></code></pre></div>



    

    <a href="code/session-set.php">code/session-set.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// démarrage ou récupération d&#39;une session en cours pour le navigateur qui a fait la requête</span>
<span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// inspection du contenu de la variable de session</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span>

<span class="c1">// la variable `$_SESSION` est un tableau</span>
<span class="c1">// affectation de couples clé / valeur à la variable `$_SESSION`</span>
<span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">&#39;baz&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// inspection du contenu de la variable de session</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">);</span></code></pre></div>



    

    <a href="code/sql-insert.php">code/sql-insert.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;Bar&#39;</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;foo.bar@baz.com&#39;</span><span class="p">;</span>

<span class="c1">// création d&#39;une requête sql</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;</span>
<span class="s2">INSERT INTO user</span>
<span class="s2">(prenom, nom, email)</span>
<span class="s2">VALUES</span>
<span class="s2">(&#39;&quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;, &#39;&quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;, &#39;&quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;)</span>
<span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// récupération de la clé primaire de la dernière ligne insérée</span>
    <span class="nv">$id</span> <span class="o">=</span> <span class="nx">mysqli_insert_id</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>

    <span class="c1">// affichage d&#39;un message de confirmation</span>
    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;utilisateur inséré dans la base de données avec l&#39;id </span><span class="si">$id</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s2">&quot;erreur d&#39;exécution de la requête sql : &quot;</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;la requête sql : &quot;</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/sql-insert-sprintf.php">code/sql-insert-sprintf.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;Bar&#39;</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;foo.bar@baz.com&#39;</span><span class="p">;</span>

<span class="c1">// création d&#39;une requête sql</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
    <span class="s2">&quot;INSERT INTO user</span>
<span class="s2">    (prenom, nom, email)</span>
<span class="s2">    VALUES</span>
<span class="s2">    (&#39;%s&#39;, &#39;%s&#39;, &#39;%s&#39;)&quot;</span><span class="p">,</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// exécution de la requête sql</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// récupération de la clé primaire de la dernière ligne insérée</span>
    <span class="nv">$id</span> <span class="o">=</span> <span class="nx">mysqli_insert_id</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>

    <span class="c1">// affichage d&#39;un message de confirmation</span>
    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;utilisateur inséré dans la base de données avec l&#39;id </span><span class="si">$id</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s2">&quot;erreur d&#39;exécution de la requête sql : &quot;</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;la requête sql : &quot;</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/sql-select.php">code/sql-select.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="c1">// création d&#39;une requête sql</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;</span>
<span class="s2">SELECT *</span>
<span class="s2">FROM user</span>
<span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s2">&quot;erreur d&#39;exécution de la requête sql : &quot;</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;la requête sql : &quot;</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;nombre de résultats : </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>

<span class="x">&lt;table&gt;</span>
<span class="x">    &lt;th&gt;</span>
<span class="x">        &lt;td&gt;id&lt;/td&gt;</span>
<span class="x">        &lt;td&gt;email&lt;/td&gt;</span>
<span class="x">    &lt;/th&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;tr&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span><span class="cp">?&gt;</span><span class="x">&lt;/td&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span><span class="cp">?&gt;</span><span class="x">&lt;/td&gt;</span>
<span class="x">    &lt;/tr&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endwhile</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/table&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;pas de résultat&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/sql-select-single.php">code/sql-select-single.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;foo.bar@baz.com&#39;</span><span class="p">;</span>

<span class="c1">// création d&#39;une requête sql</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;</span>
<span class="s2">SELECT *</span>
<span class="s2">FROM user</span>
<span class="s2">WHERE email = &#39;&quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;</span>
<span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s2">&quot;erreur d&#39;exécution de la requête sql : &quot;</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;la requête sql : &quot;</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;nombre de résultats : </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>

<span class="x">&lt;table&gt;</span>
<span class="x">    &lt;th&gt;</span>
<span class="x">        &lt;td&gt;id&lt;/td&gt;</span>
<span class="x">        &lt;td&gt;email&lt;/td&gt;</span>
<span class="x">    &lt;/th&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;tr&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span><span class="cp">?&gt;</span><span class="x">&lt;/td&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span><span class="cp">?&gt;</span><span class="x">&lt;/td&gt;</span>
<span class="x">    &lt;/tr&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endwhile</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/table&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;pas de résultat&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/sql-select-single-sprintf.php">code/sql-select-single-sprintf.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;foo.bar@baz.com&#39;</span><span class="p">;</span>

<span class="c1">// création d&#39;une requête sql</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
    <span class="s2">&quot;SELECT *</span>
<span class="s2">    FROM user</span>
<span class="s2">    WHERE email = &#39;%s&#39;&quot;</span><span class="p">,</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// exécution de la requête sql</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s2">&quot;erreur d&#39;exécution de la requête sql : &quot;</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;la requête sql : &quot;</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;nombre de résultats : </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">num_rows</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>

<span class="x">&lt;table&gt;</span>
<span class="x">    &lt;th&gt;</span>
<span class="x">        &lt;td&gt;id&lt;/td&gt;</span>
<span class="x">        &lt;td&gt;email&lt;/td&gt;</span>
<span class="x">    &lt;/th&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nx">mysqli_fetch_assoc</span><span class="p">(</span><span class="nv">$result</span><span class="p">))</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;tr&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span><span class="cp">?&gt;</span><span class="x">&lt;/td&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">])</span><span class="cp">?&gt;</span><span class="x">&lt;/td&gt;</span>
<span class="x">    &lt;/tr&gt;</span>
<span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">endwhile</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;/table&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;p&gt;pas de résultat&lt;/p&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/sql-update.php">code/sql-update.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql</span>
<span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">&#39;lorem&#39;</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;ipsum&#39;</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;lorem.ipsum@dolores.com&#39;</span><span class="p">;</span>

<span class="c1">// création d&#39;une requête sql</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;</span>
<span class="s2">UPDATE user</span>
<span class="s2">SET</span>
<span class="s2">    prenom = &#39;&quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;,</span>
<span class="s2">    nom = &#39;&quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;,</span>
<span class="s2">    email = &#39;&quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;&#39;</span>
<span class="s2">WHERE id = &quot;</span> <span class="o">.</span> <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span>
<span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// exécution de la requête sql</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;utilisateur mis à jour dans la base de données&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s2">&quot;erreur d&#39;exécution de la requête sql : &quot;</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;la requête sql : &quot;</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/sql-update-sprintf.php">code/sql-update-sprintf.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// connection à la bdd</span>
<span class="k">require</span><span class="p">(</span><span class="s1">&#39;mysqli-connect.php&#39;</span><span class="p">);</span>

<span class="c1">// paramètres de la requête sql</span>
<span class="nv">$id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$prenom</span> <span class="o">=</span> <span class="s1">&#39;lorem&#39;</span><span class="p">;</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s1">&#39;ipsum&#39;</span><span class="p">;</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="s1">&#39;lorem.ipsum@dolores.com&#39;</span><span class="p">;</span>

<span class="c1">// création d&#39;une requête sql</span>
<span class="nv">$sql</span> <span class="o">=</span> <span class="nb">sprintf</span><span class="p">(</span>
    <span class="s2">&quot;UPDATE user</span>
<span class="s2">    SET prenom = &#39;%s&#39;, nom = &#39;%s&#39;, email = &#39;%s&#39;</span>
<span class="s2">    WHERE id = &#39;%d&#39;&quot;</span><span class="p">,</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$prenom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$nom</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$email</span><span class="p">),</span>
    <span class="nx">mysqli_real_escape_string</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$id</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">// exécution de la requête sql</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nx">mysqli_query</span><span class="p">(</span><span class="nv">$link</span><span class="p">,</span> <span class="nv">$sql</span><span class="p">);</span>

<span class="c1">// vérification du résultat</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$message</span> <span class="o">=</span> <span class="s2">&quot;utilisateur mis à jour dans la base de données&quot;</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// @dev pendant le développement, on peut afficher l&#39;erreur de connexion</span>
    <span class="k">echo</span> <span class="s2">&quot;erreur d&#39;exécution de la requête sql : &quot;</span> <span class="o">.</span> <span class="nx">mysqli_error</span><span class="p">(</span><span class="nv">$link</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;la requête sql : &quot;</span> <span class="o">.</span> <span class="nv">$sql</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">;</span>
    <span class="k">exit</span><span class="p">();</span>

    <span class="c1">// @prod quand le site est en production, on redirige l&#39;utilisateur vers une page d&#39;erreur</span>
    <span class="c1">// header(&#39;location: erreur-500.php&#39;, true, 302);</span>
    <span class="c1">// exit();</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">&lt;meta charset=&quot;utf-8&quot; /&gt;</span>
<span class="x">&lt;title&gt;&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="x">&lt;p&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span></code></pre></div>



    

    <a href="code/string1.php">code/string1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affectation</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s2">&quot;Php&quot;</span><span class="p">;</span>
<span class="nv">$salutation</span> <span class="o">=</span> <span class="s2">&quot;Bonjour&quot;</span><span class="p">;</span>

<span class="c1">// concaténation et affichage</span>
<span class="k">echo</span> <span class="nv">$salutation</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// concaténation et affectation</span>
<span class="nv">$phrase</span> <span class="o">=</span> <span class="nv">$salutation</span> <span class="o">.</span> <span class="s1">&#39; &#39;</span> <span class="o">.</span> <span class="nv">$nom</span><span class="p">;</span>

<span class="c1">// affichage</span>
<span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affichage</span>
<span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">$nom</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affectation</span>
<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;Salut </span><span class="si">$nom</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// affichage</span>
<span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affectation sans interpolation</span>
<span class="nv">$phrase</span> <span class="o">=</span> <span class="s1">&#39;Salut $nom&#39;</span><span class="p">;</span>

<span class="c1">// affichage</span>
<span class="k">echo</span> <span class="nv">$phrase</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/string2.php">code/string2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affectation</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s2">&quot;Php&quot;</span><span class="p">;</span>

<span class="c1">// affichage</span>
<span class="c1">// utilisation du signe d&#39;échappement `\` pour afficher des guillemets simples</span>
<span class="k">echo</span> <span class="s1">&#39;Bonjour \&#39;Php\&#39;&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// affichage</span>
<span class="c1">// utilisation du signe d&#39;échappement `\` pour afficher des doubles guillemets</span>
<span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="se">\&quot;</span><span class="s2">Php</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affichage</span>
<span class="c1">// utilisation du signe d&#39;échappement `\` pour afficher des guillemets simples</span>
<span class="k">echo</span> <span class="s1">&#39;Bonjour \&#39;$nom\&#39;&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// interpolation et affichage</span>
<span class="c1">// utilisation du signe d&#39;échappement `\` pour afficher des doubles guillemets</span>
<span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="se">\&quot;</span><span class="si">$nom\</span><span class="s2">&quot;&quot;;</span>
<span class="s2">echo PHP_EOL;</span></code></pre></div>



    

    <a href="code/string3.php">code/string3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// affectation</span>
<span class="nv">$nom</span> <span class="o">=</span> <span class="s2">&quot;Php&quot;</span><span class="p">;</span>

<span class="c1">// interpolation et affichage</span>
<span class="c1">// utilisation du signe d&#39;échappement `\` pour afficher un retour à la ligne</span>
<span class="k">echo</span> <span class="s2">&quot;Bonjour Php</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>

<span class="c1">// affichage sans interpolation</span>
<span class="c1">// le retour à la ligne n&#39;est pas affiché, la chaîne de caractère est littéralement affichée</span>
<span class="k">echo</span> <span class="s1">&#39;Bonjour Php\n&#39;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// attention : cette instruction n&#39;affichera pas `Bonjour Php5.6`</span>
<span class="c1">// elle affichera `Bonjour .6` en générant une erreur `PHP Notice:  Undefined variable: nom5`</span>
<span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">$nom5</span><span class="s2">.6&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// pour afficher `Bonjour Php5.6` il faut utiliser les signes `{` (accolade ouvrante) et `}` (accolade fermante) pour indiquer à php les limites du nom de la variable</span>
<span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">{</span><span class="nv">$nom</span><span class="si">}</span><span class="s2">5.6&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

<span class="c1">// mais on peut aussi utiliser la concaténation</span>
<span class="k">echo</span> <span class="s2">&quot;Bonjour </span><span class="si">$nom</span><span class="s2">&quot;</span> <span class="o">.</span> <span class="s2">&quot;5.6&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/switch1.php">code/switch1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// comparaison d&#39;une variable et d&#39;une suite de nombres entiers</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="nv">$nombre</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;le nombre est égale à 0</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;le nombre est égale à 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;le nombre est égale à 2</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">default</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;le nombre est différent de 0, 1 ou 2</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/switch2.php">code/switch2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de la valeur booléenne `true` à une suite de comparaisons</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="nv">$nombre</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;le nombre est plus grand que 5</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$nombre</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;le nombre est plus petit que 5</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">default</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;le nombre est égal à 5</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/switch3.php">code/switch3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de la valeur booléenne `true` à une suite de comparaisons</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;a n&#39;est pas vrai mais b est vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;a est vrai mais b n&#39;est pas vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;a et b sont vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;ni a ni b ne sont vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/switch4.php">code/switch4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// comparaison de la valeur booléenne `true` à une suite de comparaisons</span>

<span class="nv">$a</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nv">$b</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="k">switch</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;a n&#39;est pas vrai mais b est vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;ou a est vrai mais b n&#39;est pas vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="nv">$b</span><span class="o">:</span>
<span class="k">case</span> <span class="o">!</span><span class="nv">$a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$b</span><span class="o">:</span>
    <span class="k">echo</span> <span class="s2">&quot;a et b sont vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s2">&quot;ou ni a ni b ne sont vrai</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/syntaxe1.php">code/syntaxe1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// ceci est une ligne de commentaire</span>

<span class="cm">/* ceci est un bloc de commentaires */</span>

<span class="cm">/*</span>
<span class="cm">ceci est un autre bloc de commentaires</span>
<span class="cm">ceci est un autre bloc de commentaires</span>
<span class="cm">ceci est un autre bloc de commentaires</span>
<span class="cm">*/</span>

<span class="c1">// echo &#39;foo&#39;;</span>

<span class="cm">/*</span>
<span class="cm">echo &#39;bar&#39;;</span>
<span class="cm">echo &#39;baz&#39;;</span>
<span class="cm">*/</span></code></pre></div>



    

    <a href="code/syntaxe2.php">code/syntaxe2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// style camelCase</span>
<span class="nv">$ceChevalCourtVite</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="c1">// style snake_case</span>
<span class="nv">$ce_cheval_court_vite</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// style camelCase</span>
<span class="nv">$ilNeFaitPasBeau</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>

<span class="c1">// style snake_case</span>
<span class="nv">$il_ne_fait_pas_beau</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></code></pre></div>



    

    <a href="code/transtypage-booleen.php">code/transtypage-booleen.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// transtypage en booléen</span>

<span class="c1">// première méthode de transtypage</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">&quot;foo&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">bool</span><span class="p">)</span> <span class="nv">$valeur</span><span class="p">);</span>

<span class="c1">// deuxième méthode de transtypage avec une fonction</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">&quot;foo&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span>

<span class="nv">$valeur</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">boolval</span><span class="p">(</span><span class="nv">$valeur</span><span class="p">));</span></code></pre></div>



    

    <a href="code/transtypage-float.php">code/transtypage-float.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// transtypage en nombre à virgule flottante</span>

<span class="c1">// première méthode de transtypage</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;3.14&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;42&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">&quot;3.14 + 3.14&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$calcul</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;Bonjour Php&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">float</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="c1">// deuxième méthode de transtypage avec une fonction</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;3.14&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;42&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">&quot;3.14 + 3.14&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$calcul</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;Bonjour Php&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">floatval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span></code></pre></div>



    

    <a href="code/transtypage-integer.php">code/transtypage-integer.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// transtypage en nombre entier</span>

<span class="c1">// première méthode de transtypage</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;42&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;3.14&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">&quot;42 + 42&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$calcul</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;Bonjour Php&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">((</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$phrase</span><span class="p">);</span>

<span class="c1">// deuxième méthode de transtypage avec une fonction</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;42&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="s2">&quot;3.14&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">));</span>

<span class="nv">$calcul</span> <span class="o">=</span> <span class="s2">&quot;42 + 42&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$calcul</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;Bonjour Php&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span>

<span class="nv">$phrase</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$phrase</span><span class="p">));</span></code></pre></div>



    

    <a href="code/user-input.php">code/user-input.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// inclusion d&#39;une librairie pour ajouter des fonctionnalités</span>
<span class="k">require</span> <span class="s1">&#39;lib-user-input.php&#39;</span><span class="p">;</span>

<span class="c1">// utilisation des fonctions de cette librairie</span>
<span class="nv">$user_input</span> <span class="o">=</span> <span class="nx">user_input_get_answer</span><span class="p">(</span><span class="s1">&#39;entrez quelque chose :&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;vous avez entré &#39;</span><span class="si">$user_input</span><span class="s2">&#39;&quot;</span><span class="p">;</span>
<span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span></code></pre></div>



    

    <a href="code/var_dump.php">code/var_dump.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// la fonction `var_dump()` permet d&#39;inspecter le contenu d&#39;une variable</span>
<span class="c1">// @warning attention il s&#39;agit d&#39;une fonction qui sert au déboggage, pas à afficher des informations à l&#39;utilisateur</span>

<span class="nv">$nombre</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">);</span>

<span class="nv">$pi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$pi</span><span class="p">);</span>

<span class="nv">$texte</span> <span class="o">=</span> <span class="s1">&#39;une chaîne de caractères&#39;</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$texte</span><span class="p">);</span>

<span class="nv">$boolean</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$boolean</span><span class="p">);</span>

<span class="nv">$tableau</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$tableau</span><span class="p">);</span>

<span class="nv">$objet</span> <span class="o">=</span> <span class="k">new</span> <span class="k">stdClass</span><span class="p">();</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$objet</span><span class="p">);</span>

<span class="nv">$handle</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>
<span class="nb">fclose</span><span class="p">(</span><span class="nv">$handle</span><span class="p">);</span>

<span class="nv">$f</span> <span class="o">=</span> <span class="k">function</span><span class="p">()</span> <span class="p">{};</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$f</span><span class="p">);</span></code></pre></div>



    

    <a href="code/while1.php">code/while1.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable qui servira d&#39;index / compteur</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// itération d&#39;une boucle de type `while` de 0 à 10 (non inclus)</span>
<span class="k">while</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation de la variable</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/while2.php">code/while2.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable qui servira d&#39;index / compteur</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// itération d&#39;une boucle de type `while` tant que la variable `$boucler == true`</span>
<span class="k">while</span> <span class="p">(</span><span class="k">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable `$i`</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation de la variable `$i`</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

    <span class="c1">// vérification de la valeur de la variable `$i`</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// on arrête la boucle avec le mot clé `break`</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/while3.php">code/while3.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable qui servira d&#39;index / compteur</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// initialisation d&#39;une variable qui servira à controler la boucle</span>
<span class="nv">$boucler</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="c1">// itération d&#39;une boucle de type `while` tant que la variable `$boucler == true`</span>
<span class="k">while</span> <span class="p">(</span><span class="nv">$boucler</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// affichage de la variable `$i`</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

    <span class="c1">// incrémentation de la variable `$i`</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>

    <span class="c1">// vérification de la valeur de la variable `$i`</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">==</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// en affectant la valeur `false` à la variable `$boucle`, on arrête la boucle</span>
        <span class="nv">$boucler</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/while4.php">code/while4.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// initialisation d&#39;une variable qui servira d&#39;index / compteur</span>
<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// la boucle ne sera jamais exécutée</span>
<span class="k">while</span> <span class="p">(</span><span class="k">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$i</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="nv">$i</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>



    

    <a href="code/while5.php">code/while5.php</a>

    <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// exemple d&#39;utilisation de la boucle `while` pour récupérer l&#39;entrée d&#39;un utilisateur</span>

<span class="k">require</span> <span class="s1">&#39;lib-user-input.php&#39;</span><span class="p">;</span>

<span class="nv">$loop</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

<span class="k">while</span> <span class="p">(</span><span class="nv">$loop</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$age</span> <span class="o">=</span> <span class="nx">user_input_get_answer</span><span class="p">(</span><span class="s1">&#39;quel âge avez-vous ?&#39;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">is_numeric</span><span class="p">(</span><span class="nv">$age</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&quot;vous avez </span><span class="si">$age</span><span class="s2"> ans&quot;</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
        <span class="nv">$loop</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s2">&quot;vous n&#39;avez pas répondu à la question&quot;</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>



    </article>
</section>

</body>
</html>

