<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"><!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Développement web côté serveur avec PHP</title>
<meta name="description" content="">

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0" />

<link href="css/vendor/normalize.css" rel="stylesheet" type="text/css" />
<link href="css/vendor/foundation.css" rel="stylesheet" type="text/css" />
<link href="css/vendor/pygmentize.css" rel="stylesheet" type="text/css" />
<!-- <link href="css/vendor/syntax.css" rel="stylesheet" type="text/css" /> -->
<link href="css/style.css" rel="stylesheet" type="text/css" />

<script src="js/vendor/modernizr.js"></script>

</head>
<body>
<!--[if lt IE 7]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<section class="row">
    <article class="columns small-12">

        <h1><a href="index.html">Développement web côté serveur avec PHP</a></h1>


<h2 id="les-formulaires">les formulaires</h2>

<p>Les champs suivant ne renvoient qu’une seule valeur :</p>

<ul>
  <li>champ <code class="highlighter-rouge">input</code> de type <code class="highlighter-rouge">text</code></li>
  <li>champ <code class="highlighter-rouge">input</code> de type <code class="highlighter-rouge">password</code></li>
  <li>champ <code class="highlighter-rouge">input</code> de type <code class="highlighter-rouge">hidden</code></li>
  <li>champ <code class="highlighter-rouge">input</code> de type <code class="highlighter-rouge">radio</code></li>
  <li>champ <code class="highlighter-rouge">input</code> de type <code class="highlighter-rouge">file</code></li>
  <li>champ <code class="highlighter-rouge">select</code></li>
  <li>champ <code class="highlighter-rouge">textarea</code></li>
</ul>

<p>Les champs suivant renvoient plusieurs valeurs sous forme de tableau :</p>

<ul>
  <li>champ <code class="highlighter-rouge">input</code> de type <code class="highlighter-rouge">checkbox</code></li>
  <li>champ <code class="highlighter-rouge">select</code> avec l’attribut <code class="highlighter-rouge">multiple="multiple"</code></li>
</ul>

<p><strong>Note</strong> : tous les champs peuvent être configurés pour renvoyer plusieurs valeurs sous forme de tableau en ajoutant des crochets à l’attribut <code class="highlighter-rouge">name</code>.</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"auteurs[]"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">""</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"auteurs[]"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">""</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"auteurs[]"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">""</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
</code></pre>
</div>

<p>Voir aussi :</p>

<ul>
  <li><a href="variables-predefinies.html">les variables prédéfinies (<code class="highlighter-rouge">$_GET</code>, <code class="highlighter-rouge">$_POST</code>, <code class="highlighter-rouge">$_SESSION</code>, …)</a></li>
</ul>

<p><a href="code/form-validation1.php">code/form-validation1.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d'un formulaire envoyé (avec la méthode post) par l'utilisateur
// @warning ce script ne permet pas de faire une validation complète, il montre seulement comment utiliser les fonctions `isset()` et `empty()`
</span>
<span class="c1">// on définit des valeurs par défaut que l'utilisateur verra avant d'avoir envoyé le formulaire
</span><span class="nv">$titre</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>

<span class="c1">// vérifions que l'utilisateur a bien soumis le formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// vérifions que :
</span>    <span class="c1">// - le couple clé / valeur `$_POST['titre']` existe bien avec la fonction `isset()`
</span>    <span class="c1">// - la valeur `$_POST['titre']` n'est pas vide avec la fonction `empty()` et l'opérateur de négation `!`
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// l'utilisateur a bien envoyé une valeur et celle-ci est non vide
</span>
        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$titre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>

        <span class="c1">// affectation d'un nouveau message pour l'utilsateur
</span>        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$titre</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-validation2.php">code/form-validation2.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d'un formulaire envoyé (avec la méthode post) par l'utilisateur
</span>
<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$titre</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$auteur</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="nv">$description</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'titre'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$titre</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ 'auteur'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$auteur</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ optionnel 'description'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$description</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// ce champ est optionnel, du coup même s'il n'est pas rempli, on ne déclare pas d'erreur avec `$validation = false;`
</span>
    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>        <span class="c1">// affectation d'un message de confirmation
</span>        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$message</span> <span class="o">=</span> <span class="s2">"vous n'avez pas rempli certains champs"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$message</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$titre</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">"auteur"</span><span class="o">&gt;</span><span class="nx">auteur</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"auteur"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$auteur</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">"description"</span><span class="o">&gt;</span><span class="nx">description</span> <span class="p">(</span><span class="nx">champ</span> <span class="nx">optionnel</span><span class="p">)</span><span class="o">&lt;/</span><span class="nx">label</span><span class="o">&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">textarea</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"description"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$description</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/textarea&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-validation3.php">code/form-validation3.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>
<span class="c1">// ce script vous montre comment récupérer et vérifier les données d'un formulaire envoyé (avec la méthode post) par l'utilisateur
</span>
<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'auteur'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'auteur'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'titre'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ 'auteur'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir l'auteur"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// validation du champ optionnel 'description'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'description'</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="c1">// ce champ est optionnel, du coup même s'il n'est pas rempli, on ne déclare pas d'erreur avec `$validation = false;`
</span>
    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>        <span class="c1">// affectation d'un message de confirmation
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['titre']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'auteur'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"auteur"</span><span class="nt">&gt;</span>auteur<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"auteur"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['auteur']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'description'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"description"</span><span class="nt">&gt;</span>description<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">textarea</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"description"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'description'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/textarea&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-input-text.php">code/form-input-text.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `text` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-input-password.php">code/form-input-password.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `password` ne renvoient qu'une seule valeur
// les champs `input` de type `password` se comportent comme des champs `input` de type `text`
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'mot_de_passe'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'mot_de_passe'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le mot de passe"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"mot_de_passe"</span><span class="nt">&gt;</span>mot de passe<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"mot_de_passe"</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'mot_de_passe'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-input-hidden.php">code/form-input-hidden.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `hidden` ne renvoient qu'une seule valeur
// les champs `input` de type `hidden` ne s'affichent pas à l'écran mais leurs données sont envoyées
// les champs `input` de type `hidden` se comportent comme des champs `input` de type `text`
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'code_isbn'</span> <span class="o">=&gt;</span> <span class="s1">'ISBN-X-XXX-XXXXX-X'</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"une erreur s'est produite, le code ISBN n'est pas précisé"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"code_isbn"</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'code_isbn'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-input-radio.php">code/form-input-radio.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `radio` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `input` de type 'radio'
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser l'aliment"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>aliment<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">checked</span><span class="o">=</span><span class="s2">"checked"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliment"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"radio"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliment"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"radio"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-input-checkbox.php">code/form-input-checkbox.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `checkbox` peuvent renvoyer une ou plusieurs valeurs sous la forme d'un tableau
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `input` de type 'checkbox'
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir les aliments"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliments"</span><span class="nt">&gt;</span>aliments<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$aliment</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">checked</span><span class="o">=</span><span class="s2">"checked"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"checkbox"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"checkbox"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-input-file.php">code/form-input-file.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `file` permettent de pousser (uploader) un fichier vers un serveur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// @note les champs `input` de type `file` ne peuvent pas avoir de valeur par défaut
</span>
<span class="c1">// les fichiers envoyés seront enregistrés dans le dossier courant
</span><span class="nv">$upload_dir</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="p">;</span>

<span class="c1">// messages par défaut
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fichier'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// vérification des fichiers envoyés
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'fichier'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'error'</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_OK</span><span class="o">:</span>
            <span class="c1">// il n'y a pas d'erreur
</span>            <span class="c1">// on peut stocker le fichier
</span>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">],</span> <span class="nv">$upload_dir</span> <span class="o">.</span> <span class="s1">'/'</span> <span class="o">.</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]))</span> <span class="p">{</span>
                <span class="c1">// il y a une erreur
</span>                <span class="c1">// php n'est pas parvenu à stocker le fichier
</span>                <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="c1">// affectation d'un message d'erreur
</span>                <span class="nv">$messages</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"une erreur est survenue, le fichier '</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]}</span><span class="s1">' n'</span><span class="nx">a</span> <span class="nx">pas</span> <span class="nx">pu</span> <span class="err">ê</span><span class="nx">tre</span> <span class="nx">enregistr</span><span class="err">é</span><span class="s2">";
            }
            break;
        case UPLOAD_ERR_NO_FILE:
            // il y a une erreur
            // l'utilisateur n'a pas envoyé de fichier
            </span><span class="nv">$validation</span><span class="s2"> = false;
            // affectation d'un message d'erreur
            </span><span class="nv">$messages['fichier']</span><span class="s2"> = "</span><span class="nx">merci</span> <span class="nx">de</span> <span class="nx">s</span><span class="err">é</span><span class="nx">lectionner</span> <span class="nx">un</span> <span class="nx">fichier</span><span class="s2">";
            break;
        default:
            // il y a une erreur
            </span><span class="nv">$validation</span><span class="s2"> = false;
            // affectation d'un message d'erreur
            </span><span class="nv">$messages['fichier']</span><span class="s2"> = "</span><span class="nx">une</span> <span class="nx">erreur</span> <span class="nx">est</span> <span class="nx">survenue</span><span class="p">,</span> <span class="nx">le</span> <span class="nx">fichier</span> <span class="s1">'{$_FILES['</span><span class="nx">fichier</span><span class="s1">']['</span><span class="nx">name</span><span class="s1">']}'</span> <span class="nx">n</span><span class="s1">'a pas pu être enregistré";
        }
    }

    // vérification de la validation
    if ($validation) {
        // il n'</span><span class="nx">y</span> <span class="nx">a</span> <span class="nx">pas</span> <span class="nx">d</span><span class="s1">'erreurs
        // affectation d'</span><span class="nx">un</span> <span class="nx">message</span> <span class="nx">de</span> <span class="nx">confirmation</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="si">}</span><span class="s2"> else {
        // il y a des erreurs
        // affectation d'un message d'erreur
        </span><span class="nv">$messages['formulaire']</span><span class="s2"> = "</span><span class="nx">merci</span> <span class="nx">de</span> <span class="nx">remplir</span> <span class="nx">le</span> <span class="nx">formulaire</span> <span class="nx">et</span> <span class="nx">de</span> <span class="nx">le</span> <span class="nx">valider</span><span class="s2">";
    }
}

?&gt;&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="s2">" /&gt;
&lt;title&gt;&lt;/title&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;div&gt;&lt;?php echo htmlentities(</span><span class="nv">$messages['formulaire']</span><span class="s2">) ?&gt;&lt;/div&gt;

&lt;?php // il faut utiliser l'attribut `enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">"` pour que le fichier puisse être envoyé ?&gt;
&lt;form action="" method="</span><span class="nx">post</span><span class="s2">" enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">" &gt;
    &lt;div&gt;&lt;?php echo htmlentities(</span><span class="nv">$messages['fichier']</span><span class="s2">) ?&gt;&lt;/div&gt;
    &lt;label for="</span><span class="nx">fichier</span><span class="s2">"&gt;fichier&lt;/label&gt;&lt;br /&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;

    &lt;input type="</span><span class="nx">submit</span><span class="s2">" value="</span><span class="nx">envoyer</span><span class="s2">" /&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-input-file-multi.php">code/form-input-file-multi.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `input` de type `file` permettent de pousser (uploader) un fichier vers un serveur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// @note les champs `input` de type `file` ne peuvent pas avoir de valeur par défaut
</span>
<span class="c1">// les fichiers envoyés seront enregistrés dans le dossier courant
</span><span class="nv">$upload_dir</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="p">;</span>

<span class="c1">// messages par défaut
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fichier'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// vérification des fichiers envoyés
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'fichier'
</span>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s2">"fichier"</span><span class="p">][</span><span class="s2">"error"</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$index</span> <span class="o">=&gt;</span> <span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nv">$error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_OK</span><span class="o">:</span>
            <span class="c1">// il n'y a pas d'erreur
</span>            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nx">UPLOAD_ERR_NO_FILE</span><span class="o">:</span>
            <span class="c1">// il y a une erreur
</span>            <span class="c1">// l'utilisateur n'a pas envoyé de fichier
</span>            <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="c1">// affectation d'un message d'erreur
</span>            <span class="nv">$messages</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="nv">$index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de sélectionner un fichier"</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="c1">// il y a une erreur
</span>            <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="c1">// affectation d'un message d'erreur
</span>            <span class="nv">$messages</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="nv">$index</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"une erreur est survenue, le fichier '</span><span class="si">{</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'fichier'</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]}</span><span class="s1">' n'</span><span class="nx">a</span> <span class="nx">pas</span> <span class="nx">pu</span> <span class="err">ê</span><span class="nx">tre</span> <span class="nx">enregistr</span><span class="err">é</span><span class="s2">";
        }
    }

    // vérification intermédiaire de la validation
    if (</span><span class="nv">$validation</span><span class="s2">) {
        // il n'y a pas d'erreurs

        // on peut stocker les fichiers
        foreach (</span><span class="nv">$_FILES["fichier"]["error"]</span><span class="s2"> as </span><span class="nv">$index</span><span class="s2"> =&gt; </span><span class="nv">$error</span><span class="s2">) {
            if (!move_uploaded_file(</span><span class="nv">$_FILES['fichier']['tmp_name'][$index]</span><span class="s2">, </span><span class="nv">$upload_dir</span><span class="s2"> . '/' . </span><span class="nv">$_FILES['fichier']['name'][$index]</span><span class="s2">)) {
                // il y a une erreur
                // php n'est pas parvenu à stocker le fichier
                </span><span class="nv">$validation</span><span class="s2"> = false;
                // affectation d'un message d'erreur
                </span><span class="nv">$messages['fichier'][$index]</span><span class="s2"> = "</span><span class="nx">une</span> <span class="nx">erreur</span> <span class="nx">est</span> <span class="nx">survenue</span><span class="p">,</span> <span class="nx">le</span> <span class="nx">fichier</span> <span class="s1">'{$_FILES['</span><span class="nx">fichier</span><span class="s1">']['</span><span class="nx">name</span><span class="s1">']}'</span> <span class="nx">n</span><span class="s1">'a pas pu être enregistré";
            }
        }
    }

    // vérification finale de la validation
    if ($validation) {
        // il n'</span><span class="nx">y</span> <span class="nx">a</span> <span class="nx">pas</span> <span class="nx">d</span><span class="s1">'erreurs

        // affectation d'</span><span class="nx">un</span> <span class="nx">message</span> <span class="nx">de</span> <span class="nx">confirmation</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="si">}</span><span class="s2"> else {
        // il y a des erreurs
        // affectation d'un message d'erreur
        </span><span class="nv">$messages['formulaire']</span><span class="s2"> = "</span><span class="nx">merci</span> <span class="nx">de</span> <span class="nx">remplir</span> <span class="nx">le</span> <span class="nx">formulaire</span> <span class="nx">et</span> <span class="nx">de</span> <span class="nx">le</span> <span class="nx">valider</span><span class="s2">";
    }
}

?&gt;&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="s2">" /&gt;
&lt;title&gt;&lt;/title&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;div&gt;&lt;?php echo htmlentities(</span><span class="nv">$messages['formulaire']</span><span class="s2">) ?&gt;&lt;/div&gt;

&lt;?php // il faut utiliser l'attribut `enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">"` pour que le fichier puisse être envoyé ?&gt;
&lt;form action="" method="</span><span class="nx">post</span><span class="s2">" enctype="</span><span class="nx">multipart</span><span class="o">/</span><span class="nx">form</span><span class="o">-</span><span class="nx">data</span><span class="s2">" &gt;
    &lt;label for="</span><span class="nx">fichier</span><span class="s2">"&gt;fichier&lt;/label&gt;&lt;br /&gt;
    &lt;div&gt;&lt;?php echo isset(</span><span class="nv">$messages['fichier'][0]</span><span class="s2">) ? </span><span class="nv">$messages['fichier'][0]</span><span class="s2"> : ''; ?&gt;&lt;/div&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="p">[]</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;
    &lt;div&gt;&lt;?php echo isset(</span><span class="nv">$messages['fichier'][1]</span><span class="s2">) ? </span><span class="nv">$messages['fichier'][1]</span><span class="s2"> : ''; ?&gt;&lt;/div&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="p">[]</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;
    &lt;div&gt;&lt;?php echo isset(</span><span class="nv">$messages['fichier'][2]</span><span class="s2">) ? </span><span class="nv">$messages['fichier'][2]</span><span class="s2"> : ''; ?&gt;&lt;/div&gt;
    &lt;input name="</span><span class="nx">fichier</span><span class="p">[]</span><span class="s2">" type="</span><span class="nb">file</span><span class="s2">" /&gt;&lt;br /&gt;

    &lt;input type="</span><span class="nx">submit</span><span class="s2">" value="</span><span class="nx">envoyer</span><span class="s2">" /&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-textarea.php">code/form-textarea.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `textarea` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'commentaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'commentaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir un commentaire"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"commentaire"</span><span class="nt">&gt;</span>commentaire<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"commentaire"</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'commentaire'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/textarea&gt;&lt;br</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-select.php">code/form-select.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser l'aliment"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>aliment<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-select-optgroup.php">code/form-select-optgroup.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` ne renvoient qu'une seule valeur
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `select` avec des balises `optgroup`
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fruits'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'fraise'</span><span class="p">,</span>
        <span class="s1">'kiwi'</span><span class="p">,</span>
        <span class="s1">'orange'</span>
    <span class="p">),</span>
    <span class="s1">'légumes'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'carotte'</span><span class="p">,</span>
        <span class="s1">'courgette'</span><span class="p">,</span>
        <span class="s1">'pomme de terre'</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliment'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser l'aliment"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>aliment<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"aliment"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// génération `optgroup` avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$optgroup</span> <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;optgroup</span> <span class="na">label=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$optgroup</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>            <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliment'</span><span class="p">]</span> <span class="o">==</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/optgroup&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-select-multiple.php">code/form-select-multiple.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` avec l'attribut `multiple="multiple"` peuvent renvoyer une ou plusieurs valeurs sous la forme d'un tableau
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'carotte'</span><span class="p">,</span>
    <span class="s1">'courgette'</span><span class="p">,</span>
    <span class="s1">'fraise'</span><span class="p">,</span>
    <span class="s1">'kiwi'</span><span class="p">,</span>
    <span class="s1">'orange'</span><span class="p">,</span>
    <span class="s1">'pomme de terre'</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser les aliments"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliments"</span><span class="nt">&gt;</span>aliments<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">multiple</span><span class="o">=</span><span class="s2">"multiple"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// génération `optgroup` avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$aliment</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>        <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$aliment</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$aliment</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-select-multiple-optgroup.php">code/form-select-multiple-optgroup.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// les champs `select` avec l'attribut `multiple="multiple"` peuvent renvoyer une ou plusieurs valeurs sous la forme d'un tableau
</span>
<span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs du champ `select` avec des balises `optgroup`
</span><span class="nv">$aliments</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'fruits'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'fraise'</span><span class="p">,</span>
        <span class="s1">'kiwi'</span><span class="p">,</span>
        <span class="s1">'orange'</span>
    <span class="p">),</span>
    <span class="s1">'légumes'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'carotte'</span><span class="p">,</span>
        <span class="s1">'courgette'</span><span class="p">,</span>
        <span class="s1">'pomme de terre'</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
<span class="p">);</span>

<span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'aliments'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser les aliments"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci d'avoir rempli le formulaire"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"aliments"</span><span class="nt">&gt;</span>aliments<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// @warning il faut ajouter des crochets `[]` à l'attribut `name` pour que le champ puisse renvoyer plusieurs valeurs ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">select</span> <span class="nx">multiple</span><span class="o">=</span><span class="s2">"multiple"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"aliments[]"</span><span class="o">&gt;</span>
    <span class="o">&lt;?</span><span class="nx">php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>    <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$aliments</span> <span class="k">as</span> <span class="nv">$optgroup</span> <span class="o">=&gt;</span> <span class="nv">$items</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;optgroup</span> <span class="na">label=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$optgroup</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;?php</span> <span class="c1">// génération du champ avec une boucle ?&gt;
</span>        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// comparaison des données envoyées par l'utilisateur ?&gt;
</span>            <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'aliments'</span><span class="p">]))</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur a coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">selected</span><span class="o">=</span><span class="s2">"selected"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
            <span class="cp">&lt;?php</span> <span class="c1">// l'utilisateur n'a pas coché cette case ?&gt;
</span>            <span class="o">&lt;</span><span class="nx">option</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$item</span><span class="s2">); ?&gt;"</span><span class="o">&gt;&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/option&gt;</span>
            <span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/optgroup&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/select&gt;</span>

    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"envoyer"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-etape1.php">code/form-etape1.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes
</span>
<span class="c1">// démarrage de la session
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'titre'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'titre'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le titre"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>
        <span class="c1">// stockage des valeurs du formulaire dans la variable de session
</span>        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">];</span>

        <span class="c1">// redirection vers le formulaire suivant
</span>        <span class="nb">header</span><span class="p">(</span><span class="s1">'location: form-etape2.php'</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"titre"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['titre']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-etape2.php">code/form-etape2.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes
</span>
<span class="c1">// démarrage de la session
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="c1">// on part du principe que le formulaire est valide
// on déclarera une erreur si on en trouve une lors de la validation du formulaire
</span><span class="nv">$validation</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="c1">// valeurs par défaut du formulaire
</span><span class="nv">$formulaire</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// messages par défaut du formulaire
</span><span class="nv">$messages</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
    <span class="s1">'formulaire'</span> <span class="o">=&gt;</span> <span class="s1">''</span>
<span class="p">);</span>

<span class="c1">// validation des données du formulaire
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// validation du champ 'email'
</span>    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreur
</span>        <span class="c1">// on peut stocker la valeur du champ dans une variable
</span>        <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a une erreur
</span>        <span class="nv">$validation</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de préciser le email"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// vérification de la validation
</span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$validation</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// il n'y a pas d'erreurs
</span>
        <span class="c1">// stockage des valeurs du formulaire dans la variable de session
</span>        <span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$formulaire</span><span class="p">[</span><span class="s1">'email'</span><span class="p">];</span>

        <span class="c1">// redirection vers le formulaire suivant
</span>        <span class="nb">header</span><span class="p">(</span><span class="s1">'location: form-etape3.php'</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="mi">302</span><span class="p">);</span>
        <span class="k">exit</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// il y a des erreurs
</span>        <span class="c1">// affectation d'un message d'erreur
</span>        <span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"merci de remplir le formulaire et de le valider"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'formulaire'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">""</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$messages</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])</span> <span class="cp">?&gt;</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
    <span class="cp">&lt;?php</span> <span class="c1">// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html ?&gt;
</span>    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"email"</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"&lt;?php echo htmlentities(</span><span class="nv">$formulaire['email']</span><span class="s2">); ?&gt;"</span> <span class="o">/&gt;&lt;</span><span class="nx">br</span> <span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"envoyer"</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">form</span><span class="o">&gt;</span>

<span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="code/form-etape3.php">code/form-etape3.php</a></p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// formulaire en plusieurs étapes
</span>
<span class="c1">// démarrage de la session
</span><span class="nb">session_start</span><span class="p">();</span>

<span class="cp">?&gt;&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;title&gt;&lt;/title&gt;</span>

<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;p&gt;</span>vous avez entré :<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"titre"</span><span class="nt">&gt;</span>titre<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="cp">&lt;?php</span>
<span class="c1">// affichage d'une valeur stockée dans la variable de session
// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html
</span><span class="cp">?&gt;</span>
<span class="nt">&lt;input</span> <span class="na">disabled=</span><span class="s">"disabled"</span> <span class="na">name=</span><span class="s">"titre"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'titre'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"email"</span><span class="nt">&gt;</span>email<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="cp">&lt;?php</span>
<span class="c1">// affichage d'une valeur stockée dans la variable de session
// il faut utiliser la fonction `htmlentities()` pour afficher une variable dans du code html
</span><span class="cp">?&gt;</span>
<span class="nt">&lt;input</span> <span class="na">disabled=</span><span class="s">"disabled"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlentities</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="nt">/&gt;&lt;br</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>



    </article>
</section>

</body>
</html>

